import{a as K}from"./chunk-MOAQ4HEH.js";import{a as J}from"./chunk-4EVBEZYA.js";import{a as Y}from"./chunk-CXUTNJ66.js";import"./chunk-T2LB2H6F.js";import"./chunk-3U3J6ACK.js";import{a as q}from"./chunk-ONHPZ2ES.js";import{a as G}from"./chunk-SRNYRJLM.js";import{a as L}from"./chunk-KYSSZNVX.js";import{a as z}from"./chunk-RVEWURZZ.js";import"./chunk-B5AWRWMY.js";import{a as H,b as $,c as N}from"./chunk-LWYV2P65.js";import{p as R}from"./chunk-PYKOMTOC.js";import{E as D,ba as U}from"./chunk-IWNF2QU4.js";import{Aa as M,B as P,D as k,Ha as d,I as f,J as b,Ja as y,K as T,Ka as j,O as B,Ra as F,T as w,V as l,Va as V,W as p,Wa as O,_ as I,da as h,fa as x,ka as m,la as S,na as g,oa as v,pa as r,pb as A,qa as c,ra as _,va as C,wa as u,xa as s}from"./chunk-XL3YBMFF.js";import"./chunk-SIAVTO45.js";var Q=(()=>{class i{constructor(e,n){this.el=e,this.renderer=n}onMouseOver(){this.setBorder("4px solid blue")}onMouseOut(){this.setBorder("")}setBorder(e){this.renderer.setStyle(this.el.nativeElement,"border",e)}static{this.\u0275fac=function(n){return new(n||i)(p(B),p(I))}}static{this.\u0275dir=k({type:i,selectors:[["","appBorderSelectionBlue",""]],hostBindings:function(n,t){n&1&&u("mouseover",function(){return t.onMouseOver()})("mouseout",function(){return t.onMouseOut()})},standalone:!0})}}return i})();function ie(i,a){if(i&1){let e=C();r(0,"div",4)(1,"h1",6),d(2,"Seleccione un paciente"),c(),r(3,"app-tabla-pacientes",7),u("onEnviarId",function(t){f(e);let o=s(2);return b(o.recibirIdPaciente(t))}),c(),r(4,"div",8)(5,"span",9),d(6,"id"),c(),_(7,"input",10),r(8,"button",11),u("click",function(){f(e);let t=s(2);return b(t.cambiarSecuencia(!0))}),d(9,"Siguiente"),c()()()}if(i&2){let e=s(2);l(3),x("tipoVista",1),l(4),x("value",e.idPaciente),l(),x("disabled",e.idPaciente=="")}}function te(i,a){if(i&1&&_(0,"img",16),i&2){let e=s().$implicit;M("src",e.imagen,w)}}function ne(i,a){i&1&&_(0,"app-spinner",17)}function oe(i,a){if(i&1){let e=C();r(0,"div",14)(1,"h3"),d(2),c(),r(3,"button",15),u("click",function(){let t=f(e).$implicit,o=s(4);return b(o.seleccionarEspecialista(t))}),h(4,te,1,1,"img",16)(5,ne,1,0),c()()}if(i&2){let e=a.$implicit;l(2),j("",e.nombre," ",e.apellido,""),l(2),m(4,e.imagen?4:5)}}function ae(i,a){if(i&1&&g(0,oe,6,3,"div",14,S),i&2){let e=s(3);v(e.especialistas)}}function re(i,a){i&1&&(r(0,"div",18)(1,"h3",19),d(2,"No hay especialistas"),c(),T(),r(3,"svg",20),_(4,"path",21)(5,"path",22),c()())}function ce(i,a){if(i&1&&(r(0,"h1",12),d(1,"Seleccione un especialista"),c(),r(2,"div",13),h(3,ae,2,0)(4,re,6,0),c()),i&2){let e=s(2);l(3),m(3,e.especialistas.length>0?3:4)}}function se(i,a){if(i&1){let e=C();r(0,"button",24),u("click",function(){let t=f(e).$implicit,o=s(4);return b(o.seleccionarEspecialidad(t))}),r(1,"img",25),u("error",function(t){f(e);let o=s(4);return b(o.onImageError(t))}),c()()}if(i&2){let e=a.$implicit;l(),x("src","../../../assets/especialidades/"+e+".png",w)}}function le(i,a){if(i&1&&g(0,se,2,1,"button",23,S),i&2){let e=s(3);v(e.especialdadesFiltradas)}}function de(i,a){i&1&&_(0,"app-spinner")}function pe(i,a){if(i&1&&(r(0,"h1",12),d(1,"Seleccione una especialidad"),c(),r(2,"div",13),h(3,le,2,0)(4,de,1,0),c()),i&2){let e=s(2);l(3),m(3,e.especialidades!=null?3:4)}}function me(i,a){if(i&1){let e=C();r(0,"button",27),u("click",function(){let t=f(e).$implicit,o=s(5);return b(o.seleccionarFecha(t))}),d(1),c()}if(i&2){let e=a.$implicit;l(),y(" ",e.fecha," ")}}function _e(i,a){if(i&1&&g(0,me,2,1,"button",26,S),i&2){let e=s(4);v(e.arrayTurnosEspecialista)}}function ue(i,a){i&1&&(r(0,"div",18)(1,"h3",19),d(2,"No hay fechas disponibles"),c(),T(),r(3,"svg",20),_(4,"path",21)(5,"path",22),c()())}function he(i,a){if(i&1&&h(0,_e,2,0)(1,ue,6,0),i&2){let e=s(3);m(0,e.arrayTurnosEspecialista.length>0?0:1)}}function fe(i,a){i&1&&_(0,"app-spinner")}function be(i,a){if(i&1&&(r(0,"h1",12),d(1,"Seleccione una fecha"),c(),r(2,"div",13),h(3,he,2,1)(4,fe,1,0),c()),i&2){let e=s(2);l(3),m(3,e.arrayTurnosEspecialista!=null?3:4)}}function Ce(i,a){if(i&1){let e=C();r(0,"button",29),u("click",function(){let t=f(e).$implicit,o=s(5);return b(o.seleccionarHorario(t))}),d(1),V(2,"minutosAHora"),c()}if(i&2){let e=a.$implicit;l(),y(" ",O(2,1,e)," ")}}function xe(i,a){if(i&1&&g(0,Ce,3,3,"button",28,S),i&2){let e=s(4);v(e.horariosFechaSeleccionada)}}function Se(i,a){i&1&&(r(0,"div",18)(1,"h3",19),d(2,"No hay horarios disponibles para esta fecha"),c(),T(),r(3,"svg",20),_(4,"path",21)(5,"path",22),c()())}function ge(i,a){if(i&1&&h(0,xe,2,0)(1,Se,6,0),i&2){let e=s(3);m(0,e.horariosFechaSeleccionada.length>0?0:1)}}function ve(i,a){i&1&&_(0,"app-spinner")}function Te(i,a){if(i&1&&(r(0,"h1",12),d(1,"Seleccione un horario"),c(),r(2,"div",13),h(3,ge,2,1)(4,ve,1,0),c()),i&2){let e=s(2);l(3),m(3,e.horariosCargados?3:4)}}function Ee(i,a){if(i&1){let e=C();h(0,ie,10,3,"div",4)(1,ce,5,1)(2,pe,5,1)(3,be,5,1)(4,Te,5,1),r(5,"div",3)(6,"button",5),u("click",function(){f(e);let t=s();return b(t.cambiarSecuencia(!1))}),d(7," Volver "),c()()}if(i&2){let e=s();m(0,e.secuenciaCard=="pacientes"?0:e.secuenciaCard=="especialistas"?1:-1),l(2),m(2,e.secuenciaCard=="especialidades"?2:e.secuenciaCard=="fechas"?3:e.secuenciaCard=="horarios"?4:-1),l(4),x("disabled",e.secuenciaCard=="especialistas"&&!e.esAdmin||e.secuenciaCard=="pacientes"&&e.esAdmin)}}function we(i,a){i&1&&_(0,"app-spinner",30)}var Ge=(()=>{class i{constructor(e,n,t,o,E,W,X,Z){this.administradoresService=e,this.pacientesService=n,this.authService=t,this.turnosService=o,this.router=E,this.storageService=W,this.especialistasService=X,this.especialidadesService=Z,this.tiempo=new J,this.swal=new D(this.router),this.esAdmin=!1,this.horariosCargados=!1,this.opcionesSeleccionadas={},this.idPaciente=""}ngOnInit(){this.authService.auth.currentUser?.email&&this.administradoresService.esAdmin(this.authService.auth.currentUser?.email).then(e=>{this.esAdmin=e,console.log("Admin: "+this.esAdmin),e?this.secuenciaCard="pacientes":this.secuenciaCard="especialistas"}),this.especialidadesService.obtenerEspecialidades(),this.obtenerEspecialidadesSub=this.especialidadesService.obtenerEspecialidadesSubject.subscribe(e=>{e&&(this.especialidades=this.especialidadesService.coleccionEspecialidades)}),this.especialistasService.obtenerEspecialistas(),this.obtenerEspecialistasSub=this.especialistasService.obtenerEspecialistasSubject.subscribe(e=>{e&&(this.especialistas=this.especialistasService.coleccionEspecialistas,console.log("especialistas:",this.especialistas),this.especialistas.forEach(n=>{this.storageService.obtenerImagen(`especialistas/${n.mail}`).then(t=>{t&&(n.imagen=t)})}))})}recibirIdPaciente(e){this.idPaciente=e}cambiarSecuencia(e){if(e)switch(this.secuenciaCard){case"pacientes":this.secuenciaCard="especialistas";break;case"especialistas":this.secuenciaCard="especialidades";break;case"especialidades":this.secuenciaCard="fechas";break;case"fechas":this.secuenciaCard="horarios";break}else switch(this.secuenciaCard){case"especialistas":this.esAdmin&&(this.secuenciaCard="pacientes");break;case"especialidades":this.secuenciaCard="especialistas";break;case"fechas":this.secuenciaCard="especialidades";break;case"horarios":this.secuenciaCard="fechas";break}}seleccionarEspecialista(e){this.cambiarSecuencia(!0),this.opcionesSeleccionadas.especialista=e,this.especialdadesFiltradas=e.especialidades,console.log("Especialidades del especialista seleccionado:",this.especialdadesFiltradas)}seleccionarEspecialidad(e){this.cambiarSecuencia(!0),this.opcionesSeleccionadas.especialidad=e,this.cargarFechasTurnos(),this.opcionesSeleccionadas.especialista?this.cargarHorariosTurnos(this.opcionesSeleccionadas.especialista,e):console.error("El especialista no est\xE1 definido.")}seleccionarFecha(e){this.opcionesSeleccionadas.fecha=e.fecha,this.cambiarSecuencia(!0),this.horariosFechaSeleccionada=[],this.horariosCargados=!1;for(let n=e.horarios.inicio;n<e.horarios.fin;n=n+30)this.opcionesSeleccionadas.especialista?.id&&this.turnosService.obtenerTurnoPorIdEspecialistaFechaYHora(this.opcionesSeleccionadas.especialista?.id,this.opcionesSeleccionadas.fecha,n).then(t=>{t||this.horariosFechaSeleccionada.push(n),n==e.horarios.fin-30&&(this.horariosCargados=!0)})}seleccionarHorario(e){this.opcionesSeleccionadas.hora=e,this.swal.mostrarMensajeConfirmar("Confirmar turno",`Confirma solicitar turno con ${this.opcionesSeleccionadas.especialista?.nombre} ${this.opcionesSeleccionadas.especialista?.apellido} 
      el d\xEDa ${this.opcionesSeleccionadas.fecha} a las ${this.tiempo.minutosAHora(this.opcionesSeleccionadas.hora)} hs?
      `).then(n=>{if(n.isConfirmed)if(this.esAdmin){let t=this.pacientesService.obtenerPacientePorId(this.idPaciente).then(o=>{if(this.opcionesSeleccionadas.fecha&&this.opcionesSeleccionadas.hora&&this.opcionesSeleccionadas.especialista?.id&&this.opcionesSeleccionadas.especialidad&&o?.nombre&&o.apellido){let E={fecha:this.opcionesSeleccionadas.fecha,hora:this.opcionesSeleccionadas.hora,idEspecialista:this.opcionesSeleccionadas.especialista.id,especialidad:this.opcionesSeleccionadas.especialidad,idPaciente:this.idPaciente,nombrePaciente:o?.nombre,apellidoPaciente:o.apellido,nombreEspecialista:this.opcionesSeleccionadas.especialista.nombre,apellidoEspecialista:this.opcionesSeleccionadas.especialista.apellido};this.authService.auth.currentUser?.email,this.turnosService.guardarTurno(E),this.swal.mostrarMensajeExito("Turno solicitado","\xA1El turno fue solicitado con \xE9xito!"),this.cambiarSecuencia(!1)}})}else this.authService.auth.currentUser?.email&&this.pacientesService.obtenerPacientePorEmail(this.authService.auth.currentUser?.email).then(t=>{if(this.opcionesSeleccionadas.fecha&&this.opcionesSeleccionadas.hora&&this.opcionesSeleccionadas.especialista?.id&&this.opcionesSeleccionadas.especialidad&&t?.id){let o={fecha:this.opcionesSeleccionadas.fecha,hora:this.opcionesSeleccionadas.hora,idEspecialista:this.opcionesSeleccionadas.especialista.id,especialidad:this.opcionesSeleccionadas.especialidad,nombreEspecialista:this.opcionesSeleccionadas.especialista.nombre,apellidoEspecialista:this.opcionesSeleccionadas.especialista.apellido,nombrePaciente:t.nombre,apellidoPaciente:t.apellido,idPaciente:t?.id};this.authService.auth.currentUser?.email,this.turnosService.guardarTurno(o),this.swal.mostrarMensajeExito("Turno solicitado","\xA1El turno fue solicitado con \xE9xito!"),this.cambiarSecuencia(!1)}})})}cargarHorariosTurnos(e,n){e.disponibilidades&&e.disponibilidades.forEach(t=>{t.especialidad===n&&this.arrayTurnosEspecialista.forEach(o=>{o.horarios=o.horarios||{inicio:0,fin:0},this.tiempo.getDia(o.fecha)===t.dia&&(o.horarios={inicio:t.horaInicio,fin:t.horaFin})})});for(let t=this.arrayTurnosEspecialista.length-1;t>=0;t--){let o=this.arrayTurnosEspecialista[t];o.horarios.inicio===0&&o.horarios.fin===0&&this.arrayTurnosEspecialista.splice(t,1)}}cargarFechasTurnos(){let e=this.tiempo.getProximosDias(15);this.arrayTurnosEspecialista=e.map(n=>({fecha:n,horarios:{inicio:0,fin:0}})),console.log("turnos:",this.arrayTurnosEspecialista)}onImageError(e){let n=e.target;n.src="../../../assets/especialidades/Default.png"}goToMisTurnos(){this.router.navigate(["/turnos/mis-turnos"])}static{this.\u0275fac=function(n){return new(n||i)(p(H),p($),p(N),p(q),p(A),p(L),p(U),p(G))}}static{this.\u0275cmp=P({type:i,selectors:[["app-solicitar-turnos"]],standalone:!0,features:[F],decls:6,vars:1,consts:[[1,"text-center",2,"margin-top","50px"],[1,"container","d-flex","align-items-center","justify-content-center","h-100"],[1,"card","card-secuencias","col-md-10","p-4","d-flex","flex-column","justify-content-between"],[1,"d-flex","justify-content-center","mt-4"],[1,"card","my-auto","border","rounded-3","p-4","bg-secondary"],[1,"btn","btn-volver-rectangular",3,"click","disabled"],[1,"text-center","text-white"],[1,"my-4",3,"onEnviarId","tipoVista"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],["type","text","placeholder","Username","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"value"],["type","button","id","button-addon2",1,"btn","btn-rectangular",3,"click","disabled"],[1,"text-center","display-2"],[1,"flex-wrap","d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","flex-column","justify-content-center","align-items-center","m-4"],["appBorderSelectionBlue","",1,"btn","rounded-circle","btn-especialista-redondo","p-2","m-2",3,"click"],[1,"especialista-imagen-redondo",3,"src"],[1,"especialista-imagen-redondo"],[1,"d-flex","flex-column","align-items-center","justify-content-center","p-4"],[1,"m-3"],["xmlns","http://www.w3.org/2000/svg","width","120","height","120","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-emoji-frown"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"],["d","M4.285 12.433a.5.5 0 0 0 .683-.183A3.5 3.5 0 0 1 8 10.5c1.295 0 2.426.703 3.032 1.75a.5.5 0 0 0 .866-.5A4.5 4.5 0 0 0 8 9.5a4.5 4.5 0 0 0-3.898 2.25.5.5 0 0 0 .183.683M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5m4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5"],["appBorderSelectionBlue","",1,"btn","btn-especialidad-cuadrado","p-3","m-3","d-flex","flex-column","align-items-center"],["appBorderSelectionBlue","",1,"btn","btn-especialidad-cuadrado","p-3","m-3","d-flex","flex-column","align-items-center",3,"click"],[1,"w-100","h-100","img-especialidad-cuadrado",3,"error","src"],["appBorderSelectionBlue","",1,"btn","btn-fecha-rectangular","m-2"],["appBorderSelectionBlue","",1,"btn","btn-fecha-rectangular","m-2",3,"click"],["appBorderSelectionBlue","",1,"btn","btn-hora-rectangular","m-2"],["appBorderSelectionBlue","",1,"btn","btn-hora-rectangular","m-2",3,"click"],[1,"d-flex","justify-content-center","align-items-center"]],template:function(n,t){n&1&&(r(0,"h1",0),d(1,"SOLICITUD DE TURNO"),c(),r(2,"div",1)(3,"div",2),h(4,Ee,8,3,"div",3)(5,we,1,0),c()()),n&2&&(l(4),m(4,t.secuenciaCard?4:5))},dependencies:[R,Y,z,K,Q],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;background:#a9bcd0;background:linear-gradient(90deg,#a9bcd0,#d8dbe2 35%,#58a4b0)}.card-secuencias[_ngcontent-%COMP%]{background-color:#80b7d1;border-radius:3rem;min-height:60vh;display:flex;flex-direction:column;justify-content:space-between;color:#fff}.btn-redondo[_ngcontent-%COMP%]{width:200px;height:200px;--bs-btn-color: #ffffff;--bs-btn-bg: #7bc7d3;--bs-btn-hover-color: #ffffff;--bs-btn-hover-bg: #41abbb;--bs-btn-active-color: #ffffff;--bs-btn-active-bg: #157786;--bs-btn-active-border-color: #157786;--bs-btn-disabled-border-color: #157786;--bs-btn-disabled-color: #ffffff;--bs-btn-disabled-bg: #157786}.btn-volver[_ngcontent-%COMP%]{--bs-btn-color: #000000;--bs-btn-bg: #7bc7d3;--bs-btn-hover-color: #000000;--bs-btn-hover-bg: #188c9e;--bs-btn-active-color: #000000;--bs-btn-active-bg: #157786;--bs-btn-active-border-color: #157786;--bs-btn-disabled-border-color: #818181;--bs-btn-disabled-color: #000000;--bs-btn-disabled-bg: #818181}.btn-rectangular[_ngcontent-%COMP%]{--bs-btn-color: #ffffff;--bs-btn-bg: #1ca1b6;--bs-btn-hover-color: #ffffff;--bs-btn-hover-bg: #188c9e;--bs-btn-active-color: #ffffff;--bs-btn-active-bg: #157786;--bs-btn-active-border-color: #157786;--bs-btn-disabled-border-color: #157786;--bs-btn-disabled-color: #ffffff;--bs-btn-disabled-bg: #157786}.btn-volver-rectangular[_ngcontent-%COMP%]{width:100%;max-width:200px;height:50px;background-color:#637d88;color:#fff;font-size:1.2rem;border-radius:.5rem;text-align:center}.btn-volver-rectangular[_ngcontent-%COMP%]:hover{background-color:#7096a4}.btn-especialidad-cuadrado[_ngcontent-%COMP%]{width:150px;height:150px;background-color:#333;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:space-around;border-radius:1rem;box-shadow:0 4px 6px #0000001a;text-align:center;transition:transform .3s}.btn-especialidad-cuadrado[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.img-especialidad-cuadrado[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:.5rem;object-fit:cover}.btn-especialista-redondo[_ngcontent-%COMP%]{width:250px;height:250px;background-color:#333;color:#333;display:flex;align-items:center;justify-content:center;border-radius:.5rem;box-shadow:0 4px 6px #0000001a;transition:transform .3s;border:2px solid#333}.btn-especialista-redondo[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.especialista-imagen-redondo[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover}.btn-fecha-rectangular[_ngcontent-%COMP%]{width:110px;height:60px;background-color:#333;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:space-around;border-radius:1rem;box-shadow:0 4px 6px #0000001a;text-align:center;transition:transform .3s;font:bold}.btn-fecha-rectangular[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.btn-hora-rectangular[_ngcontent-%COMP%]{width:100px;height:60px;background-color:#333;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:space-around;border-radius:1rem;box-shadow:0 4px 6px #0000001a;text-align:center;transition:transform .3s;font:bold}.btn-hora-rectangular[_ngcontent-%COMP%]:hover{transform:scale(1.05)}"]})}}return i})();export{Ge as SolicitarTurnosComponent};
