import{F as Vr,N as Lr,Q as ad,Ya as cd,Za as ud,a as $i,aa as _n,c as _c,d as id,e as sd,f as vc,h as Ic,i as Ec,l as xr,r as od,u as Co,w as Or,x as Ro,z as nt}from"./chunk-XL3YBMFF.js";import{a as qi,b as rd,d as Pg,f as Cg,g as wn,h as T}from"./chunk-SIAVTO45.js";var Of=Pg((Rt,Vu)=>{"use strict";(function(n,e){typeof Rt=="object"&&typeof Vu<"u"?Vu.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(Rt,function(){"use strict";function n(c,u,p){if(typeof c=="function"?c===u:c.has(u))return arguments.length<3?u:p;throw new TypeError("Private element is not present on this object")}function e(c,u){if(u.has(c))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(c,u){return c.get(n(c,u))}function r(c,u,p){e(c,u),u.set(c,p)}function i(c,u,p){return c.set(n(c,u),p),p}let o=100,a={},h=()=>{a.previousActiveElement instanceof HTMLElement?(a.previousActiveElement.focus(),a.previousActiveElement=null):document.body&&document.body.focus()},f=c=>new Promise(u=>{if(!c)return u();let p=window.scrollX,_=window.scrollY;a.restoreFocusTimeout=setTimeout(()=>{h(),u()},o),window.scrollTo(p,_)}),m="swal2-",g=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((c,u)=>(c[u]=m+u,c),{}),N=["success","warning","info","question","error"].reduce((c,u)=>(c[u]=m+u,c),{}),M="SweetAlert2:",B=c=>c.charAt(0).toUpperCase()+c.slice(1),O=c=>{console.warn(`${M} ${typeof c=="object"?c.join(" "):c}`)},G=c=>{console.error(`${M} ${c}`)},Q=[],J=c=>{Q.includes(c)||(Q.push(c),O(c))},ce=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;J(`"${c}" is deprecated and will be removed in the next major release.${u?` Use "${u}" instead.`:""}`)},ve=c=>typeof c=="function"?c():c,ne=c=>c&&typeof c.toPromise=="function",P=c=>ne(c)?c.toPromise():Promise.resolve(c),v=c=>c&&Promise.resolve(c)===c,I=()=>document.body.querySelector(`.${g.container}`),b=c=>{let u=I();return u?u.querySelector(c):null},A=c=>b(`.${c}`),S=()=>A(g.popup),E=()=>A(g.icon),ot=()=>A(g["icon-content"]),Zt=()=>A(g.title),pi=()=>A(g["html-container"]),en=()=>A(g.image),Ft=()=>A(g["progress-steps"]),tn=()=>A(g["validation-message"]),Ke=()=>b(`.${g.actions} .${g.confirm}`),nn=()=>b(`.${g.actions} .${g.cancel}`),Ue=()=>b(`.${g.actions} .${g.deny}`),De=()=>A(g["input-label"]),rn=()=>b(`.${g.loader}`),at=()=>A(g.actions),Vs=()=>A(g.footer),yt=()=>A(g["timer-progress-bar"]),mi=()=>A(g.close),ec=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,sn=()=>{let c=S();if(!c)return[];let u=c.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),p=Array.from(u).sort((F,H)=>{let oe=parseInt(F.getAttribute("tabindex")||"0"),pe=parseInt(H.getAttribute("tabindex")||"0");return oe>pe?1:oe<pe?-1:0}),_=c.querySelectorAll(ec),k=Array.from(_).filter(F=>F.getAttribute("tabindex")!=="-1");return[...new Set(p.concat(k))].filter(F=>Me(F))},on=()=>He(document.body,g.shown)&&!He(document.body,g["toast-shown"])&&!He(document.body,g["no-backdrop"]),an=()=>{let c=S();return c?He(c,g.toast):!1},gi=()=>{let c=S();return c?c.hasAttribute("data-loading"):!1},Le=(c,u)=>{if(c.textContent="",u){let _=new DOMParser().parseFromString(u,"text/html"),k=_.querySelector("head");k&&Array.from(k.childNodes).forEach(H=>{c.appendChild(H)});let F=_.querySelector("body");F&&Array.from(F.childNodes).forEach(H=>{H instanceof HTMLVideoElement||H instanceof HTMLAudioElement?c.appendChild(H.cloneNode(!0)):c.appendChild(H)})}},He=(c,u)=>{if(!u)return!1;let p=u.split(/\s+/);for(let _=0;_<p.length;_++)if(!c.classList.contains(p[_]))return!1;return!0},Ls=(c,u)=>{Array.from(c.classList).forEach(p=>{!Object.values(g).includes(p)&&!Object.values(N).includes(p)&&!Object.values(u.showClass||{}).includes(p)&&c.classList.remove(p)})},Be=(c,u,p)=>{if(Ls(c,u),!u.customClass)return;let _=u.customClass[p];if(_){if(typeof _!="string"&&!_.forEach){O(`Invalid type of customClass.${p}! Expected string or iterable object, got "${typeof _}"`);return}Y(c,_)}},_r=(c,u)=>{if(!u)return null;switch(u){case"select":case"textarea":case"file":return c.querySelector(`.${g.popup} > .${g[u]}`);case"checkbox":return c.querySelector(`.${g.popup} > .${g.checkbox} input`);case"radio":return c.querySelector(`.${g.popup} > .${g.radio} input:checked`)||c.querySelector(`.${g.popup} > .${g.radio} input:first-child`);case"range":return c.querySelector(`.${g.popup} > .${g.range} input`);default:return c.querySelector(`.${g.popup} > .${g.input}`)}},yi=c=>{if(c.focus(),c.type!=="file"){let u=c.value;c.value="",c.value=u}},wi=(c,u,p)=>{!c||!u||(typeof u=="string"&&(u=u.split(/\s+/).filter(Boolean)),u.forEach(_=>{Array.isArray(c)?c.forEach(k=>{p?k.classList.add(_):k.classList.remove(_)}):p?c.classList.add(_):c.classList.remove(_)}))},Y=(c,u)=>{wi(c,u,!0)},Qe=(c,u)=>{wi(c,u,!1)},wt=(c,u)=>{let p=Array.from(c.children);for(let _=0;_<p.length;_++){let k=p[_];if(k instanceof HTMLElement&&He(k,u))return k}},ct=(c,u,p)=>{p===`${parseInt(p)}`&&(p=parseInt(p)),p||parseInt(p)===0?c.style.setProperty(u,typeof p=="number"?`${p}px`:p):c.style.removeProperty(u)},ge=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";c&&(c.style.display=u)},Ie=c=>{c&&(c.style.display="none")},Ee=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";c&&new MutationObserver(()=>{_t(c,c.innerHTML,u)}).observe(c,{childList:!0,subtree:!0})},Ne=(c,u,p,_)=>{let k=c.querySelector(u);k&&k.style.setProperty(p,_)},_t=function(c,u){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";u?ge(c,p):Ie(c)},Me=c=>!!(c&&(c.offsetWidth||c.offsetHeight||c.getClientRects().length)),Ms=()=>!Me(Ke())&&!Me(Ue())&&!Me(nn()),Fs=c=>c.scrollHeight>c.clientHeight,cn=c=>{let u=window.getComputedStyle(c),p=parseFloat(u.getPropertyValue("animation-duration")||"0"),_=parseFloat(u.getPropertyValue("transition-duration")||"0");return p>0||_>0},vr=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=yt();p&&Me(p)&&(u&&(p.style.transition="none",p.style.width="100%"),setTimeout(()=>{p.style.transition=`width ${c/1e3}s linear`,p.style.width="0%"},10))},Us=()=>{let c=yt();if(!c)return;let u=parseInt(window.getComputedStyle(c).width);c.style.removeProperty("transition"),c.style.width="100%";let p=parseInt(window.getComputedStyle(c).width),_=u/p*100;c.style.width=`${_}%`},_i=()=>typeof window>"u"||typeof document>"u",tc=`
 <div aria-labelledby="${g.title}" aria-describedby="${g["html-container"]}" class="${g.popup}" tabindex="-1">
   <button type="button" class="${g.close}"></button>
   <ul class="${g["progress-steps"]}"></ul>
   <div class="${g.icon}"></div>
   <img class="${g.image}" />
   <h2 class="${g.title}" id="${g.title}"></h2>
   <div class="${g["html-container"]}" id="${g["html-container"]}"></div>
   <input class="${g.input}" id="${g.input}" />
   <input type="file" class="${g.file}" />
   <div class="${g.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${g.select}" id="${g.select}"></select>
   <div class="${g.radio}"></div>
   <label class="${g.checkbox}">
     <input type="checkbox" id="${g.checkbox}" />
     <span class="${g.label}"></span>
   </label>
   <textarea class="${g.textarea}" id="${g.textarea}"></textarea>
   <div class="${g["validation-message"]}" id="${g["validation-message"]}"></div>
   <div class="${g.actions}">
     <div class="${g.loader}"></div>
     <button type="button" class="${g.confirm}"></button>
     <button type="button" class="${g.deny}"></button>
     <button type="button" class="${g.cancel}"></button>
   </div>
   <div class="${g.footer}"></div>
   <div class="${g["timer-progress-bar-container"]}">
     <div class="${g["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),nc=()=>{let c=I();return c?(c.remove(),Qe([document.documentElement,document.body],[g["no-backdrop"],g["toast-shown"],g["has-column"]]),!0):!1},ut=()=>{a.currentInstance.resetValidationMessage()},Bs=()=>{let c=S(),u=wt(c,g.input),p=wt(c,g.file),_=c.querySelector(`.${g.range} input`),k=c.querySelector(`.${g.range} output`),F=wt(c,g.select),H=c.querySelector(`.${g.checkbox} input`),oe=wt(c,g.textarea);u.oninput=ut,p.onchange=ut,F.onchange=ut,H.onchange=ut,oe.oninput=ut,_.oninput=()=>{ut(),k.value=_.value},_.onchange=()=>{ut(),k.value=_.value}},qs=c=>typeof c=="string"?document.querySelector(c):c,xn=c=>{let u=S();u.setAttribute("role",c.toast?"alert":"dialog"),u.setAttribute("aria-live",c.toast?"polite":"assertive"),c.toast||u.setAttribute("aria-modal","true")},vi=c=>{window.getComputedStyle(c).direction==="rtl"&&Y(I(),g.rtl)},Ii=c=>{let u=nc();if(_i()){G("SweetAlert2 requires document to initialize");return}let p=document.createElement("div");p.className=g.container,u&&Y(p,g["no-transition"]),Le(p,tc);let _=qs(c.target);_.appendChild(p),xn(c),vi(_),Bs()},lt=(c,u)=>{c instanceof HTMLElement?u.appendChild(c):typeof c=="object"?$s(c,u):c&&Le(u,c)},$s=(c,u)=>{c.jquery?Ir(u,c):Le(u,c.toString())},Ir=(c,u)=>{if(c.textContent="",0 in u)for(let p=0;p in u;p++)c.appendChild(u[p].cloneNode(!0));else c.appendChild(u.cloneNode(!0))},js=(c,u)=>{let p=at(),_=rn();!p||!_||(!u.showConfirmButton&&!u.showDenyButton&&!u.showCancelButton?Ie(p):ge(p),Be(p,u,"actions"),On(p,_,u),Le(_,u.loaderHtml||""),Be(_,u,"loader"))};function On(c,u,p){let _=Ke(),k=Ue(),F=nn();!_||!k||!F||(Pe(_,"confirm",p),Pe(k,"deny",p),Pe(F,"cancel",p),zs(_,k,F,p),p.reverseButtons&&(p.toast?(c.insertBefore(F,_),c.insertBefore(k,_)):(c.insertBefore(F,u),c.insertBefore(k,u),c.insertBefore(_,u))))}function zs(c,u,p,_){if(!_.buttonsStyling){Qe([c,u,p],g.styled);return}Y([c,u,p],g.styled),_.confirmButtonColor&&(c.style.backgroundColor=_.confirmButtonColor,Y(c,g["default-outline"])),_.denyButtonColor&&(u.style.backgroundColor=_.denyButtonColor,Y(u,g["default-outline"])),_.cancelButtonColor&&(p.style.backgroundColor=_.cancelButtonColor,Y(p,g["default-outline"]))}function Pe(c,u,p){let _=B(u);_t(c,p[`show${_}Button`],"inline-block"),Le(c,p[`${u}ButtonText`]||""),c.setAttribute("aria-label",p[`${u}ButtonAriaLabel`]||""),c.className=g[u],Be(c,p,`${u}Button`)}let Gs=(c,u)=>{let p=mi();p&&(Le(p,u.closeButtonHtml||""),Be(p,u,"closeButton"),_t(p,u.showCloseButton),p.setAttribute("aria-label",u.closeButtonAriaLabel||""))},Vn=(c,u)=>{let p=I();p&&(Ln(p,u.backdrop),rc(p,u.position),ic(p,u.grow),Be(p,u,"container"))};function Ln(c,u){typeof u=="string"?c.style.background=u:u||Y([document.documentElement,document.body],g["no-backdrop"])}function rc(c,u){u&&(u in g?Y(c,g[u]):(O('The "position" parameter is not valid, defaulting to "center"'),Y(c,g.center)))}function ic(c,u){u&&Y(c,g[`grow-${u}`])}var re={innerParams:new WeakMap,domCache:new WeakMap};let sc=["input","file","range","select","radio","checkbox","textarea"],oc=(c,u)=>{let p=S();if(!p)return;let _=re.innerParams.get(c),k=!_||u.input!==_.input;sc.forEach(F=>{let H=wt(p,g[F]);H&&(Ei(F,u.inputAttributes),H.className=g[F],k&&Ie(H))}),u.input&&(k&&Er(u),Tr(u))},Er=c=>{if(!c.input)return;if(!le[c.input]){G(`Unexpected type of input! Expected ${Object.keys(le).join(" | ")}, got "${c.input}"`);return}let u=Ti(c.input);if(!u)return;let p=le[c.input](u,c);ge(u),c.inputAutoFocus&&setTimeout(()=>{yi(p)})},Ws=c=>{for(let u=0;u<c.attributes.length;u++){let p=c.attributes[u].name;["id","type","value","style"].includes(p)||c.removeAttribute(p)}},Ei=(c,u)=>{let p=S();if(!p)return;let _=_r(p,c);if(_){Ws(_);for(let k in u)_.setAttribute(k,u[k])}},Tr=c=>{if(!c.input)return;let u=Ti(c.input);u&&Be(u,c,"input")},et=(c,u)=>{!c.placeholder&&u.inputPlaceholder&&(c.placeholder=u.inputPlaceholder)},un=(c,u,p)=>{if(p.inputLabel){let _=document.createElement("label"),k=g["input-label"];_.setAttribute("for",c.id),_.className=k,typeof p.customClass=="object"&&Y(_,p.customClass.inputLabel),_.innerText=p.inputLabel,u.insertAdjacentElement("beforebegin",_)}},Ti=c=>{let u=S();if(u)return wt(u,g[c]||g.input)},ln=(c,u)=>{["string","number"].includes(typeof u)?c.value=`${u}`:v(u)||O(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof u}"`)},le={};le.text=le.email=le.password=le.number=le.tel=le.url=le.search=le.date=le["datetime-local"]=le.time=le.week=le.month=(c,u)=>(ln(c,u.inputValue),un(c,c,u),et(c,u),c.type=u.input,c),le.file=(c,u)=>(un(c,c,u),et(c,u),c),le.range=(c,u)=>{let p=c.querySelector("input"),_=c.querySelector("output");return ln(p,u.inputValue),p.type=u.input,ln(_,u.inputValue),un(p,c,u),c},le.select=(c,u)=>{if(c.textContent="",u.inputPlaceholder){let p=document.createElement("option");Le(p,u.inputPlaceholder),p.value="",p.disabled=!0,p.selected=!0,c.appendChild(p)}return un(c,c,u),c},le.radio=c=>(c.textContent="",c),le.checkbox=(c,u)=>{let p=_r(S(),"checkbox");p.value="1",p.checked=!!u.inputValue;let _=c.querySelector("span");return Le(_,u.inputPlaceholder||u.inputLabel),p},le.textarea=(c,u)=>{ln(c,u.inputValue),et(c,u),un(c,c,u);let p=_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let _=parseInt(window.getComputedStyle(S()).width),k=()=>{if(!document.body.contains(c))return;let F=c.offsetWidth+p(c);F>_?S().style.width=`${F}px`:ct(S(),"width",u.width)};new MutationObserver(k).observe(c,{attributes:!0,attributeFilter:["style"]})}}),c};let Ks=(c,u)=>{let p=pi();p&&(Ee(p),Be(p,u,"htmlContainer"),u.html?(lt(u.html,p),ge(p,"block")):u.text?(p.textContent=u.text,ge(p,"block")):Ie(p),oc(c,u))},Hs=(c,u)=>{let p=Vs();p&&(Ee(p),_t(p,u.footer,"block"),u.footer&&lt(u.footer,p),Be(p,u,"footer"))},ac=(c,u)=>{let p=re.innerParams.get(c),_=E();if(_){if(p&&u.icon===p.icon){vt(_,u),Mn(_,u);return}if(!u.icon&&!u.iconHtml){Ie(_);return}if(u.icon&&Object.keys(N).indexOf(u.icon)===-1){G(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${u.icon}"`),Ie(_);return}ge(_),vt(_,u),Mn(_,u),Y(_,u.showClass&&u.showClass.icon)}},Mn=(c,u)=>{for(let[p,_]of Object.entries(N))u.icon!==p&&Qe(c,_);Y(c,u.icon&&N[u.icon]),Ai(c,u),Qs(),Be(c,u,"icon")},Qs=()=>{let c=S();if(!c)return;let u=window.getComputedStyle(c).getPropertyValue("background-color"),p=c.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<p.length;_++)p[_].style.backgroundColor=u},bi=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Fn=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,vt=(c,u)=>{if(!u.icon&&!u.iconHtml)return;let p=c.innerHTML,_="";u.iconHtml?_=Js(u.iconHtml):u.icon==="success"?(_=bi,p=p.replace(/ style=".*?"/g,"")):u.icon==="error"?_=Fn:u.icon&&(_=Js({question:"?",warning:"!",info:"i"}[u.icon])),p.trim()!==_.trim()&&Le(c,_)},Ai=(c,u)=>{if(u.iconColor){c.style.color=u.iconColor,c.style.borderColor=u.iconColor;for(let p of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ne(c,p,"background-color",u.iconColor);Ne(c,".swal2-success-ring","border-color",u.iconColor)}},Js=c=>`<div class="${g["icon-content"]}">${c}</div>`,Ys=(c,u)=>{let p=en();if(p){if(!u.imageUrl){Ie(p);return}ge(p,""),p.setAttribute("src",u.imageUrl),p.setAttribute("alt",u.imageAlt||""),ct(p,"width",u.imageWidth),ct(p,"height",u.imageHeight),p.className=g.image,Be(p,u,"image")}},Xs=(c,u)=>{let p=I(),_=S();if(!(!p||!_)){if(u.toast){ct(p,"width",u.width),_.style.width="100%";let k=rn();k&&_.insertBefore(k,E())}else ct(_,"width",u.width);ct(_,"padding",u.padding),u.color&&(_.style.color=u.color),u.background&&(_.style.background=u.background),Ie(tn()),Zs(_,u)}},Zs=(c,u)=>{let p=u.showClass||{};c.className=`${g.popup} ${Me(c)?p.popup:""}`,u.toast?(Y([document.documentElement,document.body],g["toast-shown"]),Y(c,g.toast)):Y(c,g.modal),Be(c,u,"popup"),typeof u.customClass=="string"&&Y(c,u.customClass),u.icon&&Y(c,g[`icon-${u.icon}`])},Si=(c,u)=>{let p=Ft();if(!p)return;let{progressSteps:_,currentProgressStep:k}=u;if(!_||_.length===0||k===void 0){Ie(p);return}ge(p),p.textContent="",k>=_.length&&O("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),_.forEach((F,H)=>{let oe=Pi(F);if(p.appendChild(oe),H===k&&Y(oe,g["active-progress-step"]),H!==_.length-1){let pe=eo(u);p.appendChild(pe)}})},Pi=c=>{let u=document.createElement("li");return Y(u,g["progress-step"]),Le(u,c),u},eo=c=>{let u=document.createElement("li");return Y(u,g["progress-step-line"]),c.progressStepsDistance&&ct(u,"width",c.progressStepsDistance),u},to=(c,u)=>{let p=Zt();p&&(Ee(p),_t(p,u.title||u.titleText,"block"),u.title&&lt(u.title,p),u.titleText&&(p.innerText=u.titleText),Be(p,u,"title"))},no=(c,u)=>{Xs(c,u),Vn(c,u),Si(c,u),ac(c,u),Ys(c,u),to(c,u),Gs(c,u),Ks(c,u),js(c,u),Hs(c,u);let p=S();typeof u.didRender=="function"&&p&&u.didRender(p),a.eventEmitter.emit("didRender",p)},cc=()=>Me(S()),Ci=()=>{var c;return(c=Ke())===null||c===void 0?void 0:c.click()},ro=()=>{var c;return(c=Ue())===null||c===void 0?void 0:c.click()},uc=()=>{var c;return(c=nn())===null||c===void 0?void 0:c.click()},Ge=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),tt=c=>{c.keydownTarget&&c.keydownHandlerAdded&&(c.keydownTarget.removeEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!1)},br=(c,u,p)=>{tt(c),u.toast||(c.keydownHandler=_=>Ar(u,_,p),c.keydownTarget=u.keydownListenerCapture?window:S(),c.keydownListenerCapture=u.keydownListenerCapture,c.keydownTarget.addEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!0)},hn=(c,u)=>{var p;let _=sn();if(_.length){c=c+u,c===_.length?c=0:c===-1&&(c=_.length-1),_[c].focus();return}(p=S())===null||p===void 0||p.focus()},Ri=["ArrowRight","ArrowDown"],ue=["ArrowLeft","ArrowUp"],Ar=(c,u,p)=>{c&&(u.isComposing||u.keyCode===229||(c.stopKeydownPropagation&&u.stopPropagation(),u.key==="Enter"?Un(u,c):u.key==="Tab"?Bn(u):[...Ri,...ue].includes(u.key)?lc(u.key):u.key==="Escape"&&io(u,c,p)))},Un=(c,u)=>{if(!ve(u.allowEnterKey))return;let p=_r(S(),u.input);if(c.target&&p&&c.target instanceof HTMLElement&&c.target.outerHTML===p.outerHTML){if(["textarea","file"].includes(u.input))return;Ci(),c.preventDefault()}},Bn=c=>{let u=c.target,p=sn(),_=-1;for(let k=0;k<p.length;k++)if(u===p[k]){_=k;break}c.shiftKey?hn(_,-1):hn(_,1),c.stopPropagation(),c.preventDefault()},lc=c=>{let u=at(),p=Ke(),_=Ue(),k=nn();if(!u||!p||!_||!k)return;let F=[p,_,k];if(document.activeElement instanceof HTMLElement&&!F.includes(document.activeElement))return;let H=Ri.includes(c)?"nextElementSibling":"previousElementSibling",oe=document.activeElement;if(oe){for(let pe=0;pe<u.children.length;pe++){if(oe=oe[H],!oe)return;if(oe instanceof HTMLButtonElement&&Me(oe))break}oe instanceof HTMLButtonElement&&oe.focus()}},io=(c,u,p)=>{ve(u.allowEscapeKey)&&(c.preventDefault(),p(Ge.esc))};var dn={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let hc=()=>{let c=I();Array.from(document.body.children).forEach(p=>{p.contains(c)||(p.hasAttribute("aria-hidden")&&p.setAttribute("data-previous-aria-hidden",p.getAttribute("aria-hidden")||""),p.setAttribute("aria-hidden","true"))})},so=()=>{Array.from(document.body.children).forEach(u=>{u.hasAttribute("data-previous-aria-hidden")?(u.setAttribute("aria-hidden",u.getAttribute("data-previous-aria-hidden")||""),u.removeAttribute("data-previous-aria-hidden")):u.removeAttribute("aria-hidden")})},oo=typeof window<"u"&&!!window.GestureEvent,qn=()=>{if(oo&&!He(document.body,g.iosfix)){let c=document.body.scrollTop;document.body.style.top=`${c*-1}px`,Y(document.body,g.iosfix),It()}},It=()=>{let c=I();if(!c)return;let u;c.ontouchstart=p=>{u=ao(p)},c.ontouchmove=p=>{u&&(p.preventDefault(),p.stopPropagation())}},ao=c=>{let u=c.target,p=I(),_=pi();return!p||!_||co(c)||uo(c)?!1:u===p||!Fs(p)&&u instanceof HTMLElement&&u.tagName!=="INPUT"&&u.tagName!=="TEXTAREA"&&!(Fs(_)&&_.contains(u))},co=c=>c.touches&&c.touches.length&&c.touches[0].touchType==="stylus",uo=c=>c.touches&&c.touches.length>1,fn=()=>{if(He(document.body,g.iosfix)){let c=parseInt(document.body.style.top,10);Qe(document.body,g.iosfix),document.body.style.top="",document.body.scrollTop=c*-1}},dc=()=>{let c=document.createElement("div");c.className=g["scrollbar-measure"],document.body.appendChild(c);let u=c.getBoundingClientRect().width-c.clientWidth;return document.body.removeChild(c),u},pn=null,fc=c=>{pn===null&&(document.body.scrollHeight>window.innerHeight||c==="scroll")&&(pn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${pn+dc()}px`)},Et=()=>{pn!==null&&(document.body.style.paddingRight=`${pn}px`,pn=null)};function lo(c,u,p,_){an()?he(c,_):(f(p).then(()=>he(c,_)),tt(a)),oo?(u.setAttribute("style","display:none !important"),u.removeAttribute("class"),u.innerHTML=""):u.remove(),on()&&(Et(),fn(),so()),pc()}function pc(){Qe([document.documentElement,document.body],[g.shown,g["height-auto"],g["no-backdrop"],g["toast-shown"]])}function We(c){c=$n(c);let u=dn.swalPromiseResolve.get(this),p=Sr(this);this.isAwaitingPromise?c.isDismissed||(ht(this),u(c)):p&&u(c)}let Sr=c=>{let u=S();if(!u)return!1;let p=re.innerParams.get(c);if(!p||He(u,p.hideClass.popup))return!1;Qe(u,p.showClass.popup),Y(u,p.hideClass.popup);let _=I();return Qe(_,p.showClass.backdrop),Y(_,p.hideClass.backdrop),ho(c,u,p),!0};function ki(c){let u=dn.swalPromiseReject.get(this);ht(this),u&&u(c)}let ht=c=>{c.isAwaitingPromise&&(delete c.isAwaitingPromise,re.innerParams.get(c)||c._destroy())},$n=c=>typeof c>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},c),ho=(c,u,p)=>{let _=I(),k=cn(u);typeof p.willClose=="function"&&p.willClose(u),a.eventEmitter.emit("willClose",u),k?Di(c,u,_,p.returnFocus,p.didClose):lo(c,_,p.returnFocus,p.didClose)},Di=(c,u,p,_,k)=>{a.swalCloseEventFinishedCallback=lo.bind(null,c,p,_,k);let F=function(H){H.target===u&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback,u.removeEventListener("animationend",F),u.removeEventListener("transitionend",F))};u.addEventListener("animationend",F),u.addEventListener("transitionend",F)},he=(c,u)=>{setTimeout(()=>{typeof u=="function"&&u.bind(c.params)(),a.eventEmitter.emit("didClose"),c._destroy&&c._destroy()})},mn=c=>{let u=S();if(u||new Po,u=S(),!u)return;let p=rn();an()?Ie(E()):mc(u,c),ge(p),u.setAttribute("data-loading","true"),u.setAttribute("aria-busy","true"),u.focus()},mc=(c,u)=>{let p=at(),_=rn();!p||!_||(!u&&Me(Ke())&&(u=Ke()),ge(p),u&&(Ie(u),_.setAttribute("data-button-to-replace",u.className),p.insertBefore(_,u)),Y([c,p],g.loading))},fo=(c,u)=>{u.input==="select"||u.input==="radio"?dt(c,u):["text","email","number","tel","textarea"].some(p=>p===u.input)&&(ne(u.inputValue)||v(u.inputValue))&&(mn(Ke()),yo(c,u))},po=(c,u)=>{let p=c.getInput();if(!p)return null;switch(u.input){case"checkbox":return mo(p);case"radio":return Pr(p);case"file":return go(p);default:return u.inputAutoTrim?p.value.trim():p.value}},mo=c=>c.checked?1:0,Pr=c=>c.checked?c.value:null,go=c=>c.files&&c.files.length?c.getAttribute("multiple")!==null?c.files:c.files[0]:null,dt=(c,u)=>{let p=S();if(!p)return;let _=k=>{u.input==="select"?gc(p,zn(k),u):u.input==="radio"&&jn(p,zn(k),u)};ne(u.inputOptions)||v(u.inputOptions)?(mn(Ke()),P(u.inputOptions).then(k=>{c.hideLoading(),_(k)})):typeof u.inputOptions=="object"?_(u.inputOptions):G(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof u.inputOptions}`)},yo=(c,u)=>{let p=c.getInput();p&&(Ie(p),P(u.inputValue).then(_=>{p.value=u.input==="number"?`${parseFloat(_)||0}`:`${_}`,ge(p),p.focus(),c.hideLoading()}).catch(_=>{G(`Error in inputValue promise: ${_}`),p.value="",ge(p),p.focus(),c.hideLoading()}))};function gc(c,u,p){let _=wt(c,g.select);if(!_)return;let k=(F,H,oe)=>{let pe=document.createElement("option");pe.value=oe,Le(pe,H),pe.selected=Cr(oe,p.inputValue),F.appendChild(pe)};u.forEach(F=>{let H=F[0],oe=F[1];if(Array.isArray(oe)){let pe=document.createElement("optgroup");pe.label=H,pe.disabled=!1,_.appendChild(pe),oe.forEach(Nr=>k(pe,Nr[1],Nr[0]))}else k(_,oe,H)}),_.focus()}function jn(c,u,p){let _=wt(c,g.radio);if(!_)return;u.forEach(F=>{let H=F[0],oe=F[1],pe=document.createElement("input"),Nr=document.createElement("label");pe.type="radio",pe.name=g.radio,pe.value=H,Cr(H,p.inputValue)&&(pe.checked=!0);let wc=document.createElement("span");Le(wc,oe),wc.className=g.label,Nr.appendChild(pe),Nr.appendChild(wc),_.appendChild(Nr)});let k=_.querySelectorAll("input");k.length&&k[0].focus()}let zn=c=>{let u=[];return c instanceof Map?c.forEach((p,_)=>{let k=p;typeof k=="object"&&(k=zn(k)),u.push([_,k])}):Object.keys(c).forEach(p=>{let _=c[p];typeof _=="object"&&(_=zn(_)),u.push([p,_])}),u},Cr=(c,u)=>!!u&&u.toString()===c.toString(),Rr=c=>{let u=re.innerParams.get(c);c.disableButtons(),u.input?_o(c,"confirm"):Gn(c,!0)},wo=c=>{let u=re.innerParams.get(c);c.disableButtons(),u.returnInputValueOnDeny?_o(c,"deny"):Ut(c,!1)},kr=(c,u)=>{c.disableButtons(),u(Ge.cancel)},_o=(c,u)=>{let p=re.innerParams.get(c);if(!p.input){G(`The "input" parameter is needed to be set when using returnInputValueOn${B(u)}`);return}let _=c.getInput(),k=po(c,p);p.inputValidator?vo(c,k,u):_&&!_.checkValidity()?(c.enableButtons(),c.showValidationMessage(p.validationMessage||_.validationMessage)):u==="deny"?Ut(c,k):Gn(c,k)},vo=(c,u,p)=>{let _=re.innerParams.get(c);c.disableInput(),Promise.resolve().then(()=>P(_.inputValidator(u,_.validationMessage))).then(F=>{c.enableButtons(),c.enableInput(),F?c.showValidationMessage(F):p==="deny"?Ut(c,u):Gn(c,u)})},Ut=(c,u)=>{let p=re.innerParams.get(c||void 0);p.showLoaderOnDeny&&mn(Ue()),p.preDeny?(c.isAwaitingPromise=!0,Promise.resolve().then(()=>P(p.preDeny(u,p.validationMessage))).then(k=>{k===!1?(c.hideLoading(),ht(c)):c.close({isDenied:!0,value:typeof k>"u"?u:k})}).catch(k=>xi(c||void 0,k))):c.close({isDenied:!0,value:u})},Ni=(c,u)=>{c.close({isConfirmed:!0,value:u})},xi=(c,u)=>{c.rejectPromise(u)},Gn=(c,u)=>{let p=re.innerParams.get(c||void 0);p.showLoaderOnConfirm&&mn(),p.preConfirm?(c.resetValidationMessage(),c.isAwaitingPromise=!0,Promise.resolve().then(()=>P(p.preConfirm(u,p.validationMessage))).then(k=>{Me(tn())||k===!1?(c.hideLoading(),ht(c)):Ni(c,typeof k>"u"?u:k)}).catch(k=>xi(c||void 0,k))):Ni(c,u)};function gn(){let c=re.innerParams.get(this);if(!c)return;let u=re.domCache.get(this);Ie(u.loader),an()?c.icon&&ge(E()):Io(u),Qe([u.popup,u.actions],g.loading),u.popup.removeAttribute("aria-busy"),u.popup.removeAttribute("data-loading"),u.confirmButton.disabled=!1,u.denyButton.disabled=!1,u.cancelButton.disabled=!1}let Io=c=>{let u=c.popup.getElementsByClassName(c.loader.getAttribute("data-button-to-replace"));u.length?ge(u[0],"inline-block"):Ms()&&Ie(c.actions)};function Wn(){let c=re.innerParams.get(this),u=re.domCache.get(this);return u?_r(u.popup,c.input):null}function Oi(c,u,p){let _=re.domCache.get(c);u.forEach(k=>{_[k].disabled=p})}function Vi(c,u){let p=S();if(!(!p||!c))if(c.type==="radio"){let _=p.querySelectorAll(`[name="${g.radio}"]`);for(let k=0;k<_.length;k++)_[k].disabled=u}else c.disabled=u}function Tt(){Oi(this,["confirmButton","denyButton","cancelButton"],!1)}function Li(){Oi(this,["confirmButton","denyButton","cancelButton"],!0)}function Mi(){Vi(this.getInput(),!1)}function Fi(){Vi(this.getInput(),!0)}function Ui(c){let u=re.domCache.get(this),p=re.innerParams.get(this);Le(u.validationMessage,c),u.validationMessage.className=g["validation-message"],p.customClass&&p.customClass.validationMessage&&Y(u.validationMessage,p.customClass.validationMessage),ge(u.validationMessage);let _=this.getInput();_&&(_.setAttribute("aria-invalid","true"),_.setAttribute("aria-describedby",g["validation-message"]),yi(_),Y(_,g.inputerror))}function Kn(){let c=re.domCache.get(this);c.validationMessage&&Ie(c.validationMessage);let u=this.getInput();u&&(u.removeAttribute("aria-invalid"),u.removeAttribute("aria-describedby"),Qe(u,g.inputerror))}let Te={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Eo=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],To={allowEnterKey:void 0},yn=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],s=c=>Object.prototype.hasOwnProperty.call(Te,c),l=c=>Eo.indexOf(c)!==-1,d=c=>To[c],y=c=>{s(c)||O(`Unknown parameter "${c}"`)},C=c=>{yn.includes(c)&&O(`The parameter "${c}" is incompatible with toasts`)},D=c=>{let u=d(c);u&&ce(c,u)},L=c=>{c.backdrop===!1&&c.allowOutsideClick&&O('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let u in c)y(u),c.toast&&C(u),D(u)};function se(c){let u=S(),p=re.innerParams.get(this);if(!u||He(u,p.hideClass.popup)){O("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let _=Ce(c),k=Object.assign({},p,_);no(this,k),re.innerParams.set(this,k),Object.defineProperties(this,{params:{value:Object.assign({},this.params,c),writable:!1,enumerable:!0}})}let Ce=c=>{let u={};return Object.keys(c).forEach(p=>{l(p)?u[p]=c[p]:O(`Invalid parameter to update: ${p}`)}),u};function ee(){let c=re.domCache.get(this),u=re.innerParams.get(this);if(!u){Re(this);return}c.popup&&a.swalCloseEventFinishedCallback&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback),typeof u.didDestroy=="function"&&u.didDestroy(),a.eventEmitter.emit("didDestroy"),xe(this)}let xe=c=>{Re(c),delete c.params,delete a.keydownHandler,delete a.keydownTarget,delete a.currentInstance},Re=c=>{c.isAwaitingPromise?(bt(re,c),c.isAwaitingPromise=!0):(bt(dn,c),bt(re,c),delete c.isAwaitingPromise,delete c.disableButtons,delete c.enableButtons,delete c.getInput,delete c.disableInput,delete c.enableInput,delete c.hideLoading,delete c.disableLoading,delete c.showValidationMessage,delete c.resetValidationMessage,delete c.close,delete c.closePopup,delete c.closeModal,delete c.closeToast,delete c.rejectPromise,delete c.update,delete c._destroy)},bt=(c,u)=>{for(let p in c)c[p].delete(u)};var Je=Object.freeze({__proto__:null,_destroy:ee,close:We,closeModal:We,closePopup:We,closeToast:We,disableButtons:Li,disableInput:Fi,disableLoading:gn,enableButtons:Tt,enableInput:Mi,getInput:Wn,handleAwaitingPromise:ht,hideLoading:gn,rejectPromise:ki,resetValidationMessage:Kn,showValidationMessage:Ui,update:se});let Dr=(c,u,p)=>{c.toast?Bi(c,u,p):(qm(u),$m(u),jm(c,u,p))},Bi=(c,u,p)=>{u.popup.onclick=()=>{c&&(Bm(c)||c.timer||c.input)||p(Ge.close)}},Bm=c=>!!(c.showConfirmButton||c.showDenyButton||c.showCancelButton||c.showCloseButton),bo=!1,qm=c=>{c.popup.onmousedown=()=>{c.container.onmouseup=function(u){c.container.onmouseup=()=>{},u.target===c.container&&(bo=!0)}}},$m=c=>{c.container.onmousedown=u=>{u.target===c.container&&u.preventDefault(),c.popup.onmouseup=function(p){c.popup.onmouseup=()=>{},(p.target===c.popup||p.target instanceof HTMLElement&&c.popup.contains(p.target))&&(bo=!0)}}},jm=(c,u,p)=>{u.container.onclick=_=>{if(bo){bo=!1;return}_.target===u.container&&ve(c.allowOutsideClick)&&p(Ge.backdrop)}},zm=c=>typeof c=="object"&&c.jquery,Jh=c=>c instanceof Element||zm(c),Gm=c=>{let u={};return typeof c[0]=="object"&&!Jh(c[0])?Object.assign(u,c[0]):["title","html","icon"].forEach((p,_)=>{let k=c[_];typeof k=="string"||Jh(k)?u[p]=k:k!==void 0&&G(`Unexpected type of ${p}! Expected "string" or "Element", got ${typeof k}`)}),u};function Wm(){for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return new this(...u)}function Km(c){class u extends this{_main(_,k){return super._main(_,Object.assign({},c,k))}}return u}let Hm=()=>a.timeout&&a.timeout.getTimerLeft(),Yh=()=>{if(a.timeout)return Us(),a.timeout.stop()},Xh=()=>{if(a.timeout){let c=a.timeout.start();return vr(c),c}},Qm=()=>{let c=a.timeout;return c&&(c.running?Yh():Xh())},Jm=c=>{if(a.timeout){let u=a.timeout.increase(c);return vr(u,!0),u}},Ym=()=>!!(a.timeout&&a.timeout.isRunning()),Zh=!1,yc={};function Xm(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";yc[c]=this,Zh||(document.body.addEventListener("click",Zm),Zh=!0)}let Zm=c=>{for(let u=c.target;u&&u!==document;u=u.parentNode)for(let p in yc){let _=u.getAttribute(p);if(_){yc[p].fire({template:_});return}}};class eg{constructor(){this.events={}}_getHandlersByEventName(u){return typeof this.events[u]>"u"&&(this.events[u]=[]),this.events[u]}on(u,p){let _=this._getHandlersByEventName(u);_.includes(p)||_.push(p)}once(u,p){var _=this;let k=function(){_.removeListener(u,k);for(var F=arguments.length,H=new Array(F),oe=0;oe<F;oe++)H[oe]=arguments[oe];p.apply(_,H)};this.on(u,k)}emit(u){for(var p=arguments.length,_=new Array(p>1?p-1:0),k=1;k<p;k++)_[k-1]=arguments[k];this._getHandlersByEventName(u).forEach(F=>{try{F.apply(this,_)}catch(H){console.error(H)}})}removeListener(u,p){let _=this._getHandlersByEventName(u),k=_.indexOf(p);k>-1&&_.splice(k,1)}removeAllListeners(u){this.events[u]!==void 0&&(this.events[u].length=0)}reset(){this.events={}}}a.eventEmitter=new eg;var tg=Object.freeze({__proto__:null,argsToParams:Gm,bindClickHandler:Xm,clickCancel:uc,clickConfirm:Ci,clickDeny:ro,enableLoading:mn,fire:Wm,getActions:at,getCancelButton:nn,getCloseButton:mi,getConfirmButton:Ke,getContainer:I,getDenyButton:Ue,getFocusableElements:sn,getFooter:Vs,getHtmlContainer:pi,getIcon:E,getIconContent:ot,getImage:en,getInputLabel:De,getLoader:rn,getPopup:S,getProgressSteps:Ft,getTimerLeft:Hm,getTimerProgressBar:yt,getTitle:Zt,getValidationMessage:tn,increaseTimer:Jm,isDeprecatedParameter:d,isLoading:gi,isTimerRunning:Ym,isUpdatableParameter:l,isValidParameter:s,isVisible:cc,mixin:Km,off:(c,u)=>{if(!c){a.eventEmitter.reset();return}u?a.eventEmitter.removeListener(c,u):a.eventEmitter.removeAllListeners(c)},on:(c,u)=>{a.eventEmitter.on(c,u)},once:(c,u)=>{a.eventEmitter.once(c,u)},resumeTimer:Xh,showLoading:mn,stopTimer:Yh,toggleTimer:Qm});class ng{constructor(u,p){this.callback=u,this.remaining=p,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(u){let p=this.running;return p&&this.stop(),this.remaining+=u,p&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let ed=["swal-title","swal-html","swal-footer"],rg=c=>{let u=typeof c.template=="string"?document.querySelector(c.template):c.template;if(!u)return{};let p=u.content;return hg(p),Object.assign(ig(p),sg(p),og(p),ag(p),cg(p),ug(p),lg(p,ed))},ig=c=>{let u={};return Array.from(c.querySelectorAll("swal-param")).forEach(_=>{Hn(_,["name","value"]);let k=_.getAttribute("name"),F=_.getAttribute("value");!k||!F||(typeof Te[k]=="boolean"?u[k]=F!=="false":typeof Te[k]=="object"?u[k]=JSON.parse(F):u[k]=F)}),u},sg=c=>{let u={};return Array.from(c.querySelectorAll("swal-function-param")).forEach(_=>{let k=_.getAttribute("name"),F=_.getAttribute("value");!k||!F||(u[k]=new Function(`return ${F}`)())}),u},og=c=>{let u={};return Array.from(c.querySelectorAll("swal-button")).forEach(_=>{Hn(_,["type","color","aria-label"]);let k=_.getAttribute("type");!k||!["confirm","cancel","deny"].includes(k)||(u[`${k}ButtonText`]=_.innerHTML,u[`show${B(k)}Button`]=!0,_.hasAttribute("color")&&(u[`${k}ButtonColor`]=_.getAttribute("color")),_.hasAttribute("aria-label")&&(u[`${k}ButtonAriaLabel`]=_.getAttribute("aria-label")))}),u},ag=c=>{let u={},p=c.querySelector("swal-image");return p&&(Hn(p,["src","width","height","alt"]),p.hasAttribute("src")&&(u.imageUrl=p.getAttribute("src")||void 0),p.hasAttribute("width")&&(u.imageWidth=p.getAttribute("width")||void 0),p.hasAttribute("height")&&(u.imageHeight=p.getAttribute("height")||void 0),p.hasAttribute("alt")&&(u.imageAlt=p.getAttribute("alt")||void 0)),u},cg=c=>{let u={},p=c.querySelector("swal-icon");return p&&(Hn(p,["type","color"]),p.hasAttribute("type")&&(u.icon=p.getAttribute("type")),p.hasAttribute("color")&&(u.iconColor=p.getAttribute("color")),u.iconHtml=p.innerHTML),u},ug=c=>{let u={},p=c.querySelector("swal-input");p&&(Hn(p,["type","label","placeholder","value"]),u.input=p.getAttribute("type")||"text",p.hasAttribute("label")&&(u.inputLabel=p.getAttribute("label")),p.hasAttribute("placeholder")&&(u.inputPlaceholder=p.getAttribute("placeholder")),p.hasAttribute("value")&&(u.inputValue=p.getAttribute("value")));let _=Array.from(c.querySelectorAll("swal-input-option"));return _.length&&(u.inputOptions={},_.forEach(k=>{Hn(k,["value"]);let F=k.getAttribute("value");if(!F)return;let H=k.innerHTML;u.inputOptions[F]=H})),u},lg=(c,u)=>{let p={};for(let _ in u){let k=u[_],F=c.querySelector(k);F&&(Hn(F,[]),p[k.replace(/^swal-/,"")]=F.innerHTML.trim())}return p},hg=c=>{let u=ed.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(c.children).forEach(p=>{let _=p.tagName.toLowerCase();u.includes(_)||O(`Unrecognized element <${_}>`)})},Hn=(c,u)=>{Array.from(c.attributes).forEach(p=>{u.indexOf(p.name)===-1&&O([`Unrecognized attribute "${p.name}" on <${c.tagName.toLowerCase()}>.`,`${u.length?`Allowed attributes are: ${u.join(", ")}`:"To set the value, use HTML within the element."}`])})},td=10,dg=c=>{let u=I(),p=S();typeof c.willOpen=="function"&&c.willOpen(p),a.eventEmitter.emit("willOpen",p);let k=window.getComputedStyle(document.body).overflowY;mg(u,p,c),setTimeout(()=>{fg(u,p)},td),on()&&(pg(u,c.scrollbarPadding,k),hc()),!an()&&!a.previousActiveElement&&(a.previousActiveElement=document.activeElement),typeof c.didOpen=="function"&&setTimeout(()=>c.didOpen(p)),a.eventEmitter.emit("didOpen",p),Qe(u,g["no-transition"])},Ao=c=>{let u=S();if(c.target!==u)return;let p=I();u.removeEventListener("animationend",Ao),u.removeEventListener("transitionend",Ao),p.style.overflowY="auto"},fg=(c,u)=>{cn(u)?(c.style.overflowY="hidden",u.addEventListener("animationend",Ao),u.addEventListener("transitionend",Ao)):c.style.overflowY="auto"},pg=(c,u,p)=>{qn(),u&&p!=="hidden"&&fc(p),setTimeout(()=>{c.scrollTop=0})},mg=(c,u,p)=>{Y(c,p.showClass.backdrop),p.animation?(u.style.setProperty("opacity","0","important"),ge(u,"grid"),setTimeout(()=>{Y(u,p.showClass.popup),u.style.removeProperty("opacity")},td)):ge(u,"grid"),Y([document.documentElement,document.body],g.shown),p.heightAuto&&p.backdrop&&!p.toast&&Y([document.documentElement,document.body],g["height-auto"])};var nd={email:(c,u)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(c)?Promise.resolve():Promise.resolve(u||"Invalid email address"),url:(c,u)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(c)?Promise.resolve():Promise.resolve(u||"Invalid URL")};function gg(c){c.inputValidator||(c.input==="email"&&(c.inputValidator=nd.email),c.input==="url"&&(c.inputValidator=nd.url))}function yg(c){(!c.target||typeof c.target=="string"&&!document.querySelector(c.target)||typeof c.target!="string"&&!c.target.appendChild)&&(O('Target parameter is not valid, defaulting to "body"'),c.target="body")}function wg(c){gg(c),c.showLoaderOnConfirm&&!c.preConfirm&&O(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),yg(c),typeof c.title=="string"&&(c.title=c.title.split(`
`).join("<br />")),Ii(c)}let At;var So=new WeakMap;class _e{constructor(){if(r(this,So,void 0),typeof window>"u")return;At=this;for(var u=arguments.length,p=new Array(u),_=0;_<u;_++)p[_]=arguments[_];let k=Object.freeze(this.constructor.argsToParams(p));this.params=k,this.isAwaitingPromise=!1,i(So,this,this._main(At.params))}_main(u){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L(Object.assign({},p,u)),a.currentInstance){let F=dn.swalPromiseResolve.get(a.currentInstance),{isAwaitingPromise:H}=a.currentInstance;a.currentInstance._destroy(),H||F({isDismissed:!0}),on()&&so()}a.currentInstance=At;let _=vg(u,p);wg(_),Object.freeze(_),a.timeout&&(a.timeout.stop(),delete a.timeout),clearTimeout(a.restoreFocusTimeout);let k=Ig(At);return no(At,_),re.innerParams.set(At,_),_g(At,k,_)}then(u){return t(So,this).then(u)}finally(u){return t(So,this).finally(u)}}let _g=(c,u,p)=>new Promise((_,k)=>{let F=H=>{c.close({isDismissed:!0,dismiss:H})};dn.swalPromiseResolve.set(c,_),dn.swalPromiseReject.set(c,k),u.confirmButton.onclick=()=>{Rr(c)},u.denyButton.onclick=()=>{wo(c)},u.cancelButton.onclick=()=>{kr(c,F)},u.closeButton.onclick=()=>{F(Ge.close)},Dr(p,u,F),br(a,p,F),fo(c,p),dg(p),Eg(a,p,F),Tg(u,p),setTimeout(()=>{u.container.scrollTop=0})}),vg=(c,u)=>{let p=rg(c),_=Object.assign({},Te,u,p,c);return _.showClass=Object.assign({},Te.showClass,_.showClass),_.hideClass=Object.assign({},Te.hideClass,_.hideClass),_.animation===!1&&(_.showClass={backdrop:"swal2-noanimation"},_.hideClass={}),_},Ig=c=>{let u={popup:S(),container:I(),actions:at(),confirmButton:Ke(),denyButton:Ue(),cancelButton:nn(),loader:rn(),closeButton:mi(),validationMessage:tn(),progressSteps:Ft()};return re.domCache.set(c,u),u},Eg=(c,u,p)=>{let _=yt();Ie(_),u.timer&&(c.timeout=new ng(()=>{p("timer"),delete c.timeout},u.timer),u.timerProgressBar&&(ge(_),Be(_,u,"timerProgressBar"),setTimeout(()=>{c.timeout&&c.timeout.running&&vr(u.timer)})))},Tg=(c,u)=>{if(!u.toast){if(!ve(u.allowEnterKey)){ce("allowEnterKey"),Sg();return}bg(c)||Ag(c,u)||hn(-1,1)}},bg=c=>{let u=c.popup.querySelectorAll("[autofocus]");for(let p of u)if(p instanceof HTMLElement&&Me(p))return p.focus(),!0;return!1},Ag=(c,u)=>u.focusDeny&&Me(c.denyButton)?(c.denyButton.focus(),!0):u.focusCancel&&Me(c.cancelButton)?(c.cancelButton.focus(),!0):u.focusConfirm&&Me(c.confirmButton)?(c.confirmButton.focus(),!0):!1,Sg=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let c=new Date,u=localStorage.getItem("swal-initiation");u?(c.getTime()-Date.parse(u))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let p=document.createElement("audio");p.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",p.loop=!0,document.body.appendChild(p),setTimeout(()=>{p.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${c}`)}_e.prototype.disableButtons=Li,_e.prototype.enableButtons=Tt,_e.prototype.getInput=Wn,_e.prototype.disableInput=Fi,_e.prototype.enableInput=Mi,_e.prototype.hideLoading=gn,_e.prototype.disableLoading=gn,_e.prototype.showValidationMessage=Ui,_e.prototype.resetValidationMessage=Kn,_e.prototype.close=We,_e.prototype.closePopup=We,_e.prototype.closeModal=We,_e.prototype.closeToast=We,_e.prototype.rejectPromise=ki,_e.prototype.update=se,_e.prototype._destroy=ee,Object.assign(_e,tg),Object.keys(Je).forEach(c=>{_e[c]=function(){return At&&At[c]?At[c](...arguments):null}}),_e.DismissReason=Ge,_e.version="11.14.4";let Po=_e;return Po.default=Po,Po});typeof Rt<"u"&&Rt.Sweetalert2&&(Rt.swal=Rt.sweetAlert=Rt.Swal=Rt.SweetAlert=Rt.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var hd=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Rg=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],h=n[t++],f=((i&7)<<18|(o&63)<<12|(a&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},dd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,h=a?n[i+1]:0,f=i+2<n.length,m=f?n[i+2]:0,w=o>>2,g=(o&3)<<4|h>>4,R=(h&15)<<2|m>>6,N=m&63;f||(N=64,a||(R=64)),r.push(t[w],t[g],t[R],t[N])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Rg(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;let m=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||h==null||m==null||g==null)throw new bc;let R=o<<2|h>>4;if(r.push(R),m!==64){let N=h<<4&240|m>>2;if(r.push(N),g!==64){let M=m<<6&192|g;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},bc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},kg=function(n){let e=hd(n);return dd.encodeByteArray(e,!0)},ji=function(n){return kg(n).replace(/\./g,"")},Sc=function(n){try{return dd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ng=()=>Dg().__FIREBASE_DEFAULTS__,xg=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Og=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Sc(n[1]);return e&&JSON.parse(e)},Do=()=>{try{return Ng()||xg()||Og()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Pc=n=>{var e,t;return(t=(e=Do())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},fd=n=>{let e=Pc(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Cc=()=>{var n;return(n=Do())===null||n===void 0?void 0:n.config},Rc=n=>{var e;return(e=Do())===null||e===void 0?void 0:e[`_${n}`]};var ko=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function pd(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ji(JSON.stringify(t)),ji(JSON.stringify(a)),""].join(".")}function Oe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function md(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Vg(){var n;let e=(n=Do())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gd(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yd(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _d(){let n=Oe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vd(){return!Vg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kc(){try{return typeof indexedDB=="object"}catch{return!1}}function Id(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Lg="FirebaseError",Ye=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Lg,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bt.prototype.create)}},Bt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?Mg(o,r):"Error",h=`${this.serviceName}: ${a} (${i}).`;return new Ye(i,h,r)}};function Mg(n,e){return n.replace(Fg,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Fg=/\{\$([^}]+)}/g;function Ed(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(ld(o)&&ld(a)){if(!Qn(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ld(n){return n!==null&&typeof n=="object"}function zi(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Fr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Td(n,e){let t=new Ac(n,e);return t.subscribe.bind(t)}var Ac=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ug(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Tc),i.error===void 0&&(i.error=Tc),i.complete===void 0&&(i.complete=Tc);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ug(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Tc(){}var ME=4*60*60*1e3;function ye(n){return n&&n._delegate?n._delegate:n}var rt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Jn="[DEFAULT]";var Dc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ko;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qg(e))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Jn){return this.instances.has(e)}getOptions(e=Jn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(o);r===h&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bg(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jn){return this.component?this.component.multipleInstances?e:Jn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Bg(n){return n===Jn?void 0:n}function qg(n){return n.instantiationMode==="EAGER"}var No=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Dc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $g=[],X=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(X||{}),jg={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},zg=X.INFO,Gg={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},Wg=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Gg[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},vn=class{constructor(e){this.name=e,this._logLevel=zg,this._logHandler=Wg,this._userLogHandler=null,$g.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}};var Kg=(n,e)=>e.some(t=>n instanceof t),bd,Ad;function Hg(){return bd||(bd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qg(){return Ad||(Ad=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Sd=new WeakMap,xc=new WeakMap,Pd=new WeakMap,Nc=new WeakMap,Vc=new WeakMap;function Jg(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(St(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Sd.set(t,n)}).catch(()=>{}),Vc.set(e,n),e}function Yg(n){if(xc.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});xc.set(n,e)}var Oc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Pd.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return St(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Cd(n){Oc=n(Oc)}function Xg(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(xo(this),e,...t);return Pd.set(r,e.sort?e.sort():[e]),St(r)}:Qg().includes(n)?function(...e){return n.apply(xo(this),e),St(Sd.get(this))}:function(...e){return St(n.apply(xo(this),e))}}function Zg(n){return typeof n=="function"?Xg(n):(n instanceof IDBTransaction&&Yg(n),Kg(n,Hg())?new Proxy(n,Oc):n)}function St(n){if(n instanceof IDBRequest)return Jg(n);if(Nc.has(n))return Nc.get(n);let e=Zg(n);return e!==n&&(Nc.set(n,e),Vc.set(e,n)),e}var xo=n=>Vc.get(n);function kd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),h=St(a);return r&&a.addEventListener("upgradeneeded",f=>{r(St(a.result),f.oldVersion,f.newVersion,St(a.transaction),f)}),t&&a.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var ey=["get","getKey","getAll","getAllKeys","count"],ty=["put","add","delete","clear"],Lc=new Map;function Rd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lc.get(e))return Lc.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=ty.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ey.includes(t)))return;let o=function(a,...h){return T(this,null,function*(){let f=this.transaction(a,i?"readwrite":"readonly"),m=f.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&f.done]))[0]})};return Lc.set(e,o),o}Cd(n=>rd(qi({},n),{get:(e,t,r)=>Rd(e,t)||n.get(e,t,r),has:(e,t)=>!!Rd(e,t)||n.has(e,t)}));var Fc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ny(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function ny(n){let e=n.getComponent();return e?.type==="VERSION"}var Uc="@firebase/app",Dd="0.10.13";var qt=new vn("@firebase/app"),ry="@firebase/app-compat",iy="@firebase/analytics-compat",sy="@firebase/analytics",oy="@firebase/app-check-compat",ay="@firebase/app-check",cy="@firebase/auth",uy="@firebase/auth-compat",ly="@firebase/database",hy="@firebase/data-connect",dy="@firebase/database-compat",fy="@firebase/functions",py="@firebase/functions-compat",my="@firebase/installations",gy="@firebase/installations-compat",yy="@firebase/messaging",wy="@firebase/messaging-compat",_y="@firebase/performance",vy="@firebase/performance-compat",Iy="@firebase/remote-config",Ey="@firebase/remote-config-compat",Ty="@firebase/storage",by="@firebase/storage-compat",Ay="@firebase/firestore",Sy="@firebase/vertexai-preview",Py="@firebase/firestore-compat",Cy="firebase",Ry="10.14.1";var Bc="[DEFAULT]",ky={[Uc]:"fire-core",[ry]:"fire-core-compat",[sy]:"fire-analytics",[iy]:"fire-analytics-compat",[ay]:"fire-app-check",[oy]:"fire-app-check-compat",[cy]:"fire-auth",[uy]:"fire-auth-compat",[ly]:"fire-rtdb",[hy]:"fire-data-connect",[dy]:"fire-rtdb-compat",[fy]:"fire-fn",[py]:"fire-fn-compat",[my]:"fire-iid",[gy]:"fire-iid-compat",[yy]:"fire-fcm",[wy]:"fire-fcm-compat",[_y]:"fire-perf",[vy]:"fire-perf-compat",[Iy]:"fire-rc",[Ey]:"fire-rc-compat",[Ty]:"fire-gcs",[by]:"fire-gcs-compat",[Ay]:"fire-fst",[Py]:"fire-fst-compat",[Sy]:"fire-vertex","fire-js":"fire-js",[Cy]:"fire-js-all"};var Gi=new Map,Dy=new Map,qc=new Map;function Nd(n,e){try{n.container.addComponent(e)}catch(t){qt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function En(n){let e=n.name;if(qc.has(e))return qt.debug(`There were multiple attempts to register component ${e}.`),!1;qc.set(e,n);for(let t of Gi.values())Nd(t,n);for(let t of Dy.values())Nd(t,n);return!0}function Ki(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ft(n){return n.settings!==void 0}var Ny={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},In=new Bt("app","Firebase",Ny);var $c=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}};var Tn=Ry;function Gc(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Bc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw In.create("bad-app-name",{appName:String(i)});if(t||(t=Cc()),!t)throw In.create("no-options");let o=Gi.get(i);if(o){if(Qn(t,o.options)&&Qn(r,o.config))return o;throw In.create("duplicate-app",{appName:i})}let a=new No(i);for(let f of qc.values())a.addComponent(f);let h=new $c(t,r,a);return Gi.set(i,h),h}function Ur(n=Bc){let e=Gi.get(n);if(!e&&n===Bc&&Cc())return Gc();if(!e)throw In.create("no-app",{appName:n});return e}function Oo(){return Array.from(Gi.values())}function ke(n,e,t){var r;let i=(r=ky[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&h.push("and"),a&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qt.warn(h.join(" "));return}En(new rt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var xy="firebase-heartbeat-database",Oy=1,Wi="firebase-heartbeat-store",Mc=null;function Ld(){return Mc||(Mc=kd(xy,Oy,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wi)}catch(t){console.warn(t)}}}}).catch(n=>{throw In.create("idb-open",{originalErrorMessage:n.message})})),Mc}function Vy(n){return T(this,null,function*(){try{let t=(yield Ld()).transaction(Wi),r=yield t.objectStore(Wi).get(Md(n));return yield t.done,r}catch(e){if(e instanceof Ye)qt.warn(e.message);else{let t=In.create("idb-get",{originalErrorMessage:e?.message});qt.warn(t.message)}}})}function xd(n,e){return T(this,null,function*(){try{let r=(yield Ld()).transaction(Wi,"readwrite");yield r.objectStore(Wi).put(e,Md(n)),yield r.done}catch(t){if(t instanceof Ye)qt.warn(t.message);else{let r=In.create("idb-set",{originalErrorMessage:t?.message});qt.warn(r.message)}}})}function Md(n){return`${n.name}!${n.options.appId}`}var Ly=1024,My=30*24*60*60*1e3,jc=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new zc(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Od();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let h=new Date(a.date).valueOf();return Date.now()-h<=My}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qt.warn(r)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Od(),{heartbeatsToSend:r,unsentEntries:i}=Fy(this._heartbeatsCache.heartbeats),o=ji(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return qt.warn(t),""}})}};function Od(){return new Date().toISOString().substring(0,10)}function Fy(n,e=Ly){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Vd(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Vd(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var zc=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return kc()?Id().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Vy(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xd(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xd(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Vd(n){return ji(JSON.stringify({version:2,heartbeats:n})).length}function Uy(n){En(new rt("platform-logger",e=>new Fc(e),"PRIVATE")),En(new rt("heartbeat",e=>new jc(e),"PRIVATE")),ke(Uc,Dd,n),ke(Uc,Dd,"esm2017"),ke("fire-js","")}Uy("");function ef(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tf=ef,nf=new Bt("auth","Firebase",ef());var Bo=new vn("@firebase/auth");function By(n,...e){Bo.logLevel<=X.WARN&&Bo.warn(`Auth (${Tn}): ${n}`,...e)}function Lo(n,...e){Bo.logLevel<=X.ERROR&&Bo.error(`Auth (${Tn}): ${n}`,...e)}function Ct(n,...e){throw pu(n,...e)}function Yn(n,...e){return pu(n,...e)}function rf(n,e,t){let r=Object.assign(Object.assign({},tf()),{[e]:t});return new Bt("auth","Firebase",r).create(e,{appName:n.name})}function zt(n){return rf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pu(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return nf.create(n,...e)}function j(n,e,...t){if(!n)throw pu(e,...t)}function $t(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Lo(e),new Error(e)}function An(n,e){n||$t(e)}function Qc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function qy(){return Fd()==="http:"||Fd()==="https:"}function Fd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function $y(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qy()||yd()||"connection"in navigator)?navigator.onLine:!0}function jy(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Xn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,An(t>e,"Short delay should be less than long delay!"),this.isMobile=md()||wd()}get(){return $y()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function mu(n,e){An(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var qo=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zy={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Gy=new Xn(3e4,6e4);function Gt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Wt(o,a,h,f){return T(this,arguments,function*(n,e,t,r,i={}){return sf(n,i,()=>T(this,null,function*(){let m={},w={};r&&(e==="GET"?w=r:m={body:JSON.stringify(r)});let g=zi(Object.assign({key:n.config.apiKey},w)).slice(1),R=yield n._getAdditionalHeaders();R["Content-Type"]="application/json",n.languageCode&&(R["X-Firebase-Locale"]=n.languageCode);let N=Object.assign({method:e,headers:R},m);return gd()||(N.referrerPolicy="no-referrer"),qo.fetch()(of(n,n.config.apiHost,t,g),N)}))})}function sf(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},zy),e);try{let i=new Jc(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw Vo(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let h=o.ok?a.errorMessage:a.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vo(n,"credential-already-in-use",a);if(f==="EMAIL_EXISTS")throw Vo(n,"email-already-in-use",a);if(f==="USER_DISABLED")throw Vo(n,"user-disabled",a);let w=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw rf(n,w,m);Ct(n,w)}}catch(i){if(i instanceof Ye)throw i;Ct(n,"network-request-failed",{message:String(i)})}})}function ts(o,a,h,f){return T(this,arguments,function*(n,e,t,r,i={}){let m=yield Wt(n,e,t,r,i);return"mfaPendingCredential"in m&&Ct(n,"multi-factor-auth-required",{_serverResponse:m}),m})}function of(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?mu(n.config,i):`${n.config.apiScheme}://${i}`}function Wy(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Jc=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Yn(this.auth,"network-request-failed")),Gy.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Vo(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Yn(n,e,r);return i.customData._tokenResponse=t,i}function Ud(n){return n!==void 0&&n.enterprise!==void 0}var Yc=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Wy(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Ky(n,e){return T(this,null,function*(){return Wt(n,"GET","/v2/recaptchaConfig",Gt(n,e))})}function Hy(n,e){return T(this,null,function*(){return Wt(n,"POST","/v1/accounts:delete",e)})}function af(n,e){return T(this,null,function*(){return Wt(n,"POST","/v1/accounts:lookup",e)})}function Hi(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gu(n,e=!1){return T(this,null,function*(){let t=ye(n),r=yield t.getIdToken(e),i=yu(r);j(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:Hi(Wc(i.auth_time)),issuedAtTime:Hi(Wc(i.iat)),expirationTime:Hi(Wc(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Wc(n){return Number(n)*1e3}function yu(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Lo("JWT malformed, contained fewer than 3 sections"),null;try{let i=Sc(t);return i?JSON.parse(i):(Lo("Failed to decode base64 JWT payload"),null)}catch(i){return Lo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Bd(n){let e=yu(n);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ji(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ye&&Qy(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Qy({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Xc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yi=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hi(this.lastLoginAt),this.creationTime=Hi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function $o(n){return T(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ji(n,af(t,{idToken:r}));j(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?cf(o.providerUserInfo):[],h=Jy(n.providerData,a),f=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!h?.length,w=f?m:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Yi(o.createdAt,o.lastLoginAt),isAnonymous:w};Object.assign(n,g)})}function wu(n){return T(this,null,function*(){let e=ye(n);yield $o(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Jy(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cf(n){return n.map(e=>{var{providerId:t}=e,r=vc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Yy(n,e){return T(this,null,function*(){let t=yield sf(n,{},()=>T(this,null,function*(){let r=zi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=of(n,i,"/v1/token",`key=${o}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",qo.fetch()(a,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Xy(n,e){return T(this,null,function*(){return Wt(n,"POST","/v2/accounts:revokeToken",Gt(n,e))})}var Qi=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){j(e.length!==0,"internal-error");let t=Bd(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Yy(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(j(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(j(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return $t("not implemented")}};function bn(n,e){j(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Br=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=vc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yi(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield Ji(this,this.stsTokenManager.getToken(this.auth,e));return j(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return gu(this,e)}reload(){return wu(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield $o(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(ft(this.auth.app))return Promise.reject(zt(this.auth));let e=yield this.getIdToken();return yield Ji(this,Hy(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,h,f,m,w;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,R=(i=t.email)!==null&&i!==void 0?i:void 0,N=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,M=(a=t.photoURL)!==null&&a!==void 0?a:void 0,B=(h=t.tenantId)!==null&&h!==void 0?h:void 0,O=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,G=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:J,emailVerified:ce,isAnonymous:ve,providerData:ne,stsTokenManager:P}=t;j(J&&P,e,"internal-error");let v=Qi.fromJSON(this.name,P);j(typeof J=="string",e,"internal-error"),bn(g,e.name),bn(R,e.name),j(typeof ce=="boolean",e,"internal-error"),j(typeof ve=="boolean",e,"internal-error"),bn(N,e.name),bn(M,e.name),bn(B,e.name),bn(O,e.name),bn(G,e.name),bn(Q,e.name);let I=new n({uid:J,auth:e,email:R,emailVerified:ce,displayName:g,isAnonymous:ve,photoURL:M,phoneNumber:N,tenantId:B,stsTokenManager:v,createdAt:G,lastLoginAt:Q});return ne&&Array.isArray(ne)&&(I.providerData=ne.map(b=>Object.assign({},b))),O&&(I._redirectEventId=O),I}static _fromIdTokenResponse(e,t,r=!1){return T(this,null,function*(){let i=new Qi;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $o(o),o})}static _fromGetAccountInfoResponse(e,t,r){return T(this,null,function*(){let i=t.users[0];j(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?cf(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,h=new Qi;h.updateFromIdToken(r);let f=new n({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:a}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Yi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(f,m),f})}};var qd=new Map;function jt(n){An(n instanceof Function,"Expected a class definition");let e=qd.get(n);return e?(An(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qd.set(n,e),e)}var Zy=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,r){return T(this,null,function*(){this.storage[t]=r})}_get(t){return T(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Zc=Zy;function Mo(n,e,t){return`firebase:${n}:${e}:${t}`}var jo=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Mo(this.userKey,i.apiKey,o),this.fullPersistenceKey=Mo("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Br._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return T(this,null,function*(){if(!t.length)return new n(jt(Zc),e,r);let i=(yield Promise.all(t.map(m=>T(this,null,function*(){if(yield m._isAvailable())return m})))).filter(m=>m),o=i[0]||jt(Zc),a=Mo(r,e.config.apiKey,e.name),h=null;for(let m of t)try{let w=yield m._get(a);if(w){let g=Br._fromJSON(e,w);m!==o&&(h=g),o=m;break}}catch{}let f=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new n(o,e,r):(o=f[0],h&&(yield o._set(a,h.toJSON())),yield Promise.all(t.map(m=>T(this,null,function*(){if(m!==o)try{yield m._remove(a)}catch{}}))),new n(o,e,r))})}};function $d(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(df(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uf(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pf(e))return"Blackberry";if(mf(e))return"Webos";if(lf(e))return"Safari";if((e.includes("chrome/")||hf(e))&&!e.includes("edge/"))return"Chrome";if(ff(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uf(n=Oe()){return/firefox\//i.test(n)}function lf(n=Oe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hf(n=Oe()){return/crios\//i.test(n)}function df(n=Oe()){return/iemobile/i.test(n)}function ff(n=Oe()){return/android/i.test(n)}function pf(n=Oe()){return/blackberry/i.test(n)}function mf(n=Oe()){return/webos/i.test(n)}function _u(n=Oe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ew(n=Oe()){var e;return _u(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tw(){return _d()&&document.documentMode===10}function gf(n=Oe()){return _u(n)||ff(n)||mf(n)||pf(n)||/windows phone/i.test(n)||df(n)}function yf(n,e=[]){let t;switch(n){case"Browser":t=$d(Oe());break;case"Worker":t=`${$d(Oe())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Tn}/${r}`}var eu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,h)=>{try{let f=e(o);a(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function nw(t){return T(this,arguments,function*(n,e={}){return Wt(n,"GET","/v2/passwordPolicy",Gt(n,e))})}var rw=6,tu=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:rw,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,h;let f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsNumericCharacter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var nu=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zo(this),this.idTokenSubscription=new zo(this),this.beforeStateQueue=new eu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jt(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield jo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield af(this,{idToken:e}),r=yield Br._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(ft(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(h,h))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=i?._redirectEventId,f=yield this.tryRedirectSignIn(e);(!a||a===h)&&f?.user&&(i=f.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield $o(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=jy()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(ft(this.app))return Promise.reject(zt(this));let t=e?ye(e):null;return t&&j(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return ft(this.app)?Promise.reject(zt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ft(this.app)?Promise.reject(zt(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(jt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield nw(this),t=new tu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Xy(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&jt(e)||this._popupRedirectResolver;j(t,this,"argument-error"),this.redirectPersistenceManager=yield jo.create(this,[jt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(h,this,"internal-error"),h.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let f=e.addObserver(t,r,i);return()=>{a=!0,f()}}else{let f=e.addObserver(t);return()=>{a=!0,f()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return T(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&By(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function er(n){return ye(n)}var zo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Td(t=>this.observer=t)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yo={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iw(n){Yo=n}function wf(n){return Yo.loadJS(n)}function sw(){return Yo.recaptchaEnterpriseScript}function ow(){return Yo.gapiScript}function _f(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var aw="recaptcha-enterprise",cw="NO_RECAPTCHA",ru=class{constructor(e){this.type=aw,this.auth=er(e)}verify(e="verify",t=!1){return T(this,null,function*(){function r(o){return T(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,h)=>T(this,null,function*(){Ky(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{let m=new Yc(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,a(m.siteKey)}}).catch(f=>{h(f)})}))})}function i(o,a,h){let f=window.grecaptcha;Ud(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{a(m)}).catch(()=>{a(cw)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(h=>{if(!t&&Ud(window.grecaptcha))i(h,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let f=sw();f.length!==0&&(f+=h),wf(f).then(()=>{i(h,o,a)}).catch(m=>{a(m)})}}).catch(h=>{a(h)})})})}};function jd(n,e,t,r=!1){return T(this,null,function*(){let i=new ru(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function iu(n,e,t,r){return T(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield jd(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>T(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield jd(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)}))})}function vu(n,e){let t=Ki(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Qn(o,e??{}))return i;Ct(i,"already-initialized")}return t.initialize({options:e})}function uw(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(jt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Iu(n,e,t){let r=er(n);j(r._canInitEmulator,r,"emulator-config-failed"),j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=vf(e),{host:a,port:h}=lw(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${o}//${a}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||hw()}function vf(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function lw(n){let e=vf(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:zd(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:zd(a)}}}function zd(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function hw(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Xi=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $t("not implemented")}_getIdTokenResponse(e){return $t("not implemented")}_linkToIdToken(e,t){return $t("not implemented")}_getReauthenticationResolver(e){return $t("not implemented")}};function dw(n,e){return T(this,null,function*(){return Wt(n,"POST","/v1/accounts:signUp",e)})}function fw(n,e){return T(this,null,function*(){return ts(n,"POST","/v1/accounts:signInWithPassword",Gt(n,e))})}function pw(n,e){return T(this,null,function*(){return Wt(n,"POST","/v1/accounts:sendOobCode",Gt(n,e))})}function mw(n,e){return T(this,null,function*(){return pw(n,e)})}function gw(n,e){return T(this,null,function*(){return ts(n,"POST","/v1/accounts:signInWithEmailLink",Gt(n,e))})}function yw(n,e){return T(this,null,function*(){return ts(n,"POST","/v1/accounts:signInWithEmailLink",Gt(n,e))})}var Zi=class n extends Xi{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return T(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iu(e,t,"signInWithPassword",fw);case"emailLink":return gw(e,{email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}})}_linkToIdToken(e,t){return T(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iu(e,r,"signUpPassword",dw);case"emailLink":return yw(e,{idToken:t,email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Kc(n,e){return T(this,null,function*(){return ts(n,"POST","/v1/accounts:signInWithIdp",Gt(n,e))})}function ww(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _w(n){let e=Mr(Fr(n)).link,t=e?Mr(Fr(e)).deep_link_id:null,r=Mr(Fr(n)).deep_link_id;return(r?Mr(Fr(r)).link:null)||r||t||e||n}var Go=class n{constructor(e){var t,r,i,o,a,h;let f=Mr(Fr(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,w=(r=f.oobCode)!==null&&r!==void 0?r:null,g=ww((i=f.mode)!==null&&i!==void 0?i:null);j(m&&w&&g,"argument-error"),this.apiKey=m,this.operation=g,this.code=w,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=f.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){let t=_w(e);try{return new n(t)}catch{return null}}};var If=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Zi._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Go.parseLink(r);return j(i,"argument-error"),Zi._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Wo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var su=class extends Wo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function vw(n,e){return T(this,null,function*(){return ts(n,"POST","/v1/accounts:signUp",Gt(n,e))})}var qr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return T(this,null,function*(){let o=yield Br._fromIdTokenResponse(e,r,i),a=Gd(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return T(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Gd(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Gd(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ou=class n extends Ye{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Ef(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ou._fromErrorAndOperation(n,o,e,r):o})}function Iw(n,e,t=!1){return T(this,null,function*(){let r=yield Ji(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return qr._forOperation(n,"link",r)})}function Ew(n,e,t=!1){return T(this,null,function*(){let{auth:r}=n;if(ft(r.app))return Promise.reject(zt(r));let i="reauthenticate";try{let o=yield Ji(n,Ef(r,i,e,n),t);j(o.idToken,r,"internal-error");let a=yu(o.idToken);j(a,r,"internal-error");let{sub:h}=a;return j(n.uid===h,r,"user-mismatch"),qr._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ct(r,"user-mismatch"),o}})}function Tf(n,e,t=!1){return T(this,null,function*(){if(ft(n.app))return Promise.reject(zt(n));let r="signIn",i=yield Ef(n,r,e),o=yield qr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Eu(n,e){return T(this,null,function*(){return Tf(er(n),e)})}function Tw(n,e,t){var r;j(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),j(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(j(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(j(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function bf(n){return T(this,null,function*(){let e=er(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Tu(n,e,t){return T(this,null,function*(){if(ft(n.app))return Promise.reject(zt(n));let r=er(n),a=yield iu(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vw).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&bf(n),f}),h=yield qr._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(h.user),h})}function bu(n,e,t){return ft(n.app)?Promise.reject(zt(n)):Eu(ye(n),If.credential(e,t)).catch(r=>T(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&bf(n),r}))}function Au(n,e){return T(this,null,function*(){let t=ye(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&Tw(t.auth,i,e);let{email:o}=yield mw(t.auth,i);o!==n.email&&(yield n.reload())})}function Su(n,e,t,r){return ye(n).onIdTokenChanged(e,t,r)}function Pu(n,e,t){return ye(n).beforeAuthStateChanged(e,t)}function Cu(n,e,t,r){return ye(n).onAuthStateChanged(e,t,r)}function Ru(n){return ye(n).signOut()}var Ko="__sak";var Ho=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ko,"1"),this.storage.removeItem(Ko),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var bw=1e3,Aw=10,Sw=(()=>{class n extends Ho{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gf(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((h,f,m)=>{this.notifyListeners(h,m)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let h=this.storage.getItem(i);!r&&this.localCache[i]===h||this.notifyListeners(i,h)},a=this.storage.getItem(i);tw()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Aw):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},bw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return T(this,null,function*(){yield wn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return T(this,null,function*(){let r=yield wn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return T(this,null,function*(){yield wn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Af=Sw;var Pw=(()=>{class n extends Ho{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),ku=Pw;function Cw(n){return Promise.all(n.map(e=>T(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Rw=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return T(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,h=this.handlersMap[o];if(!h?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let f=Array.from(h).map(w=>T(this,null,function*(){return w(r.origin,a)})),m=yield Cw(f);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Sf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var au=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return T(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((h,f)=>{let m=Sf("",20);i.port1.start();let w=setTimeout(()=>{f(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(g){let R=g;if(R.data.eventId===m)switch(R.data.status){case"ack":clearTimeout(w),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(R.data.response);break;default:clearTimeout(w),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Pt(){return window}function kw(n){Pt().location.href=n}function Pf(){return typeof Pt().WorkerGlobalScope<"u"&&typeof Pt().importScripts=="function"}function Dw(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Nw(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function xw(){return Pf()?self:null}var Cf="firebaseLocalStorageDb",Ow=1,Qo="firebaseLocalStorage",Rf="fbase_key",Zn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Xo(n,e){return n.transaction([Qo],e?"readwrite":"readonly").objectStore(Qo)}function Vw(){let n=indexedDB.deleteDatabase(Cf);return new Zn(n).toPromise()}function cu(){let n=indexedDB.open(Cf,Ow);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Qo,{keyPath:Rf})}catch(i){t(i)}}),n.addEventListener("success",()=>T(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Qo)?e(r):(r.close(),yield Vw(),e(yield cu()))}))})}function Wd(n,e,t){return T(this,null,function*(){let r=Xo(n,!0).put({[Rf]:e,value:t});return new Zn(r).toPromise()})}function Lw(n,e){return T(this,null,function*(){let t=Xo(n,!1).get(e),r=yield new Zn(t).toPromise();return r===void 0?null:r.value})}function Kd(n,e){let t=Xo(n,!0).delete(e);return new Zn(t).toPromise()}var Mw=800,Fw=3,Uw=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield cu(),this.db)})}_withRetries(t){return T(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Fw)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return Pf()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=Rw._getInstance(xw()),this.receiver._subscribe("keyChanged",(t,r)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Dw(),!this.activeServiceWorker)return;this.sender=new au(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Nw()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let t=yield cu();return yield Wd(t,Ko,"1"),yield Kd(t,Ko),!0}catch{}return!1})}_withPendingWrite(t){return T(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>Wd(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return T(this,null,function*(){let r=yield this._withRetries(i=>Lw(i,t));return this.localCache[t]=r,r})}_remove(t){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>Kd(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return T(this,null,function*(){let t=yield this._withRetries(o=>{let a=Xo(o,!1).getAll();return new Zn(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),Mw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),kf=Uw;var lT=_f("rcb"),hT=new Xn(3e4,6e4);function Bw(n,e){return e?jt(e):(j(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var es=class extends Xi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function qw(n){return Tf(n.auth,new es(n),n.bypassAuthState)}function $w(n){let{auth:e,user:t}=n;return j(t,e,"internal-error"),Ew(t,new es(n),n.bypassAuthState)}function jw(n){return T(this,null,function*(){let{auth:e,user:t}=n;return j(t,e,"internal-error"),Iw(t,new es(n),n.bypassAuthState)})}var uu=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:h}=e;if(a){this.reject(a);return}let f={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(h)(f))}catch(m){this.reject(m)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qw;case"linkViaPopup":case"linkViaRedirect":return jw;case"reauthViaPopup":case"reauthViaRedirect":return $w;default:Ct(this.auth,"internal-error")}}resolve(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var dT=new Xn(2e3,1e4);var zw="pendingRedirect",Fo=new Map,lu=class n extends uu{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return T(this,null,function*(){let e=Fo.get(this.auth._key());if(!e){try{let r=(yield Gw(this.resolver,this.auth))?yield wn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fo.set(this.auth._key(),e)}return this.bypassAuthState||Fo.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return wn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,wn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function Gw(n,e){return T(this,null,function*(){let t=Hw(e),r=Kw(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Ww(n,e){Fo.set(n._key(),e)}function Kw(n){return jt(n._redirectPersistence)}function Hw(n){return Mo(zw,n.config.apiKey,n.name)}function Qw(n,e,t=!1){return T(this,null,function*(){if(ft(n.app))return Promise.reject(zt(n));let r=er(n),i=Bw(r,e),a=yield new lu(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var Jw=10*60*1e3,hu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yw(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Df(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Yn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jw&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hd(e))}saveEventToCache(e){this.cachedEventUids.add(Hd(e)),this.lastProcessedEventTime=Date.now()}};function Hd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Df({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Yw(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Df(n);default:return!1}}function Xw(t){return T(this,arguments,function*(n,e={}){return Wt(n,"GET","/v1/projects",e)})}var Zw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e_=/^https?/;function t_(n){return T(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Xw(n);for(let t of e)try{if(n_(t))return}catch{}Ct(n,"unauthorized-domain")})}function n_(n){let e=Qc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!e_.test(t))return!1;if(Zw.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var r_=new Xn(3e4,6e4);function Qd(){let n=Pt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function i_(n){return new Promise((e,t)=>{var r,i,o;function a(){Qd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qd(),t(Yn(n,"network-request-failed"))},timeout:r_.get()})}if(!((i=(r=Pt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Pt().gapi)===null||o===void 0)&&o.load)a();else{let h=_f("iframefcb");return Pt()[h]=()=>{gapi.load?a():t(Yn(n,"network-request-failed"))},wf(`${ow()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Uo=null,e})}var Uo=null;function s_(n){return Uo=Uo||i_(n),Uo}var o_=new Xn(5e3,15e3),a_="__/auth/iframe",c_="emulator/auth/iframe",u_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h_(n){let e=n.config;j(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?mu(e,c_):`https://${n.config.authDomain}/${a_}`,r={apiKey:e.apiKey,appName:n.name,v:Tn},i=l_.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${zi(r).slice(1)}`}function d_(n){return T(this,null,function*(){let e=yield s_(n),t=Pt().gapi;return j(t,n,"internal-error"),e.open({where:document.body,url:h_(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u_,dontclear:!0},r=>new Promise((i,o)=>T(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Yn(n,"network-request-failed"),h=Pt().setTimeout(()=>{o(a)},o_.get());function f(){Pt().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{o(a)})})))})}var f_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p_=500,m_=600,g_="_blank",y_="http://localhost",Jo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function w_(n,e,t,r=p_,i=m_){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),h="",f=Object.assign(Object.assign({},f_),{width:r.toString(),height:i.toString(),top:o,left:a}),m=Oe().toLowerCase();t&&(h=hf(m)?g_:t),uf(m)&&(e=e||y_,f.scrollbars="yes");let w=Object.entries(f).reduce((R,[N,M])=>`${R}${N}=${M},`,"");if(ew(m)&&h!=="_self")return __(e||"",h),new Jo(null);let g=window.open(e||"",h,w);j(g,n,"popup-blocked");try{g.focus()}catch{}return new Jo(g)}function __(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var v_="__/auth/handler",I_="emulator/auth/handler",E_=encodeURIComponent("fac");function Jd(n,e,t,r,i,o){return T(this,null,function*(){j(n.config.authDomain,n,"auth-domain-config-required"),j(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Tn,eventId:i};if(e instanceof Wo){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Ed(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[w,g]of Object.entries(o||{}))a[w]=g}if(e instanceof su){let w=e.getScopes().filter(g=>g!=="");w.length>0&&(a.scopes=w.join(","))}n.tenantId&&(a.tid=n.tenantId);let h=a;for(let w of Object.keys(h))h[w]===void 0&&delete h[w];let f=yield n._getAppCheckToken(),m=f?`#${E_}=${encodeURIComponent(f)}`:"";return`${T_(n)}?${zi(h).slice(1)}${m}`})}function T_({config:n}){return n.emulator?mu(n,I_):`https://${n.authDomain}/${v_}`}var Hc="webStorageSupport",du=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ku,this._completeRedirectFn=Qw,this._overrideRedirectResult=Ww}_openPopup(e,t,r,i){return T(this,null,function*(){var o;An((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield Jd(e,t,r,Qc(),i);return w_(e,a,Sf())})}_openRedirect(e,t,r,i){return T(this,null,function*(){yield this._originValidation(e);let o=yield Jd(e,t,r,Qc(),i);return kw(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(An(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return T(this,null,function*(){let t=yield d_(e),r=new hu(e);return t.register("authEvent",i=>(j(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hc,{type:Hc},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[Hc];a!==void 0&&t(!!a),Ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=t_(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gf()||lf()||_u()}},Nf=du;var Yd="@firebase/auth",Xd="1.7.9";var fu=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b_(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A_(n){En(new rt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:h}=r.options;j(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let f={apiKey:a,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yf(n)},m=new nu(r,i,o,f);return uw(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),En(new rt("auth-internal",e=>{let t=er(e.getProvider("auth").getImmediate());return(r=>new fu(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(Yd,Xd,b_(n)),ke(Yd,Xd,"esm2017")}var S_=5*60,P_=Rc("authIdTokenMaxAge")||S_,Zd=null,C_=n=>e=>T(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>P_)return;let i=t?.token;Zd!==i&&(Zd=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Du(n=Ur()){let e=Ki(n,"auth");if(e.isInitialized())return e.getImmediate();let t=vu(n,{popupRedirectResolver:Nf,persistence:[kf,Af,ku]}),r=Rc("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=C_(o.toString());Pu(t,a,()=>a(t.currentUser)),Su(t,h=>a(h))}}let i=Pc("auth");return i&&Iu(t,`http://${i}`),t}function R_(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iw({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Yn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",R_().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A_("Browser");var yv="firebase",wv="10.14.1";ke(yv,wv,"app");var nr=new cd("ANGULARFIRE2_VERSION");function ea(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ns=(n,e)=>{let t=e?[e]:Oo(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},jr=class{constructor(){return ns(vv)}},vv="app-check";function $r(){}var Zo=class{zone;delegate;constructor(e,t=sd){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,r)}},Nu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$r,{},$r,$r)),t.pipe(od({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},zr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Zo(Zone.current)),this.insideAngular=t.run(()=>new Zo(Zone.current,id)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ro(_n))};static \u0275prov=Co({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ta(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Iv(n){return ta().ngZone.runOutsideAngular(()=>n())}function tr(n){return ta().ngZone.run(()=>n())}function Ev(n){return Tv(ta())(n)}function Tv(n){return function(t){return t=t.lift(new Nu(n.ngZone)),t.pipe(Ec(n.outsideAngular),Ic(n.insideAngular))}}var bv=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),tr(()=>n.apply(void 0,r))},de=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=tr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$r,{},$r,$r))),r[o]=bv(r[o],t));let i=Iv(()=>n.apply(this,r));if(!e)if(i instanceof $i){let o=ta();return i.pipe(Ec(o.outsideAngular),Ic(o.insideAngular))}else return tr(()=>i);return i instanceof $i?i.pipe(Ev):i instanceof Promise?tr(()=>new Promise((o,a)=>i.then(h=>tr(()=>o(h)),h=>tr(()=>a(h))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:tr(()=>i)};var Kt=class{constructor(e){return e}},rr=class{constructor(){return Oo()}};function Av(n){return n&&n.length===1?n[0]:new Kt(Ur())}var xu=new Or("angularfire2._apps"),Sv={provide:Kt,useFactory:Av,deps:[[new nt,xu]]},Pv={provide:rr,deps:[[new nt,xu]]};function Cv(n){return(e,t)=>{let r=t.get(ad);ke("angularfire",nr.full,"core"),ke("angularfire",nr.full,"app"),ke("angular",ud.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Kt(i)}}function sb(n,...e){return Vr([Sv,Pv,{provide:xu,useFactory:Cv(n),multi:!0,deps:[_n,Lr,zr,...e]}])}var ob=de(Gc,!0);var xf="auth",rs=class{constructor(e){return e}},is=class{constructor(){return ns(xf)}};var Ou=new Or("angularfire2.auth-instances");function Rv(n,e){let t=ea(xf,n,e);return t&&new rs(t)}function kv(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rs(r)}}var Dv={provide:is,deps:[[new nt,Ou]]},Nv={provide:rs,useFactory:Rv,deps:[[new nt,Ou],Kt]};function yb(n,...e){return ke("angularfire",nr.full,"auth"),Vr([Nv,Dv,{provide:Ou,useFactory:kv(n),multi:!0,deps:[_n,Lr,zr,rr,[new nt,jr],...e]}])}var wb=de(Tu,!0);var _b=de(Du,!0);var vb=de(Cu,!0);var Ib=de(Au,!0);var Eb=de(bu,!0);var Tb=de(Ru,!0);var Gr=Cg(Of()),Vf=class{constructor(e){this.router=e}mostrarMensajeError(e,t){Gr.default.fire({icon:"error",title:e,text:t})}mostrarMensajeExito(e,t){Gr.default.fire({title:e,text:t,icon:"success",confirmButtonText:"Ok",allowOutsideClick:!1,allowEscapeKey:!1})}mostrarMensajeWarning(e,t){Gr.default.fire({title:e,text:t,icon:"warning",confirmButtonText:"Ok",allowOutsideClick:!1,allowEscapeKey:!1})}mostrarMensajeExitoYNavegar(e,t,r){Gr.default.fire({title:e,text:t,icon:"success",confirmButtonText:"Ok",allowOutsideClick:!1,allowEscapeKey:!1}).then(i=>{i.isConfirmed&&this.router.navigateByUrl(r)})}mostrarMensajeConfirmar(e,t){return Gr.default.fire({title:e,text:t,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED",cancelButtonText:"No"})}};var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mf={};var Sn,Lu;(function(){var n;function e(P,v){function I(){}I.prototype=v.prototype,P.D=v.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(b,A,S){for(var E=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)E[ot-2]=arguments[ot];return v.prototype[A].apply(b,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,v,I){I||(I=0);var b=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)b[A]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(A=0;16>A;++A)b[A]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=P.g[0],I=P.g[1],A=P.g[2];var S=P.g[3],E=v+(S^I&(A^S))+b[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+b[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+b[2]+606105819&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+b[3]+3250441966&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+b[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+b[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+b[6]+2821735955&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+b[7]+4249261313&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+b[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+b[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+b[10]+4294925233&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+b[11]+2304563134&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(S^I&(A^S))+b[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(A^v&(I^A))+b[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=A+(I^S&(v^I))+b[14]+2792965006&4294967295,A=S+(E<<17&4294967295|E>>>15),E=I+(v^A&(S^v))+b[15]+1236535329&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(A^S&(I^A))+b[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+b[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+b[11]+643717713&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+b[0]+3921069994&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+b[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+b[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+b[15]+3634488961&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+b[4]+3889429448&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+b[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+b[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+b[3]+4107603335&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+b[8]+1163531501&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^S&(I^A))+b[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^A&(v^I))+b[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(S^v))+b[7]+1735328473&4294967295,A=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(A^S))+b[12]+2368359562&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(I^A^S)+b[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+b[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+b[11]+1839030562&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+b[14]+4259657740&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+b[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+b[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+b[7]+4139469664&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+b[10]+3200236656&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+b[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+b[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+b[3]+3572445317&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+b[6]+76029189&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^S)+b[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^A)+b[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=A+(S^v^I)+b[15]+530742520&4294967295,A=S+(E<<16&4294967295|E>>>16),E=I+(A^S^v)+b[2]+3299628645&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(A^(I|~S))+b[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+b[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+b[14]+2878612391&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+b[5]+4237533241&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+b[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+b[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+b[10]+4293915773&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+b[1]+2240044497&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+b[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+b[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+b[6]+2734768916&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+b[13]+1309151649&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~S))+b[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~A))+b[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=A+(v^(S|~I))+b[2]+718787259&4294967295,A=S+(E<<15&4294967295|E>>>17),E=I+(S^(A|~v))+b[9]+3951481745&4294967295,P.g[0]=P.g[0]+v&4294967295,P.g[1]=P.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,P.g[2]=P.g[2]+A&4294967295,P.g[3]=P.g[3]+S&4294967295}r.prototype.u=function(P,v){v===void 0&&(v=P.length);for(var I=v-this.blockSize,b=this.B,A=this.h,S=0;S<v;){if(A==0)for(;S<=I;)i(this,P,S),S+=this.blockSize;if(typeof P=="string"){for(;S<v;)if(b[A++]=P.charCodeAt(S++),A==this.blockSize){i(this,b),A=0;break}}else for(;S<v;)if(b[A++]=P[S++],A==this.blockSize){i(this,b),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var v=1;v<P.length-8;++v)P[v]=0;var I=8*this.o;for(v=P.length-8;v<P.length;++v)P[v]=I&255,I/=256;for(this.u(P),P=Array(16),v=I=0;4>v;++v)for(var b=0;32>b;b+=8)P[I++]=this.g[v]>>>b&255;return P};function o(P,v){var I=h;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=v(P)}function a(P,v){this.h=v;for(var I=[],b=!0,A=P.length-1;0<=A;A--){var S=P[A]|0;b&&S==v||(I[A]=S,b=!1)}this.g=I}var h={};function f(P){return-128<=P&&128>P?o(P,function(v){return new a([v|0],0>v?-1:0)}):new a([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return g;if(0>P)return O(m(-P));for(var v=[],I=1,b=0;P>=I;b++)v[b]=P/I|0,I*=4294967296;return new a(v,0)}function w(P,v){if(P.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(P.charAt(0)=="-")return O(w(P.substring(1),v));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(v,8)),b=g,A=0;A<P.length;A+=8){var S=Math.min(8,P.length-A),E=parseInt(P.substring(A,A+S),v);8>S?(S=m(Math.pow(v,S)),b=b.j(S).add(m(E))):(b=b.j(I),b=b.add(m(E)))}return b}var g=f(0),R=f(1),N=f(16777216);n=a.prototype,n.m=function(){if(B(this))return-O(this).m();for(var P=0,v=1,I=0;I<this.g.length;I++){var b=this.i(I);P+=(0<=b?b:4294967296+b)*v,v*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(B(this))return"-"+O(this).toString(P);for(var v=m(Math.pow(P,6)),I=this,b="";;){var A=ce(I,v).g;I=G(I,A.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(P);if(I=A,M(I))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(var v=0;v<P.g.length;v++)if(P.g[v]!=0)return!1;return!0}function B(P){return P.h==-1}n.l=function(P){return P=G(this,P),B(P)?-1:M(P)?0:1};function O(P){for(var v=P.g.length,I=[],b=0;b<v;b++)I[b]=~P.g[b];return new a(I,~P.h).add(R)}n.abs=function(){return B(this)?O(this):this},n.add=function(P){for(var v=Math.max(this.g.length,P.g.length),I=[],b=0,A=0;A<=v;A++){var S=b+(this.i(A)&65535)+(P.i(A)&65535),E=(S>>>16)+(this.i(A)>>>16)+(P.i(A)>>>16);b=E>>>16,S&=65535,E&=65535,I[A]=E<<16|S}return new a(I,I[I.length-1]&-2147483648?-1:0)};function G(P,v){return P.add(O(v))}n.j=function(P){if(M(this)||M(P))return g;if(B(this))return B(P)?O(this).j(O(P)):O(O(this).j(P));if(B(P))return O(this.j(O(P)));if(0>this.l(N)&&0>P.l(N))return m(this.m()*P.m());for(var v=this.g.length+P.g.length,I=[],b=0;b<2*v;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(var A=0;A<P.g.length;A++){var S=this.i(b)>>>16,E=this.i(b)&65535,ot=P.i(A)>>>16,Zt=P.i(A)&65535;I[2*b+2*A]+=E*Zt,Q(I,2*b+2*A),I[2*b+2*A+1]+=S*Zt,Q(I,2*b+2*A+1),I[2*b+2*A+1]+=E*ot,Q(I,2*b+2*A+1),I[2*b+2*A+2]+=S*ot,Q(I,2*b+2*A+2)}for(b=0;b<v;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=v;b<2*v;b++)I[b]=0;return new a(I,0)};function Q(P,v){for(;(P[v]&65535)!=P[v];)P[v+1]+=P[v]>>>16,P[v]&=65535,v++}function J(P,v){this.g=P,this.h=v}function ce(P,v){if(M(v))throw Error("division by zero");if(M(P))return new J(g,g);if(B(P))return v=ce(O(P),v),new J(O(v.g),O(v.h));if(B(v))return v=ce(P,O(v)),new J(O(v.g),v.h);if(30<P.g.length){if(B(P)||B(v))throw Error("slowDivide_ only works with positive integers.");for(var I=R,b=v;0>=b.l(P);)I=ve(I),b=ve(b);var A=ne(I,1),S=ne(b,1);for(b=ne(b,2),I=ne(I,2);!M(b);){var E=S.add(b);0>=E.l(P)&&(A=A.add(I),S=E),b=ne(b,1),I=ne(I,1)}return v=G(P,A.j(v)),new J(A,v)}for(A=g;0<=P.l(v);){for(I=Math.max(1,Math.floor(P.m()/v.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=m(I),E=S.j(v);B(E)||0<E.l(P);)I-=b,S=m(I),E=S.j(v);M(S)&&(S=R),A=A.add(S),P=G(P,E)}return new J(A,P)}n.A=function(P){return ce(this,P).h},n.and=function(P){for(var v=Math.max(this.g.length,P.g.length),I=[],b=0;b<v;b++)I[b]=this.i(b)&P.i(b);return new a(I,this.h&P.h)},n.or=function(P){for(var v=Math.max(this.g.length,P.g.length),I=[],b=0;b<v;b++)I[b]=this.i(b)|P.i(b);return new a(I,this.h|P.h)},n.xor=function(P){for(var v=Math.max(this.g.length,P.g.length),I=[],b=0;b<v;b++)I[b]=this.i(b)^P.i(b);return new a(I,this.h^P.h)};function ve(P){for(var v=P.g.length+1,I=[],b=0;b<v;b++)I[b]=P.i(b)<<1|P.i(b-1)>>>31;return new a(I,P.h)}function ne(P,v){var I=v>>5;v%=32;for(var b=P.g.length-I,A=[],S=0;S<b;S++)A[S]=0<v?P.i(S+I)>>>v|P.i(S+I+1)<<32-v:P.i(S+I);return new a(A,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lu=Mf.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=m,a.fromString=w,Sn=Mf.Integer=a}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});var na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ht={};var Mu,xv,Wr,Fu,ss,ra,Uu,Bu,qu;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,d){return s==Array.prototype||s==Object.prototype||(s[l]=d.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof na=="object"&&na];for(var l=0;l<s.length;++l){var d=s[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(s,l){if(l)e:{var d=r;s=s.split(".");for(var y=0;y<s.length-1;y++){var C=s[y];if(!(C in d))break e;d=d[C]}s=s[s.length-1],y=d[s],l=l(y),l!=y&&l!=null&&e(d,s,{configurable:!0,writable:!0,value:l})}}function o(s,l){s instanceof String&&(s+="");var d=0,y=!1,C={next:function(){if(!y&&d<s.length){var D=d++;return{value:l(D,s[D]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(s){return s||function(){return o(this,function(l,d){return d})}});var a=a||{},h=this||self;function f(s){var l=typeof s;return l=l!="object"?l:s?Array.isArray(s)?"array":l:"null",l=="array"||l=="object"&&typeof s.length=="number"}function m(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}function w(s,l,d){return s.call.apply(s.bind,arguments)}function g(s,l,d){if(!s)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),s.apply(l,C)}}return function(){return s.apply(l,arguments)}}function R(s,l,d){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:g,R.apply(null,arguments)}function N(s,l){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),s.apply(this,y)}}function M(s,l){function d(){}d.prototype=l.prototype,s.aa=l.prototype,s.prototype=new d,s.prototype.constructor=s,s.Qb=function(y,C,D){for(var L=Array(arguments.length-2),se=2;se<arguments.length;se++)L[se-2]=arguments[se];return l.prototype[C].apply(y,L)}}function B(s){let l=s.length;if(0<l){let d=Array(l);for(let y=0;y<l;y++)d[y]=s[y];return d}return[]}function O(s,l){for(let d=1;d<arguments.length;d++){let y=arguments[d];if(f(y)){let C=s.length||0,D=y.length||0;s.length=C+D;for(let L=0;L<D;L++)s[C+L]=y[L]}else s.push(y)}}class G{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Q(s){return/^[\s\xa0]*$/.test(s)}function J(){var s=h.navigator;return s&&(s=s.userAgent)?s:""}function ce(s){return ce[" "](s),s}ce[" "]=function(){};var ve=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ne(s,l,d){for(let y in s)l.call(d,s[y],y,s)}function P(s,l){for(let d in s)l.call(void 0,s[d],d,s)}function v(s){let l={};for(let d in s)l[d]=s[d];return l}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(s,l){let d,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(d in y)s[d]=y[d];for(let D=0;D<I.length;D++)d=I[D],Object.prototype.hasOwnProperty.call(y,d)&&(s[d]=y[d])}}function A(s){var l=1;s=s.split(":");let d=[];for(;0<l&&s.length;)d.push(s.shift()),l--;return s.length&&d.push(s.join(":")),d}function S(s){h.setTimeout(()=>{throw s},0)}function E(){var s=tn;let l=null;return s.g&&(l=s.g,s.g=s.g.next,s.g||(s.h=null),l.next=null),l}class ot{constructor(){this.h=this.g=null}add(l,d){let y=Zt.get();y.set(l,d),this.h?this.h.next=y:this.g=y,this.h=y}}var Zt=new G(()=>new pi,s=>s.reset());class pi{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let en,Ft=!1,tn=new ot,Ke=()=>{let s=h.Promise.resolve(void 0);en=()=>{s.then(nn)}};var nn=()=>{for(var s;s=E();){try{s.h.call(s.g)}catch(d){S(d)}var l=Zt;l.j(s),100>l.h&&(l.h++,s.next=l.g,l.g=s)}Ft=!1};function Ue(){this.s=this.s,this.C=this.C}Ue.prototype.s=!1,Ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(s,l){this.type=s,this.g=this.target=l,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var rn=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let d=()=>{};h.addEventListener("test",d,l),h.removeEventListener("test",d,l)}catch{}return s}();function at(s,l){if(De.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var d=this.type=s.type,y=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=l,l=s.relatedTarget){if(ve){e:{try{ce(l.nodeName);var C=!0;break e}catch{}C=!1}C||(l=null)}}else d=="mouseover"?l=s.fromElement:d=="mouseout"&&(l=s.toElement);this.relatedTarget=l,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:Vs[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&at.aa.h.call(this)}}M(at,De);var Vs={2:"touch",3:"pen",4:"mouse"};at.prototype.h=function(){at.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),mi=0;function ec(s,l,d,y,C){this.listener=s,this.proxy=null,this.src=l,this.type=d,this.capture=!!y,this.ha=C,this.key=++mi,this.da=this.fa=!1}function sn(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function on(s){this.src=s,this.g={},this.h=0}on.prototype.add=function(s,l,d,y,C){var D=s.toString();s=this.g[D],s||(s=this.g[D]=[],this.h++);var L=gi(s,l,y,C);return-1<L?(l=s[L],d||(l.fa=!1)):(l=new ec(l,this.src,D,!!y,C),l.fa=d,s.push(l)),l};function an(s,l){var d=l.type;if(d in s.g){var y=s.g[d],C=Array.prototype.indexOf.call(y,l,void 0),D;(D=0<=C)&&Array.prototype.splice.call(y,C,1),D&&(sn(l),s.g[d].length==0&&(delete s.g[d],s.h--))}}function gi(s,l,d,y){for(var C=0;C<s.length;++C){var D=s[C];if(!D.da&&D.listener==l&&D.capture==!!d&&D.ha==y)return C}return-1}var Le="closure_lm_"+(1e6*Math.random()|0),He={};function Ls(s,l,d,y,C){if(y&&y.once)return yi(s,l,d,y,C);if(Array.isArray(l)){for(var D=0;D<l.length;D++)Ls(s,l[D],d,y,C);return null}return d=Ie(d),s&&s[yt]?s.K(l,d,m(y)?!!y.capture:!!y,C):Be(s,l,d,!1,y,C)}function Be(s,l,d,y,C,D){if(!l)throw Error("Invalid event type");var L=m(C)?!!C.capture:!!C,se=ct(s);if(se||(s[Le]=se=new on(s)),d=se.add(l,d,y,L,D),d.proxy)return d;if(y=_r(),d.proxy=y,y.src=s,y.listener=d,s.addEventListener)rn||(C=L),C===void 0&&(C=!1),s.addEventListener(l.toString(),y,C);else if(s.attachEvent)s.attachEvent(Qe(l.toString()),y);else if(s.addListener&&s.removeListener)s.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function _r(){function s(d){return l.call(s.src,s.listener,d)}let l=wt;return s}function yi(s,l,d,y,C){if(Array.isArray(l)){for(var D=0;D<l.length;D++)yi(s,l[D],d,y,C);return null}return d=Ie(d),s&&s[yt]?s.L(l,d,m(y)?!!y.capture:!!y,C):Be(s,l,d,!0,y,C)}function wi(s,l,d,y,C){if(Array.isArray(l))for(var D=0;D<l.length;D++)wi(s,l[D],d,y,C);else y=m(y)?!!y.capture:!!y,d=Ie(d),s&&s[yt]?(s=s.i,l=String(l).toString(),l in s.g&&(D=s.g[l],d=gi(D,d,y,C),-1<d&&(sn(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete s.g[l],s.h--)))):s&&(s=ct(s))&&(l=s.g[l.toString()],s=-1,l&&(s=gi(l,d,y,C)),(d=-1<s?l[s]:null)&&Y(d))}function Y(s){if(typeof s!="number"&&s&&!s.da){var l=s.src;if(l&&l[yt])an(l.i,s);else{var d=s.type,y=s.proxy;l.removeEventListener?l.removeEventListener(d,y,s.capture):l.detachEvent?l.detachEvent(Qe(d),y):l.addListener&&l.removeListener&&l.removeListener(y),(d=ct(l))?(an(d,s),d.h==0&&(d.src=null,l[Le]=null)):sn(s)}}}function Qe(s){return s in He?He[s]:He[s]="on"+s}function wt(s,l){if(s.da)s=!0;else{l=new at(l,this);var d=s.listener,y=s.ha||s.src;s.fa&&Y(s),s=d.call(y,l)}return s}function ct(s){return s=s[Le],s instanceof on?s:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(s){return typeof s=="function"?s:(s[ge]||(s[ge]=function(l){return s.handleEvent(l)}),s[ge])}function Ee(){Ue.call(this),this.i=new on(this),this.M=this,this.F=null}M(Ee,Ue),Ee.prototype[yt]=!0,Ee.prototype.removeEventListener=function(s,l,d,y){wi(this,s,l,d,y)};function Ne(s,l){var d,y=s.F;if(y)for(d=[];y;y=y.F)d.push(y);if(s=s.M,y=l.type||l,typeof l=="string")l=new De(l,s);else if(l instanceof De)l.target=l.target||s;else{var C=l;l=new De(y,s),b(l,C)}if(C=!0,d)for(var D=d.length-1;0<=D;D--){var L=l.g=d[D];C=_t(L,y,!0,l)&&C}if(L=l.g=s,C=_t(L,y,!0,l)&&C,C=_t(L,y,!1,l)&&C,d)for(D=0;D<d.length;D++)L=l.g=d[D],C=_t(L,y,!1,l)&&C}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var s=this.i,l;for(l in s.g){for(var d=s.g[l],y=0;y<d.length;y++)sn(d[y]);delete s.g[l],s.h--}}this.F=null},Ee.prototype.K=function(s,l,d,y){return this.i.add(String(s),l,!1,d,y)},Ee.prototype.L=function(s,l,d,y){return this.i.add(String(s),l,!0,d,y)};function _t(s,l,d,y){if(l=s.i.g[String(l)],!l)return!0;l=l.concat();for(var C=!0,D=0;D<l.length;++D){var L=l[D];if(L&&!L.da&&L.capture==d){var se=L.listener,Ce=L.ha||L.src;L.fa&&an(s.i,L),C=se.call(Ce,y)!==!1&&C}}return C&&!y.defaultPrevented}function Me(s,l,d){if(typeof s=="function")d&&(s=R(s,d));else if(s&&typeof s.handleEvent=="function")s=R(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:h.setTimeout(s,l||0)}function Ms(s){s.g=Me(()=>{s.g=null,s.i&&(s.i=!1,Ms(s))},s.l);let l=s.h;s.h=null,s.m.apply(null,l)}class Fs extends Ue{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(s){Ue.call(this),this.h=s,this.g={}}M(cn,Ue);var vr=[];function Us(s){ne(s.g,function(l,d){this.g.hasOwnProperty(d)&&Y(l)},s),s.g={}}cn.prototype.N=function(){cn.aa.N.call(this),Us(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _i=h.JSON.stringify,tc=h.JSON.parse,nc=class{stringify(s){return h.JSON.stringify(s,void 0)}parse(s){return h.JSON.parse(s,void 0)}};function ut(){}ut.prototype.h=null;function Bs(s){return s.h||(s.h=s.i())}function qs(){}var xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){De.call(this,"d")}M(vi,De);function Ii(){De.call(this,"c")}M(Ii,De);var lt={},$s=null;function Ir(){return $s=$s||new Ee}lt.La="serverreachability";function js(s){De.call(this,lt.La,s)}M(js,De);function On(s){let l=Ir();Ne(l,new js(l))}lt.STAT_EVENT="statevent";function zs(s,l){De.call(this,lt.STAT_EVENT,s),this.stat=l}M(zs,De);function Pe(s){let l=Ir();Ne(l,new zs(l,s))}lt.Ma="timingevent";function Gs(s,l){De.call(this,lt.Ma,s),this.size=l}M(Gs,De);function Vn(s,l){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){s()},l)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function rc(s,l,d,y,C,D){s.info(function(){if(s.g)if(D)for(var L="",se=D.split("&"),Ce=0;Ce<se.length;Ce++){var ee=se[Ce].split("=");if(1<ee.length){var xe=ee[0];ee=ee[1];var Re=xe.split("_");L=2<=Re.length&&Re[1]=="type"?L+(xe+"="+ee+"&"):L+(xe+"=redacted&")}}else L=null;else L=D;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+l+`
`+d+`
`+L})}function ic(s,l,d,y,C,D,L){s.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+l+`
`+d+`
`+D+" "+L})}function re(s,l,d,y){s.info(function(){return"XMLHTTP TEXT ("+l+"): "+oc(s,d)+(y?" "+y:"")})}function sc(s,l){s.info(function(){return"TIMEOUT: "+l})}Ln.prototype.info=function(){};function oc(s,l){if(!s.g)return l;if(!l)return null;try{var d=JSON.parse(l);if(d){for(s=0;s<d.length;s++)if(Array.isArray(d[s])){var y=d[s];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var D=C[0];if(D!="noop"&&D!="stop"&&D!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return _i(d)}catch{return l}}var Er={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ei;function Tr(){}M(Tr,ut),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},Ei=new Tr;function et(s,l,d,y){this.j=s,this.i=l,this.l=d,this.R=y||1,this.U=new cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var Ti={},ln={};function le(s,l,d){s.L=1,s.v=Ar(tt(l)),s.m=d,s.P=!0,Ks(s,null)}function Ks(s,l){s.F=Date.now(),Mn(s),s.A=tt(s.v);var d=s.A,y=s.R;Array.isArray(y)||(y=[String(y)]),uo(d.i,"t",y),s.C=0,d=s.j.J,s.h=new un,s.g=Fi(s.j,d?l:null,!s.m),0<s.O&&(s.M=new Fs(R(s.Y,s,s.g),s.O)),l=s.U,d=s.g,y=s.ca;var C="readystatechange";Array.isArray(C)||(C&&(vr[0]=C.toString()),C=vr);for(var D=0;D<C.length;D++){var L=Ls(d,C[D],y||l.handleEvent,!1,l.h||l);if(!L)break;l.g[L.key]=L}l=s.H?v(s.H):{},s.m?(s.u||(s.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,l)):(s.u="GET",s.g.ea(s.A,s.u,null,l)),On(),rc(s.i,s.u,s.A,s.l,s.R,s.m)}et.prototype.ca=function(s){s=s.target;let l=this.M;l&&dt(s)==3?l.j():this.Y(s)},et.prototype.Y=function(s){try{if(s==this.g)e:{let Re=dt(this.g);var l=this.g.Ba();let bt=this.g.Z();if(!(3>Re)&&(Re!=3||this.g&&(this.h.h||this.g.oa()||yo(this.g)))){this.J||Re!=4||l==7||(l==8||0>=bt?On(3):On(2)),bi(this);var d=this.g.Z();this.X=d;t:if(Hs(this)){var y=yo(this.g);s="";var C=y.length,D=dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vt(this),Fn(this);var L="";break t}this.h.i=new h.TextDecoder}for(l=0;l<C;l++)this.h.h=!0,s+=this.h.i.decode(y[l],{stream:!(D&&l==C-1)});y.length=0,this.h.g+=s,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=d==200,ic(this.i,this.u,this.A,this.l,this.R,Re,d),this.o){if(this.T&&!this.K){t:{if(this.g){var se,Ce=this.g;if((se=Ce.g?Ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(se)){var ee=se;break t}}ee=null}if(d=ee)re(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ai(this,d);else{this.o=!1,this.s=3,Pe(12),vt(this),Fn(this);break e}}if(this.P){d=!0;let Je;for(;!this.J&&this.C<L.length;)if(Je=ac(this,L),Je==ln){Re==4&&(this.s=4,Pe(14),d=!1),re(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==Ti){this.s=4,Pe(15),re(this.i,this.l,L,"[Invalid Chunk]"),d=!1;break}else re(this.i,this.l,Je,null),Ai(this,Je);if(Hs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||L.length!=0||this.h.h||(this.s=1,Pe(16),d=!1),this.o=this.o&&d,!d)re(this.i,this.l,L,"[Invalid Chunked Response]"),vt(this),Fn(this);else if(0<L.length&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.ba&&!xe.M&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),gn(xe),xe.M=!0,Pe(11))}}else re(this.i,this.l,L,null),Ai(this,L);Re==4&&vt(this),this.o&&!this.J&&(Re==4?Oi(this.j,this):(this.o=!1,Mn(this)))}else gc(this.g),d==400&&0<L.indexOf("Unknown SID")?(this.s=3,Pe(12)):(this.s=0,Pe(13)),vt(this),Fn(this)}}}catch{}finally{}};function Hs(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function ac(s,l){var d=s.C,y=l.indexOf(`
`,d);return y==-1?ln:(d=Number(l.substring(d,y)),isNaN(d)?Ti:(y+=1,y+d>l.length?ln:(l=l.slice(y,y+d),s.C=y+d,l)))}et.prototype.cancel=function(){this.J=!0,vt(this)};function Mn(s){s.S=Date.now()+s.I,Qs(s,s.I)}function Qs(s,l){if(s.B!=null)throw Error("WatchDog timer not null");s.B=Vn(R(s.ba,s),l)}function bi(s){s.B&&(h.clearTimeout(s.B),s.B=null)}et.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(sc(this.i,this.A),this.L!=2&&(On(),Pe(17)),vt(this),this.s=2,Fn(this)):Qs(this,this.S-s)};function Fn(s){s.j.G==0||s.J||Oi(s.j,s)}function vt(s){bi(s);var l=s.M;l&&typeof l.ma=="function"&&l.ma(),s.M=null,Us(s.U),s.g&&(l=s.g,s.g=null,l.abort(),l.ma())}function Ai(s,l){try{var d=s.j;if(d.G!=0&&(d.g==s||Si(d.h,s))){if(!s.K&&Si(d.h,s)&&d.G==3){try{var y=d.Da.g.parse(l)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<s.F)Wn(d),Rr(d);else break e;Gn(d),Pe(18)}}else d.za=C[1],0<d.za-d.T&&37500>C[2]&&d.F&&d.v==0&&!d.C&&(d.C=Vn(R(d.Za,d),6e3));if(1>=Zs(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Tt(d,11)}else if((s.K||d.g==s)&&Wn(d),!Q(l))for(C=d.Da.g.parse(l),l=0;l<C.length;l++){let ee=C[l];if(d.T=ee[0],ee=ee[1],d.G==2)if(ee[0]=="c"){d.K=ee[1],d.ia=ee[2];let xe=ee[3];xe!=null&&(d.la=xe,d.j.info("VER="+d.la));let Re=ee[4];Re!=null&&(d.Aa=Re,d.j.info("SVER="+d.Aa));let bt=ee[5];bt!=null&&typeof bt=="number"&&0<bt&&(y=1.5*bt,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;let Je=s.g;if(Je){let Dr=Je.g?Je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var D=y.h;D.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Pi(D,D.h),D.h=null))}if(y.D){let Bi=Je.g?Je.g.getResponseHeader("X-HTTP-Session-Id"):null;Bi&&(y.ya=Bi,ue(y.I,y.D,Bi))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-s.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var L=s;if(y.qa=Mi(y,y.J?y.ia:null,y.W),L.K){eo(y.h,L);var se=L,Ce=y.L;Ce&&(se.I=Ce),se.B&&(bi(se),Mn(se)),y.g=L}else xi(y);0<d.i.length&&kr(d)}else ee[0]!="stop"&&ee[0]!="close"||Tt(d,7);else d.G==3&&(ee[0]=="stop"||ee[0]=="close"?ee[0]=="stop"?Tt(d,7):Cr(d):ee[0]!="noop"&&d.l&&d.l.ta(ee),d.v=0)}}On(4)}catch{}}var Js=class{constructor(s,l){this.g=s,this.map=l}};function Ys(s){this.l=s||10,h.PerformanceNavigationTiming?(s=h.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xs(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function Zs(s){return s.h?1:s.g?s.g.size:0}function Si(s,l){return s.h?s.h==l:s.g?s.g.has(l):!1}function Pi(s,l){s.g?s.g.add(l):s.h=l}function eo(s,l){s.h&&s.h==l?s.h=null:s.g&&s.g.has(l)&&s.g.delete(l)}Ys.prototype.cancel=function(){if(this.i=to(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function to(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let l=s.i;for(let d of s.g.values())l=l.concat(d.D);return l}return B(s.i)}function no(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(f(s)){for(var l=[],d=s.length,y=0;y<d;y++)l.push(s[y]);return l}l=[],d=0;for(y in s)l[d++]=s[y];return l}function cc(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(f(s)||typeof s=="string"){var l=[];s=s.length;for(var d=0;d<s;d++)l.push(d);return l}l=[],d=0;for(let y in s)l[d++]=y;return l}}}function Ci(s,l){if(s.forEach&&typeof s.forEach=="function")s.forEach(l,void 0);else if(f(s)||typeof s=="string")Array.prototype.forEach.call(s,l,void 0);else for(var d=cc(s),y=no(s),C=y.length,D=0;D<C;D++)l.call(void 0,y[D],d&&d[D],s)}var ro=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uc(s,l){if(s){s=s.split("&");for(var d=0;d<s.length;d++){var y=s[d].indexOf("="),C=null;if(0<=y){var D=s[d].substring(0,y);C=s[d].substring(y+1)}else D=s[d];l(D,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Ge(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Ge){this.h=s.h,br(this,s.j),this.o=s.o,this.g=s.g,hn(this,s.s),this.l=s.l;var l=s.i,d=new qn;d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),Ri(this,d),this.m=s.m}else s&&(l=String(s).match(ro))?(this.h=!1,br(this,l[1]||"",!0),this.o=Un(l[2]||""),this.g=Un(l[3]||"",!0),hn(this,l[4]),this.l=Un(l[5]||"",!0),Ri(this,l[6]||"",!0),this.m=Un(l[7]||"")):(this.h=!1,this.i=new qn(null,this.h))}Ge.prototype.toString=function(){var s=[],l=this.j;l&&s.push(Bn(l,io,!0),":");var d=this.g;return(d||l=="file")&&(s.push("//"),(l=this.o)&&s.push(Bn(l,io,!0),"@"),s.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&s.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&s.push("/"),s.push(Bn(d,d.charAt(0)=="/"?hc:dn,!0))),(d=this.i.toString())&&s.push("?",d),(d=this.m)&&s.push("#",Bn(d,oo)),s.join("")};function tt(s){return new Ge(s)}function br(s,l,d){s.j=d?Un(l,!0):l,s.j&&(s.j=s.j.replace(/:$/,""))}function hn(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.s=l}else s.s=null}function Ri(s,l,d){l instanceof qn?(s.i=l,dc(s.i,s.h)):(d||(l=Bn(l,so)),s.i=new qn(l,s.h))}function ue(s,l,d){s.i.set(l,d)}function Ar(s){return ue(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Un(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Bn(s,l,d){return typeof s=="string"?(s=encodeURI(s).replace(l,lc),d&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function lc(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var io=/[#\/\?@]/g,dn=/[#\?:]/g,hc=/[#\?]/g,so=/[#\?@]/g,oo=/#/g;function qn(s,l){this.h=this.g=null,this.i=s||null,this.j=!!l}function It(s){s.g||(s.g=new Map,s.h=0,s.i&&uc(s.i,function(l,d){s.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}n=qn.prototype,n.add=function(s,l){It(this),this.i=null,s=fn(this,s);var d=this.g.get(s);return d||this.g.set(s,d=[]),d.push(l),this.h+=1,this};function ao(s,l){It(s),l=fn(s,l),s.g.has(l)&&(s.i=null,s.h-=s.g.get(l).length,s.g.delete(l))}function co(s,l){return It(s),l=fn(s,l),s.g.has(l)}n.forEach=function(s,l){It(this),this.g.forEach(function(d,y){d.forEach(function(C){s.call(l,C,y,this)},this)},this)},n.na=function(){It(this);let s=Array.from(this.g.values()),l=Array.from(this.g.keys()),d=[];for(let y=0;y<l.length;y++){let C=s[y];for(let D=0;D<C.length;D++)d.push(l[y])}return d},n.V=function(s){It(this);let l=[];if(typeof s=="string")co(this,s)&&(l=l.concat(this.g.get(fn(this,s))));else{s=Array.from(this.g.values());for(let d=0;d<s.length;d++)l=l.concat(s[d])}return l},n.set=function(s,l){return It(this),this.i=null,s=fn(this,s),co(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[l]),this.h+=1,this},n.get=function(s,l){return s?(s=this.V(s),0<s.length?String(s[0]):l):l};function uo(s,l,d){ao(s,l),0<d.length&&(s.i=null,s.g.set(fn(s,l),B(d)),s.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],l=Array.from(this.g.keys());for(var d=0;d<l.length;d++){var y=l[d];let D=encodeURIComponent(String(y)),L=this.V(y);for(y=0;y<L.length;y++){var C=D;L[y]!==""&&(C+="="+encodeURIComponent(String(L[y]))),s.push(C)}}return this.i=s.join("&")};function fn(s,l){return l=String(l),s.j&&(l=l.toLowerCase()),l}function dc(s,l){l&&!s.j&&(It(s),s.i=null,s.g.forEach(function(d,y){var C=y.toLowerCase();y!=C&&(ao(this,y),uo(this,C,d))},s)),s.j=l}function pn(s,l){let d=new Ln;if(h.Image){let y=new Image;y.onload=N(Et,d,"TestLoadImage: loaded",!0,l,y),y.onerror=N(Et,d,"TestLoadImage: error",!1,l,y),y.onabort=N(Et,d,"TestLoadImage: abort",!1,l,y),y.ontimeout=N(Et,d,"TestLoadImage: timeout",!1,l,y),h.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=s}else l(!1)}function fc(s,l){let d=new Ln,y=new AbortController,C=setTimeout(()=>{y.abort(),Et(d,"TestPingServer: timeout",!1,l)},1e4);fetch(s,{signal:y.signal}).then(D=>{clearTimeout(C),D.ok?Et(d,"TestPingServer: ok",!0,l):Et(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(C),Et(d,"TestPingServer: error",!1,l)})}function Et(s,l,d,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(d)}catch{}}function lo(){this.g=new nc}function pc(s,l,d){let y=d||"";try{Ci(s,function(C,D){let L=C;m(C)&&(L=_i(C)),l.push(y+D+"="+encodeURIComponent(L))})}catch(C){throw l.push(y+"type="+encodeURIComponent("_badmap")),C}}function We(s){this.l=s.Ub||null,this.j=s.eb||!1}M(We,ut),We.prototype.g=function(){return new Sr(this.l,this.j)},We.prototype.i=function(s){return function(){return s}}({});function Sr(s,l){Ee.call(this),this.D=s,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Sr,Ee),n=Sr.prototype,n.open=function(s,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=l,this.readyState=1,$n(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(l.body=s),(this.D||h).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ht(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ki(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function ki(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var l=s.value?s.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!s.done}))&&(this.response=this.responseText+=l)}s.done?ht(this):$n(this),this.readyState==3&&ki(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,ht(this))},n.Qa=function(s){this.g&&(this.response=s,ht(this))},n.ga=function(){this.g&&ht(this)};function ht(s){s.readyState=4,s.l=null,s.j=null,s.v=null,$n(s)}n.setRequestHeader=function(s,l){this.u.append(s,l)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,s.push(d[0]+": "+d[1]),d=l.next();return s.join(`\r
`)};function $n(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Sr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function ho(s){let l="";return ne(s,function(d,y){l+=y,l+=":",l+=d,l+=`\r
`}),l}function Di(s,l,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=ho(d),typeof s=="string"?d!=null&&encodeURIComponent(String(d)):ue(s,l,d))}function he(s){Ee.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(he,Ee);var mn=/^https?$/i,mc=["POST","PUT"];n=he.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,l,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);l=l?l.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ei.g(),this.v=this.o?Bs(this.o):Bs(Ei),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(l,String(s),!0),this.B=!1}catch(D){fo(this,D);return}if(s=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)d.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let D of y.keys())d.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),C=h.FormData&&s instanceof h.FormData,!(0<=Array.prototype.indexOf.call(mc,l,void 0))||y||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,L]of d)this.g.setRequestHeader(D,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{go(this),this.u=!0,this.g.send(s),this.u=!1}catch(D){fo(this,D)}};function fo(s,l){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=l,s.m=5,po(s),Pr(s)}function po(s){s.A||(s.A=!0,Ne(s,"complete"),Ne(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,Ne(this,"complete"),Ne(this,"abort"),Pr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pr(this,!0)),he.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mo(this):this.bb())},n.bb=function(){mo(this)};function mo(s){if(s.h&&typeof a<"u"&&(!s.v[1]||dt(s)!=4||s.Z()!=2)){if(s.u&&dt(s)==4)Me(s.Ea,0,s);else if(Ne(s,"readystatechange"),dt(s)==4){s.h=!1;try{let L=s.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var y;if(y=L===0){var C=String(s.D).match(ro)[1]||null;!C&&h.self&&h.self.location&&(C=h.self.location.protocol.slice(0,-1)),y=!mn.test(C?C.toLowerCase():"")}d=y}if(d)Ne(s,"complete"),Ne(s,"success");else{s.m=6;try{var D=2<dt(s)?s.g.statusText:""}catch{D=""}s.l=D+" ["+s.Z()+"]",po(s)}}finally{Pr(s)}}}}function Pr(s,l){if(s.g){go(s);let d=s.g,y=s.v[0]?()=>{}:null;s.g=null,s.v=null,l||Ne(s,"ready");try{d.onreadystatechange=y}catch{}}}function go(s){s.I&&(h.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function dt(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<dt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var l=this.g.responseText;return s&&l.indexOf(s)==0&&(l=l.substring(s.length)),tc(l)}};function yo(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function gc(s){let l={};s=(s.g&&2<=dt(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<s.length;y++){if(Q(s[y]))continue;var d=A(s[y]);let C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let D=l[C]||[];l[C]=D,D.push(d)}P(l,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jn(s,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[s]||l}function zn(s){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jn("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jn("baseRetryDelayMs",5e3,s),this.cb=jn("retryDelaySeedMs",1e4,s),this.Wa=jn("forwardChannelMaxRetries",2,s),this.wa=jn("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new Ys(s&&s.concurrentRequestLimit),this.Da=new lo,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zn.prototype,n.la=8,n.G=1,n.connect=function(s,l,d,y){Pe(0),this.W=s,this.H=l||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=Mi(this,null,this.W),kr(this)};function Cr(s){if(wo(s),s.G==3){var l=s.U++,d=tt(s.I);if(ue(d,"SID",s.K),ue(d,"RID",l),ue(d,"TYPE","terminate"),Ut(s,d),l=new et(s,s.j,l),l.L=2,l.v=Ar(tt(d)),d=!1,h.navigator&&h.navigator.sendBeacon)try{d=h.navigator.sendBeacon(l.v.toString(),"")}catch{}!d&&h.Image&&(new Image().src=l.v,d=!0),d||(l.g=Fi(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Mn(l)}Li(s)}function Rr(s){s.g&&(gn(s),s.g.cancel(),s.g=null)}function wo(s){Rr(s),s.u&&(h.clearTimeout(s.u),s.u=null),Wn(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&h.clearTimeout(s.s),s.s=null)}function kr(s){if(!Xs(s.h)&&!s.s){s.s=!0;var l=s.Ga;en||Ke(),Ft||(en(),Ft=!0),tn.add(l,s),s.B=0}}function _o(s,l){return Zs(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=l.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=Vn(R(s.Ga,s,l),Vi(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let C=new et(this,this.j,s),D=this.o;if(this.S&&(D?(D=v(D),b(D,this.S)):D=this.S),this.m!==null||this.O||(C.H=D,D=null),this.P)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(l+=y,4096<l){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=Ni(this,C,l),d=tt(this.I),ue(d,"RID",s),ue(d,"CVER",22),this.D&&ue(d,"X-HTTP-Session-Id",this.D),Ut(this,d),D&&(this.O?l="headers="+encodeURIComponent(String(ho(D)))+"&"+l:this.m&&Di(d,this.m,D)),Pi(this.h,C),this.Ua&&ue(d,"TYPE","init"),this.P?(ue(d,"$req",l),ue(d,"SID","null"),C.T=!0,le(C,d,null)):le(C,d,l),this.G=2}}else this.G==3&&(s?vo(this,s):this.i.length==0||Xs(this.h)||vo(this))};function vo(s,l){var d;l?d=l.l:d=s.U++;let y=tt(s.I);ue(y,"SID",s.K),ue(y,"RID",d),ue(y,"AID",s.T),Ut(s,y),s.m&&s.o&&Di(y,s.m,s.o),d=new et(s,s.j,d,s.B+1),s.m===null&&(d.H=s.o),l&&(s.i=l.D.concat(s.i)),l=Ni(s,d,1e3),d.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Pi(s.h,d),le(d,y,l)}function Ut(s,l){s.H&&ne(s.H,function(d,y){ue(l,y,d)}),s.l&&Ci({},function(d,y){ue(l,y,d)})}function Ni(s,l,d){d=Math.min(s.i.length,d);var y=s.l?R(s.l.Na,s.l,s):null;e:{var C=s.i;let D=-1;for(;;){let L=["count="+d];D==-1?0<d?(D=C[0].g,L.push("ofs="+D)):D=0:L.push("ofs="+D);let se=!0;for(let Ce=0;Ce<d;Ce++){let ee=C[Ce].g,xe=C[Ce].map;if(ee-=D,0>ee)D=Math.max(0,C[Ce].g-100),se=!1;else try{pc(xe,L,"req"+ee+"_")}catch{y&&y(xe)}}if(se){y=L.join("&");break e}}}return s=s.i.splice(0,d),l.D=s,y}function xi(s){if(!s.g&&!s.u){s.Y=1;var l=s.Fa;en||Ke(),Ft||(en(),Ft=!0),tn.add(l,s),s.v=0}}function Gn(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=Vn(R(s.Fa,s),Vi(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,Io(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=Vn(R(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pe(10),Rr(this),Io(this))};function gn(s){s.A!=null&&(h.clearTimeout(s.A),s.A=null)}function Io(s){s.g=new et(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var l=tt(s.qa);ue(l,"RID","rpc"),ue(l,"SID",s.K),ue(l,"AID",s.T),ue(l,"CI",s.F?"0":"1"),!s.F&&s.ja&&ue(l,"TO",s.ja),ue(l,"TYPE","xmlhttp"),Ut(s,l),s.m&&s.o&&Di(l,s.m,s.o),s.L&&(s.g.I=s.L);var d=s.g;s=s.ia,d.L=1,d.v=Ar(tt(l)),d.m=null,d.P=!0,Ks(d,s)}n.Za=function(){this.C!=null&&(this.C=null,Rr(this),Gn(this),Pe(19))};function Wn(s){s.C!=null&&(h.clearTimeout(s.C),s.C=null)}function Oi(s,l){var d=null;if(s.g==l){Wn(s),gn(s),s.g=null;var y=2}else if(Si(s.h,l))d=l.D,eo(s.h,l),y=1;else return;if(s.G!=0){if(l.o)if(y==1){d=l.m?l.m.length:0,l=Date.now()-l.F;var C=s.B;y=Ir(),Ne(y,new Gs(y,d)),kr(s)}else xi(s);else if(C=l.s,C==3||C==0&&0<l.X||!(y==1&&_o(s,l)||y==2&&Gn(s)))switch(d&&0<d.length&&(l=s.h,l.i=l.i.concat(d)),C){case 1:Tt(s,5);break;case 4:Tt(s,10);break;case 3:Tt(s,6);break;default:Tt(s,2)}}}function Vi(s,l){let d=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(d*=2),d*l}function Tt(s,l){if(s.j.info("Error code "+l),l==2){var d=R(s.fb,s),y=s.Xa;let C=!y;y=new Ge(y||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||br(y,"https"),Ar(y),C?pn(y.toString(),d):fc(y.toString(),d)}else Pe(2);s.G=0,s.l&&s.l.sa(l),Li(s),wo(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function Li(s){if(s.G=0,s.ka=[],s.l){let l=to(s.h);(l.length!=0||s.i.length!=0)&&(O(s.ka,l),O(s.ka,s.i),s.h.i.length=0,B(s.i),s.i.length=0),s.l.ra()}}function Mi(s,l,d){var y=d instanceof Ge?tt(d):new Ge(d);if(y.g!="")l&&(y.g=l+"."+y.g),hn(y,y.s);else{var C=h.location;y=C.protocol,l=l?l+"."+C.hostname:C.hostname,C=+C.port;var D=new Ge(null);y&&br(D,y),l&&(D.g=l),C&&hn(D,C),d&&(D.l=d),y=D}return d=s.D,l=s.ya,d&&l&&ue(y,d,l),ue(y,"VER",s.la),Ut(s,y),y}function Fi(s,l,d){if(l&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=s.Ca&&!s.pa?new he(new We({eb:d})):new he(s.pa),l.Ha(s.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ui(){}n=Ui.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Kn(){}Kn.prototype.g=function(s,l){return new Te(s,l)};function Te(s,l){Ee.call(this),this.g=new zn(l),this.l=s,this.h=l&&l.messageUrlParams||null,s=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(s?s["X-WebChannel-Content-Type"]=l.messageContentType:s={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(s?s["X-WebChannel-Client-Profile"]=l.va:s={"X-WebChannel-Client-Profile":l.va}),this.g.S=s,(s=l&&l.Sb)&&!Q(s)&&(this.g.m=s),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Q(l)&&(this.g.D=l,s=this.h,s!==null&&l in s&&(s=this.h,l in s&&delete s[l])),this.j=new yn(this)}M(Te,Ee),Te.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Te.prototype.close=function(){Cr(this.g)},Te.prototype.o=function(s){var l=this.g;if(typeof s=="string"){var d={};d.__data__=s,s=d}else this.u&&(d={},d.__data__=_i(s),s=d);l.i.push(new Js(l.Ya++,s)),l.G==3&&kr(l)},Te.prototype.N=function(){this.g.l=null,delete this.j,Cr(this.g),delete this.g,Te.aa.N.call(this)};function Eo(s){vi.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var l=s.__sm__;if(l){e:{for(let d in l){s=d;break e}s=void 0}(this.i=s)&&(s=this.i,l=l!==null&&s in l?l[s]:void 0),this.data=l}else this.data=s}M(Eo,vi);function To(){Ii.call(this),this.status=1}M(To,Ii);function yn(s){this.g=s}M(yn,Ui),yn.prototype.ua=function(){Ne(this.g,"a")},yn.prototype.ta=function(s){Ne(this.g,new Eo(s))},yn.prototype.sa=function(s){Ne(this.g,new To)},yn.prototype.ra=function(){Ne(this.g,"b")},Kn.prototype.createWebChannel=Kn.prototype.g,Te.prototype.send=Te.prototype.o,Te.prototype.open=Te.prototype.m,Te.prototype.close=Te.prototype.close,qu=Ht.createWebChannelTransport=function(){return new Kn},Bu=Ht.getStatEventTarget=function(){return Ir()},Uu=Ht.Event=lt,ra=Ht.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,ss=Ht.ErrorCode=Er,Ws.COMPLETE="complete",Fu=Ht.EventType=Ws,qs.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,Wr=Ht.WebChannel=qs,xv=Ht.FetchXmlHttpFactory=We,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,Mu=Ht.XhrIo=he}).apply(typeof na<"u"?na:typeof self<"u"?self:typeof window<"u"?window:{});var Ff="@firebase/firestore";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var hi="10.14.0";var ar=new vn("@firebase/firestore");function os(){return ar.logLevel}function q(n,...e){if(ar.logLevel<=X.DEBUG){let t=e.map(Eh);ar.debug(`Firestore (${hi}): ${n}`,...t)}}function Jt(n,...e){if(ar.logLevel<=X.ERROR){let t=e.map(Eh);ar.error(`Firestore (${hi}): ${n}`,...t)}}function Zr(n,...e){if(ar.logLevel<=X.WARN){let t=e.map(Eh);ar.warn(`Firestore (${hi}): ${n}`,...t)}}function Eh(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${hi}) INTERNAL ASSERTION FAILED: `+n;throw Jt(e),new Error(e)}function ae(n,e){n||z()}function W(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends Ye{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ca=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Wu=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ve.UNAUTHENTICATED))}shutdown(){}},Ku=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Hu=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ae(this.o===void 0);let r=this.i,i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve(),o=new pt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pt,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let f=o;e.enqueueRetryable(()=>T(this,null,function*(){yield f.promise,yield i(this.currentUser)}))},h=f=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){let f=this.t.getImmediate({optional:!0});f?h(f):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new ca(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new Ve(e)}},Qu=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ju=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Qu(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Yu=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Xu=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ae(this.o===void 0);let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ae(typeof t.token=="string"),this.R=t.token,new Yu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Ov(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ua=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Ov(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function ei(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Fe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new U(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var K=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Fe(0,0))}static max(){return new n(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var la=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),a=t.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},me=class n extends la{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Vv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ze=class n extends la{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Vv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new U(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let h=e[i];if(h==="\\"){if(i+1===e.length)throw new U(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new U(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(a=!a,i++):h!=="."||a?(r+=h,i++):(o(),i++)}if(o(),a)throw new U(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(me.fromString(e))}static fromName(e){return new n(me.fromString(e).popFirst(5))}static empty(){return new n(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new me(e.slice()))}};var Zu=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Zu.UNKNOWN_ID=-1;function Lv(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new Fe(t+1,0):new Fe(t,r));return new cr(i,$.empty(),e)}function Mv(n){return new cr(n.readTime,n.key,-1)}var cr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(K.min(),$.empty(),-1)}static max(){return new n(K.max(),$.empty(),-1)}};function Fv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var Uv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",el=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ks(n){return T(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==Uv)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(h=>{++i,h.next(()=>{++o,a&&o===i&&t()},f=>r(f))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),h=0;for(let f=0;f<o;f++){let m=f;t(e[m]).next(w=>{a[m]=w,++h,h===o&&r(a)},w=>i(w))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Bv(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ds(n){return n.name==="IndexedDbTransactionError"}var _p=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ba(n){return n==null}function ds(n){return n===0&&1/n==-1/0}function qv(n){return typeof n=="number"&&Number.isInteger(n)&&!ds(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var $v=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fb=[...$v,"documentOverlays"],jv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zv=jv,Gv=[...zv,"indexConfiguration","indexState","indexEntries"];var Ub=[...Gv,"globals"];function Uf(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vp(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var we=class n{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jr(this.root,e,this.comparator,!0)}},Jr=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dt=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $e=class n{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ha(this.data.getIterator())}getIteratorFrom(e){return new ha(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ha=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var it=class n{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new n([])}unionWith(e){let t=new $e(Ze.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ei(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var da=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new da("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};je.EMPTY_BYTE_STRING=new je("");var Wv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yt(n){if(ae(!!n),typeof n=="string"){let e=0,t=Wv.exec(n);if(ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fe(n.seconds),nanos:fe(n.nanos)}}function fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cn(n){return typeof n=="string"?je.fromBase64String(n):je.fromUint8Array(n)}function Th(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function bh(n){let e=n.mapValue.fields.__previous_value__;return Th(e)?bh(e):e}function fs(n){let e=Yt(n.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}var tl=class{constructor(e,t,r,i,o,a,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m}},fa=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ia={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ur(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Th(n)?4:Ep(n)?9007199254740991:Ip(n)?10:11:z()}function Ot(n,e){if(n===e)return!0;let t=ur(n);if(t!==ur(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fs(n).isEqual(fs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=Yt(i.timestampValue),h=Yt(o.timestampValue);return a.seconds===h.seconds&&a.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Cn(i.bytesValue).isEqual(Cn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return fe(i.geoPointValue.latitude)===fe(o.geoPointValue.latitude)&&fe(i.geoPointValue.longitude)===fe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return fe(i.integerValue)===fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=fe(i.doubleValue),h=fe(o.doubleValue);return a===h?ds(a)===ds(h):isNaN(a)&&isNaN(h)}return!1}(n,e);case 9:return ei(n.arrayValue.values||[],e.arrayValue.values||[],Ot);case 10:case 11:return function(i,o){let a=i.mapValue.fields||{},h=o.mapValue.fields||{};if(Uf(a)!==Uf(h))return!1;for(let f in a)if(a.hasOwnProperty(f)&&(h[f]===void 0||!Ot(a[f],h[f])))return!1;return!0}(n,e);default:return z()}}function ps(n,e){return(n.values||[]).find(t=>Ot(t,e))!==void 0}function ti(n,e){if(n===e)return 0;let t=ur(n),r=ur(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(o,a){let h=fe(o.integerValue||o.doubleValue),f=fe(a.integerValue||a.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return Bf(n.timestampValue,e.timestampValue);case 4:return Bf(fs(n),fs(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(o,a){let h=Cn(o),f=Cn(a);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let h=o.split("/"),f=a.split("/");for(let m=0;m<h.length&&m<f.length;m++){let w=ie(h[m],f[m]);if(w!==0)return w}return ie(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let h=ie(fe(o.latitude),fe(a.latitude));return h!==0?h:ie(fe(o.longitude),fe(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return qf(n.arrayValue,e.arrayValue);case 10:return function(o,a){var h,f,m,w;let g=o.fields||{},R=a.fields||{},N=(h=g.value)===null||h===void 0?void 0:h.arrayValue,M=(f=R.value)===null||f===void 0?void 0:f.arrayValue,B=ie(((m=N?.values)===null||m===void 0?void 0:m.length)||0,((w=M?.values)===null||w===void 0?void 0:w.length)||0);return B!==0?B:qf(N,M)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===ia.mapValue&&a===ia.mapValue)return 0;if(o===ia.mapValue)return 1;if(a===ia.mapValue)return-1;let h=o.fields||{},f=Object.keys(h),m=a.fields||{},w=Object.keys(m);f.sort(),w.sort();for(let g=0;g<f.length&&g<w.length;++g){let R=ie(f[g],w[g]);if(R!==0)return R;let N=ti(h[f[g]],m[w[g]]);if(N!==0)return N}return ie(f.length,w.length)}(n.mapValue,e.mapValue);default:throw z()}}function Bf(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=Yt(n),r=Yt(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function qf(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ti(t[i],r[i]);if(o)return o}return ie(t.length,r.length)}function ni(n){return nl(n)}function nl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Yt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Cn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=nl(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${nl(t.fields[a])}`;return i+"}"}(n.mapValue):z()}function $f(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rl(n){return!!n&&"integerValue"in n}function Ah(n){return!!n&&"arrayValue"in n}function jf(n){return!!n&&"nullValue"in n}function zf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oa(n){return!!n&&"mapValue"in n}function Ip(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function cs(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return pr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cs(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ep(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Xe=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cs(t)}setAll(e){let t=Ze.emptyPath(),r={},i=[];e.forEach((a,h)=>{if(!t.isImmediateParentOf(h)){let f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=h.popLast()}a?r[h.lastSegment()]=cs(a):i.push(h.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());oa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ot(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(cs(this.value))}};function Tp(n){let e=[];return pr(n.fields,(t,r)=>{let i=new Ze([t]);if(oa(r)){let o=Tp(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new it(e)}var mt=class n{constructor(e,t,r,i,o,a,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=h}static newInvalidDocument(e){return new n(e,0,K.min(),K.min(),K.min(),Xe.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,K.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,K.min(),K.min(),Xe.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,K.min(),K.min(),Xe.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ri=class{constructor(e,t){this.position=e,this.inclusive=t}};function Gf(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(a.referenceValue),t.key):r=ti(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wf(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ot(n.position[t],e.position[t]))return!1;return!0}var lr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Kv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var pa=class{},Se=class n extends pa{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sl(e,t,r):t==="array-contains"?new cl(e,r):t==="in"?new ul(e,r):t==="not-in"?new ll(e,r):t==="array-contains-any"?new hl(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ol(e,r):new al(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ti(t,this.value)):t!==null&&ur(this.value)===ur(t)&&this.matchesComparison(ti(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gt=class n extends pa{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return bp(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function bp(n){return n.op==="and"}function Ap(n){return Hv(n)&&bp(n)}function Hv(n){for(let e of n.filters)if(e instanceof gt)return!1;return!0}function il(n){if(n instanceof Se)return n.field.canonicalString()+n.op.toString()+ni(n.value);if(Ap(n))return n.filters.map(e=>il(e)).join(",");{let e=n.filters.map(t=>il(t)).join(",");return`${n.op}(${e})`}}function Sp(n,e){return n instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&Ot(r.value,i.value)}(n,e):n instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,h)=>o&&Sp(a,i.filters[h]),!0):!1}(n,e):void z()}function Pp(n){return n instanceof Se?function(t){return`${t.field.canonicalString()} ${t.op} ${ni(t.value)}`}(n):n instanceof gt?function(t){return t.op.toString()+" {"+t.getFilters().map(Pp).join(" ,")+"}"}(n):"Filter"}var sl=class extends Se{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},ol=class extends Se{constructor(e,t){super(e,"in",t),this.keys=Cp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},al=class extends Se{constructor(e,t){super(e,"not-in",t),this.keys=Cp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Cp(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var cl=class extends Se{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ah(t)&&ps(t.arrayValue,this.value)}},ul=class extends Se{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ps(this.value.arrayValue,t)}},ll=class extends Se{constructor(e,t){super(e,"not-in",t)}matches(e){if(ps(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ps(this.value.arrayValue,t)}},hl=class extends Se{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ah(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ps(this.value.arrayValue,r))}};var dl=class{constructor(e,t=null,r=[],i=[],o=null,a=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=h,this.ue=null}};function Kf(n,e=null,t=[],r=[],i=null,o=null,a=null){return new dl(n,e,t,r,i,o,a)}function Sh(n){let e=W(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>il(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ba(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ni(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ni(r)).join(",")),e.ue=t}return e.ue}function Ph(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Kv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Sp(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wf(n.startAt,e.startAt)&&Wf(n.endAt,e.endAt)}function fl(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Rn=class{constructor(e,t=null,r=[],i=[],o=null,a="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Qv(n,e,t,r,i,o,a,h){return new Rn(n,e,t,r,i,o,a,h)}function qa(n){return new Rn(n)}function Hf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Rp(n){return n.collectionGroup!==null}function us(n){let e=W(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let h=new $e(Ze.comparator);return a.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new lr(o,r))}),t.has(Ze.keyField().canonicalString())||e.ce.push(new lr(Ze.keyField(),r))}return e.ce}function Nt(n){let e=W(n);return e.le||(e.le=Jv(e,us(n))),e.le}function Jv(n,e){if(n.limitType==="F")return Kf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new lr(i.field,o)});let t=n.endAt?new ri(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ri(n.startAt.position,n.startAt.inclusive):null;return Kf(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pl(n,e){let t=n.filters.concat([e]);return new Rn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ml(n,e,t){return new Rn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $a(n,e){return Ph(Nt(n),Nt(e))&&n.limitType===e.limitType}function kp(n){return`${Sh(Nt(n))}|lt:${n.limitType}`}function Kr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Pp(i)).join(", ")}]`),Ba(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ni(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ni(i)).join(",")),`Target(${r})`}(Nt(n))}; limitType=${n.limitType})`}function ja(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of us(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,h,f){let m=Gf(a,h,f);return a.inclusive?m<=0:m<0}(r.startAt,us(r),i)||r.endAt&&!function(a,h,f){let m=Gf(a,h,f);return a.inclusive?m>=0:m>0}(r.endAt,us(r),i))}(n,e)}function Yv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Dp(n){return(e,t)=>{let r=!1;for(let i of us(n)){let o=Xv(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Xv(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,a,h){let f=a.data.field(o),m=h.data.field(o);return f!==null&&m!==null?ti(f,m):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var kn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return vp(this.inner)}size(){return this.innerSize}};var Zv=new we($.comparator);function Xt(){return Zv}var Np=new we($.comparator);function as(...n){let e=Np;for(let t of n)e=e.insert(t.key,t);return e}function xp(n){let e=Np;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ir(){return ls()}function Op(){return ls()}function ls(){return new kn(n=>n.toString(),(n,e)=>n.isEqual(e))}var eI=new we($.comparator),tI=new $e($.comparator);function Z(...n){let e=tI;for(let t of n)e=e.add(t);return e}var nI=new $e(ie);function rI(){return nI}function Ch(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ds(e)?"-0":e}}function Vp(n){return{integerValue:""+n}}function iI(n,e){return qv(e)?Vp(e):Ch(n,e)}var ii=class{constructor(){this._=void 0}};function sI(n,e,t){return n instanceof si?function(i,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Th(o)&&(o=bh(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof hr?Mp(n,e):n instanceof dr?Fp(n,e):function(i,o){let a=Lp(i,o),h=Qf(a)+Qf(i.Pe);return rl(a)&&rl(i.Pe)?Vp(h):Ch(i.serializer,h)}(n,e)}function oI(n,e,t){return n instanceof hr?Mp(n,e):n instanceof dr?Fp(n,e):t}function Lp(n,e){return n instanceof oi?function(r){return rl(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var si=class extends ii{},hr=class extends ii{constructor(e){super(),this.elements=e}};function Mp(n,e){let t=Up(e);for(let r of n.elements)t.some(i=>Ot(i,r))||t.push(r);return{arrayValue:{values:t}}}var dr=class extends ii{constructor(e){super(),this.elements=e}};function Fp(n,e){let t=Up(e);for(let r of n.elements)t=t.filter(i=>!Ot(i,r));return{arrayValue:{values:t}}}var oi=class extends ii{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Qf(n){return fe(n.integerValue||n.doubleValue)}function Up(n){return Ah(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function aI(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof hr&&i instanceof hr||r instanceof dr&&i instanceof dr?ei(r.elements,i.elements,Ot):r instanceof oi&&i instanceof oi?Ot(r.Pe,i.Pe):r instanceof si&&i instanceof si}(n.transform,e.transform)}var gl=class{constructor(e,t){this.version=e,this.transformResults=t}},Qt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function aa(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ai=class{};function Bp(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ms(n.key,Qt.none()):new fr(n.key,n.data,Qt.none());{let t=n.data,r=Xe.empty(),i=new $e(Ze.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Vt(n.key,r,new it(i.toArray()),Qt.none())}}function cI(n,e,t){n instanceof fr?function(i,o,a){let h=i.value.clone(),f=Yf(i.fieldTransforms,o,a.transformResults);h.setAll(f),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Vt?function(i,o,a){if(!aa(i.precondition,o))return void o.convertToUnknownDocument(a.version);let h=Yf(i.fieldTransforms,o,a.transformResults),f=o.data;f.setAll(qp(i)),f.setAll(h),o.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function hs(n,e,t,r){return n instanceof fr?function(o,a,h,f){if(!aa(o.precondition,a))return h;let m=o.value.clone(),w=Xf(o.fieldTransforms,f,a);return m.setAll(w),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vt?function(o,a,h,f){if(!aa(o.precondition,a))return h;let m=Xf(o.fieldTransforms,f,a),w=a.data;return w.setAll(qp(o)),w.setAll(m),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,a,h){return aa(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):h}(n,e,t)}function uI(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Lp(r.transform,i||null);o!=null&&(t===null&&(t=Xe.empty()),t.set(r.field,o))}return t||null}function Jf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ei(r,i,(o,a)=>aI(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var fr=class extends ai{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Vt=class extends ai{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function qp(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Yf(n,e,t){let r=new Map;ae(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,h=e.data.field(o.field);r.set(o.field,oI(a,h,t[i]))}return r}function Xf(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,sI(o,a,e))}return r}var ms=class extends ai{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},yl=class extends ai{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&cI(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hs(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Op();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,h=this.applyToLocalView(a,o.mutatedFields);h=t.has(i.key)?null:h;let f=Bp(a,h);f!==null&&r.set(i.key,f),a.isValidDocument()||a.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Z())}isEqual(e){return this.batchId===e.batchId&&ei(this.mutations,e.mutations,(t,r)=>Jf(t,r))&&ei(this.baseMutations,e.baseMutations,(t,r)=>Jf(t,r))}},_l=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ae(e.mutations.length===r.length);let i=function(){return eI}(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var vl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Il=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var be,te;function lI(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function $p(n){if(n===void 0)return Jt("GRPC error has no .code"),x.UNKNOWN;switch(n){case be.OK:return x.OK;case be.CANCELLED:return x.CANCELLED;case be.UNKNOWN:return x.UNKNOWN;case be.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case be.INTERNAL:return x.INTERNAL;case be.UNAVAILABLE:return x.UNAVAILABLE;case be.UNAUTHENTICATED:return x.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case be.NOT_FOUND:return x.NOT_FOUND;case be.ALREADY_EXISTS:return x.ALREADY_EXISTS;case be.PERMISSION_DENIED:return x.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case be.ABORTED:return x.ABORTED;case be.OUT_OF_RANGE:return x.OUT_OF_RANGE;case be.UNIMPLEMENTED:return x.UNIMPLEMENTED;case be.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(te=be||(be={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";var Zf=null;function hI(){return new TextEncoder}var dI=new Sn([4294967295,4294967295],0);function ep(n){let e=hI().encode(n),t=new Lu;return t.update(e),new Uint8Array(t.digest())}function tp(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Sn([t,r],0),new Sn([i,o],0)]}var El=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sr(`Invalid padding: ${t}`);if(r<0)throw new sr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new sr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Sn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Sn.fromNumber(r)));return i.compare(dI)===1&&(i=new Sn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=ep(e),[r,i]=tp(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(h=>a.insert(h)),a}insert(e){if(this.Ie===0)return;let t=ep(e),[r,i]=tp(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},sr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ma=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,gs.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(K.min(),i,new we(ie),Xt(),Z())}},gs=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Z(),Z(),Z())}};var Yr=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},ga=class{constructor(e,t){this.targetId=e,this.me=t}},ya=class{constructor(e,t,r=je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},wa=class{constructor(){this.fe=0,this.ge=rp(),this.pe=je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Z(),t=Z(),r=Z();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new gs(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=rp()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Tl=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xt(),this.qe=np(),this.Qe=new we(ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(fl(o))if(r===0){let a=new $(o.path);this.Ue(t,a,mt.newNoDocument(a,K.min()))}else ae(r===1);else{let a=this.Ye(t);if(a!==r){let h=this.Ze(e),f=h?this.Xe(h,e,a):1;if(f!==0){this.je(t);let m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}Zf?.et(function(w,g,R,N,M){var B,O,G,Q,J,ce;let ve={localCacheCount:w,existenceFilterCount:g.count,databaseId:R.database,projectId:R.projectId},ne=g.unchangedNames;return ne&&(ve.bloomFilter={applied:M===0,hashCount:(B=ne?.hashCount)!==null&&B!==void 0?B:0,bitmapLength:(Q=(G=(O=ne?.bits)===null||O===void 0?void 0:O.bitmap)===null||G===void 0?void 0:G.length)!==null&&Q!==void 0?Q:0,padding:(ce=(J=ne?.bits)===null||J===void 0?void 0:J.padding)!==null&&ce!==void 0?ce:0,mightContain:P=>{var v;return(v=N?.mightContain(P))!==null&&v!==void 0&&v}}),ve}(a,e.me,this.Le.tt(),h,f))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,h;try{a=Cn(r).toUint8Array()}catch(f){if(f instanceof da)return Zr("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new El(a,i,o)}catch(f){return Zr(f instanceof sr?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.Le.tt(),h=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let h=this.Je(a);if(h){if(o.current&&fl(h.target)){let f=new $(h.target.path);this.ke.get(f)!==null||this.it(a,f)||this.Ue(a,f,mt.newNoDocument(f,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let r=Z();this.qe.forEach((o,a)=>{let h=!0;a.forEachWhile(f=>{let m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let i=new ma(e,t,this.Qe,this.ke,r);return this.ke=Xt(),this.qe=np(),this.Qe=new we(ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new wa,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $e(ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wa),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function np(){return new we($.comparator)}function rp(){return new we($.comparator)}var fI={asc:"ASCENDING",desc:"DESCENDING"},pI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mI={and:"AND",or:"OR"},bl=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Al(n,e){return n.useProto3Json||Ba(e)?e:{value:e}}function _a(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jp(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gI(n,e){return _a(n,e.toTimestamp())}function xt(n){return ae(!!n),K.fromTimestamp(function(t){let r=Yt(t);return new Fe(r.seconds,r.nanos)}(n))}function Rh(n,e){return Sl(n,e).canonicalString()}function Sl(n,e){let t=function(i){return new me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function zp(n){let e=me.fromString(n);return ae(Qp(e)),e}function Pl(n,e){return Rh(n.databaseId,e.path)}function $u(n,e){let t=zp(e);if(t.get(1)!==n.databaseId.projectId)throw new U(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(Wp(t))}function Gp(n,e){return Rh(n.databaseId,e)}function yI(n){let e=zp(n);return e.length===4?me.emptyPath():Wp(e)}function Cl(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Wp(n){return ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ip(n,e,t){return{name:Pl(n,e),fields:t.value.mapValue.fields}}function wI(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(m,w){return m.useProto3Json?(ae(w===void 0||typeof w=="string"),je.fromBase64String(w||"")):(ae(w===void 0||w instanceof Buffer||w instanceof Uint8Array),je.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,h=a&&function(m){let w=m.code===void 0?x.UNKNOWN:$p(m.code);return new U(w,m.message||"")}(a);t=new ya(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=$u(n,r.document.name),o=xt(r.document.updateTime),a=r.document.createTime?xt(r.document.createTime):K.min(),h=new Xe({mapValue:{fields:r.document.fields}}),f=mt.newFoundDocument(i,o,a,h),m=r.targetIds||[],w=r.removedTargetIds||[];t=new Yr(m,w,f.key,f)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=$u(n,r.document),o=r.readTime?xt(r.readTime):K.min(),a=mt.newNoDocument(i,o),h=r.removedTargetIds||[];t=new Yr([],h,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=$u(n,r.document),o=r.removedTargetIds||[];t=new Yr([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new Il(i,o),h=r.targetId;t=new ga(h,a)}}return t}function _I(n,e){let t;if(e instanceof fr)t={update:ip(n,e.key,e.value)};else if(e instanceof ms)t={delete:Pl(n,e.key)};else if(e instanceof Vt)t={update:ip(n,e.key,e.data),updateMask:CI(e.fieldMask)};else{if(!(e instanceof yl))return z();t={verify:Pl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,a){let h=a.transform;if(h instanceof si)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof hr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof dr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof oi)return{fieldPath:a.field.canonicalString(),increment:h.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:gI(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function vI(n,e){return n&&n.length>0?(ae(e!==void 0),n.map(t=>function(i,o){let a=i.updateTime?xt(i.updateTime):xt(o);return a.isEqual(K.min())&&(a=xt(o)),new gl(a,i.transformResults||[])}(t,e))):[]}function II(n,e){return{documents:[Gp(n,e.path)]}}function EI(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Gp(n,i);let o=function(m){if(m.length!==0)return Hp(gt.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(m){if(m.length!==0)return m.map(w=>function(R){return{field:Hr(R.field),direction:AI(R.dir)}}(w))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let h=Al(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:i}}function TI(n){let e=yI(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ae(r===1);let w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let o=[];t.where&&(o=function(g){let R=Kp(g);return R instanceof gt&&Ap(R)?R.getFilters():[R]}(t.where));let a=[];t.orderBy&&(a=function(g){return g.map(R=>function(M){return new lr(Qr(M.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(R))}(t.orderBy));let h=null;t.limit&&(h=function(g){let R;return R=typeof g=="object"?g.value:g,Ba(R)?null:R}(t.limit));let f=null;t.startAt&&(f=function(g){let R=!!g.before,N=g.values||[];return new ri(N,R)}(t.startAt));let m=null;return t.endAt&&(m=function(g){let R=!g.before,N=g.values||[];return new ri(N,R)}(t.endAt)),Qv(e,i,a,o,h,"F",f,m)}function bI(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kp(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Qr(t.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qr(t.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qr(t.unaryFilter.field);return Se.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Qr(t.unaryFilter.field);return Se.create(a,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return Se.create(Qr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gt.create(t.compositeFilter.filters.map(r=>Kp(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function AI(n){return fI[n]}function SI(n){return pI[n]}function PI(n){return mI[n]}function Hr(n){return{fieldPath:n.canonicalString()}}function Qr(n){return Ze.fromServerFormat(n.fieldPath)}function Hp(n){return n instanceof Se?function(t){if(t.op==="=="){if(zf(t.value))return{unaryFilter:{field:Hr(t.field),op:"IS_NAN"}};if(jf(t.value))return{unaryFilter:{field:Hr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zf(t.value))return{unaryFilter:{field:Hr(t.field),op:"IS_NOT_NAN"}};if(jf(t.value))return{unaryFilter:{field:Hr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hr(t.field),op:SI(t.op),value:t.value}}}(n):n instanceof gt?function(t){let r=t.getFilters().map(i=>Hp(i));return r.length===1?r[0]:{compositeFilter:{op:PI(t.op),filters:r}}}(n):z()}function CI(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qp(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ys=class n{constructor(e,t,r,i,o=K.min(),a=K.min(),h=je.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Rl=class{constructor(e){this.ct=e}};function RI(n){let e=TI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ml(e,e.limit,"L"):e}var va=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(fe(e.integerValue));else if("doubleValue"in e){let r=fe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ds(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Yt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Cn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Ep(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ip(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let a="value",h=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(fe(h)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};va.vt=new va;var kl=class{constructor(){this.un=new Dl}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(cr.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},Dl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $e(me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $e(me.comparator)).toArray()}};var qb=new Uint8Array(0);var kt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(41943040,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);var ws=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Nl=class{constructor(){this.changes=new kn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var xl=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ol=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hs(r.mutation,i,it.empty(),Fe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Z()){let i=ir();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=as();return o.forEach((h,f)=>{a=a.insert(h,f.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Z()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,h)=>{t.set(a,h)})})}computeViews(e,t,r,i){let o=Xt(),a=ls(),h=function(){return ls()}();return t.forEach((f,m)=>{let w=r.get(m.key);i.has(m.key)&&(w===void 0||w.mutation instanceof Vt)?o=o.insert(m.key,m):w!==void 0?(a.set(m.key,w.mutation.getFieldMask()),hs(w.mutation,m,w.mutation.getFieldMask(),Fe.now())):a.set(m.key,it.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((m,w)=>a.set(m,w)),t.forEach((m,w)=>{var g;return h.set(m,new xl(w,(g=a.get(m))!==null&&g!==void 0?g:null))}),h))}recalculateAndSaveOverlays(e,t){let r=ls(),i=new we((a,h)=>a-h),o=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let h of a)h.keys().forEach(f=>{let m=t.get(f);if(m===null)return;let w=r.get(f)||it.empty();w=h.applyToLocalView(m,w),r.set(f,w);let g=(i.get(h.batchId)||Z()).add(f);i=i.insert(h.batchId,g)})}).next(()=>{let a=[],h=i.getReverseIterator();for(;h.hasNext();){let f=h.getNext(),m=f.key,w=f.value,g=Op();w.forEach(R=>{if(!o.has(R)){let N=Bp(t.get(R),r.get(R));N!==null&&g.set(R,N),o=o.add(R)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,g))}return V.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(ir()),h=-1,f=o;return a.next(m=>V.forEach(m,(w,g)=>(h<g.largestBatchId&&(h=g.largestBatchId),o.get(w)?V.resolve():this.remoteDocumentCache.getEntry(e,w).next(R=>{f=f.insert(w,R)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,f,m,Z())).next(w=>({batchId:h,changes:xp(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=as();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=as();return this.indexManager.getCollectionParents(e,o).next(h=>V.forEach(h,f=>{let m=function(g,R){return new Rn(R,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(w=>{w.forEach((g,R)=>{a=a.insert(g,R)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((f,m)=>{let w=m.getKey();a.get(w)===null&&(a=a.insert(w,mt.newInvalidDocument(w)))});let h=as();return a.forEach((f,m)=>{let w=o.get(f);w!==void 0&&hs(w.mutation,m,it.empty(),Fe.now()),ja(t,m)&&(h=h.insert(f,m))}),h})}};var Vl=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:xt(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:RI(i.bundledQuery),readTime:xt(i.readTime)}}(t)),V.resolve()}};var Ll=class{constructor(){this.overlays=new we($.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ir();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=ir(),o=t.length+1,a=new $(t.child("")),h=this.overlays.getIteratorFrom(a);for(;h.hasNext();){let f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new we((m,w)=>m-w),a=this.overlays.getIterator();for(;a.hasNext();){let m=a.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let w=o.get(m.largestBatchId);w===null&&(w=ir(),o=o.insert(m.largestBatchId,w)),w.set(m.getKey(),m)}}let h=ir(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,w)=>h.set(m,w)),!(h.size()>=i)););return V.resolve(h)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new vl(t,r));let o=this.Ir.get(t);o===void 0&&(o=Z(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Ml=class{constructor(){this.sessionToken=je.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var _s=class{constructor(){this.Tr=new $e(Ae.Er),this.dr=new $e(Ae.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ae(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ae(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new me([])),r=new Ae(t,e),i=new Ae(t,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new me([])),r=new Ae(t,e),i=new Ae(t,e+1),o=Z();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new Ae(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ae=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ie(e.wr,t.wr)}static Ar(e,t){return ie(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Fl=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new $e(Ae.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new wl(o,t,r,i);this.mutationQueue.push(a);for(let h of i)this.br=this.br.add(new Ae(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return V.resolve(a)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ae(t,0),i=new Ae(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{let h=this.Dr(a.wr);o.push(h)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $e(ie);return t.forEach(i=>{let o=new Ae(i,0),a=new Ae(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],h=>{r=r.add(h.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let a=new Ae(new $(o),0),h=new $e(ie);return this.br.forEachWhile(f=>{let m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(f.wr)),!0)},a),V.resolve(this.Cr(h))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ae(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(t.mutations,i=>{let o=new Ae(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ae(t,0),i=this.br.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Ul=class{constructor(e){this.Mr=e,this.docs=function(){return new we($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=Xt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():mt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Xt(),a=t.path,h=new $(a.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){let{key:m,value:{document:w}}=f.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||Fv(Mv(w),r)<=0||(i.has(w.key)||ja(t,w))&&(o=o.insert(w.key,w.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bl(this)}getSize(e){return V.resolve(this.size)}},Bl=class extends Nl{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var ql=class{constructor(e){this.persistence=e,this.Nr=new kn(t=>Sh(t),Ph),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _s,this.targetCount=0,this.kr=ws.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ws(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((a,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var $l=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new _p(0),this.Kr=!1,this.Kr=!0,this.$r=new Ml,this.referenceDelegate=e(this),this.Ur=new ql(this),this.indexManager=new kl,this.remoteDocumentCache=function(i){return new Ul(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Rl(t),this.Gr=new Vl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ll,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Fl(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new jl(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},jl=class extends el{constructor(e){super(),this.currentSequenceNumber=e}},zl=class n{constructor(e){this.persistence=e,this.Jr=new _s,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,K.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Gl=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Z(),i=Z();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Wl=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Kl=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vd()?8:Bv(Oe())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new Wl;return this.Xi(e,t,a).next(h=>{if(o.result=h,this.zi)return this.es(e,t,a,h.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(os()<=X.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Kr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(os()<=X.DEBUG&&q("QueryEngine","Query:",Kr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(os()<=X.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Kr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nt(t))):V.resolve())}Yi(e,t){if(Hf(t))return V.resolve(null);let r=Nt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ml(t,null,"F"),r=Nt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=Z(...o);return this.Ji.getDocuments(e,a).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{let m=this.ts(t,h);return this.ns(t,m,a,f.readTime)?this.Yi(e,ml(t,null,"F")):this.rs(e,m,t,f)}))})))}Zi(e,t,r,i){return Hf(t)||i.isEqual(K.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let a=this.ts(t,o);return this.ns(t,a,r,i)?V.resolve(null):(os()<=X.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Kr(t)),this.rs(e,a,t,Lv(i,-1)).next(h=>h))})}ts(e,t){let r=new $e(Dp(e));return t.forEach((i,o)=>{ja(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return os()<=X.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Kr(t)),this.Ji.getDocumentsMatchingQuery(e,t,cr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var Hl=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new we(ie),this._s=new kn(o=>Sh(o),Ph),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ol(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function kI(n,e,t,r){return new Hl(n,e,t,r)}function Jp(n,e){return T(this,null,function*(){let t=W(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],h=[],f=Z();for(let m of i){a.push(m.batchId);for(let w of m.mutations)f=f.add(w.key)}for(let m of o){h.push(m.batchId);for(let w of m.mutations)f=f.add(w.key)}return t.localDocuments.getDocuments(r,f).next(m=>({hs:m,removedBatchIds:a,addedBatchIds:h}))})})})}function DI(n,e){let t=W(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,f,m,w){let g=m.batch,R=g.keys(),N=V.resolve();return R.forEach(M=>{N=N.next(()=>w.getEntry(f,M)).next(B=>{let O=m.docVersions.get(M);ae(O!==null),B.version.compareTo(O)<0&&(g.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),w.addEntry(B)))})}),N.next(()=>h.mutationQueue.removeMutationBatch(f,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Z();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Yp(n){let e=W(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function NI(n,e){let t=W(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let h=[];e.targetChanges.forEach((w,g)=>{let R=i.get(g);if(!R)return;h.push(t.Ur.removeMatchingKeys(o,w.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(o,w.addedDocuments,g)));let N=R.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?N=N.withResumeToken(je.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,r)),i=i.insert(g,N),function(B,O,G){return B.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(R,N,w)&&h.push(t.Ur.updateTargetData(o,N))});let f=Xt(),m=Z();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,w))}),h.push(xI(o,a,e.documentUpdates).next(w=>{f=w.Ps,m=w.Is})),!r.isEqual(K.min())){let w=t.Ur.getLastRemoteSnapshotVersion(o).next(g=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(w)}return V.waitFor(h).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,m)).next(()=>f)}).then(o=>(t.os=i,o))}function xI(n,e,t){let r=Z(),i=Z();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=Xt();return t.forEach((h,f)=>{let m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(K.min())?(e.removeEntry(h,f.readTime),a=a.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),a=a.insert(h,f)):q("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{Ps:a,Is:i}})}function OI(n,e){let t=W(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VI(n,e){let t=W(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new ys(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ql(n,e,t){return T(this,null,function*(){let r=W(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Ds(a))throw a;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function sp(n,e,t){let r=W(n),i=K.min(),o=Z();return r.persistence.runTransaction("Execute query","readwrite",a=>function(f,m,w){let g=W(f),R=g._s.get(w);return R!==void 0?V.resolve(g.os.get(R)):g.Ur.getTargetData(m,w)}(r,a,Nt(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,h.targetId).next(f=>{o=f})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:K.min(),t?o:Z())).next(h=>(LI(r,Yv(e),h),{documents:h,Ts:o})))}function LI(n,e,t){let r=n.us.get(e)||K.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Ia=class{constructor(){this.activeTargetIds=rI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Jl=class{constructor(){this.so=new Ia,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ia,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Yl=class{_o(e){}shutdown(){}};var Ea=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sa=null;function ju(){return sa===null?sa=function(){return 268435456+Math.round(2147483648*Math.random())}():sa++,"0x"+sa.toString(16)}var MI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Xl=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var qe="WebChannelConnection",Zl=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,a){let h=ju(),f=this.xo(t,r.toUriEncodedString());q("RestConnection",`Sending RPC '${t}' ${h}:`,f,i);let m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,a),this.No(t,f,m,i).then(w=>(q("RestConnection",`Received RPC '${t}' ${h}: `,w),w),w=>{throw Zr("RestConnection",`RPC '${t}' ${h} failed with error: `,w,"url: ",f,"request:",i),w})}Lo(t,r,i,o,a,h){return this.Mo(t,r,i,o,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hi}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>t[a]=o),i&&i.headers.forEach((o,a)=>t[a]=o)}xo(t,r){let i=MI[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=ju();return new Promise((a,h)=>{let f=new Mu;f.setWithCredentials(!0),f.listenOnce(Fu.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ss.NO_ERROR:let w=f.getResponseJson();q(qe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(w)),a(w);break;case ss.TIMEOUT:q(qe,`RPC '${e}' ${o} timed out`),h(new U(x.DEADLINE_EXCEEDED,"Request time out"));break;case ss.HTTP_ERROR:let g=f.getStatus();if(q(qe,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let R=f.getResponseJson();Array.isArray(R)&&(R=R[0]);let N=R?.error;if(N&&N.status&&N.message){let M=function(O){let G=O.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(G)>=0?G:x.UNKNOWN}(N.status);h(new U(M,N.message))}else h(new U(x.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new U(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{q(qe,`RPC '${e}' ${o} completed.`)}});let m=JSON.stringify(i);q(qe,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",m,r,15)})}Bo(e,t,r){let i=ju(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qu(),h=Bu(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;let w=o.join("");q(qe,`Creating RPC '${e}' stream ${i}: ${w}`,f);let g=a.createWebChannel(w,f),R=!1,N=!1,M=new Xl({Io:O=>{N?q(qe,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(R||(q(qe,`Opening RPC '${e}' stream ${i} transport.`),g.open(),R=!0),q(qe,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},To:()=>g.close()}),B=(O,G,Q)=>{O.listen(G,J=>{try{Q(J)}catch(ce){setTimeout(()=>{throw ce},0)}})};return B(g,Wr.EventType.OPEN,()=>{N||(q(qe,`RPC '${e}' stream ${i} transport opened.`),M.yo())}),B(g,Wr.EventType.CLOSE,()=>{N||(N=!0,q(qe,`RPC '${e}' stream ${i} transport closed`),M.So())}),B(g,Wr.EventType.ERROR,O=>{N||(N=!0,Zr(qe,`RPC '${e}' stream ${i} transport errored:`,O),M.So(new U(x.UNAVAILABLE,"The operation could not be completed")))}),B(g,Wr.EventType.MESSAGE,O=>{var G;if(!N){let Q=O.data[0];ae(!!Q);let J=Q,ce=J.error||((G=J[0])===null||G===void 0?void 0:G.error);if(ce){q(qe,`RPC '${e}' stream ${i} received error:`,ce);let ve=ce.status,ne=function(I){let b=be[I];if(b!==void 0)return $p(b)}(ve),P=ce.message;ne===void 0&&(ne=x.INTERNAL,P="Unknown error status: "+ve+" with message "+ce.message),N=!0,M.So(new U(ne,P)),g.close()}else q(qe,`RPC '${e}' stream ${i} received:`,Q),M.bo(Q)}}),B(h,Uu.STAT_EVENT,O=>{O.stat===ra.PROXY?q(qe,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===ra.NOPROXY&&q(qe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}};function zu(){return typeof document<"u"?document:null}function za(n){return new bl(n,!0)}var Ta=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ba=class{constructor(e,t,r,i,o,a,h,f){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ta(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return T(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return T(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return T(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Jt(t.toString()),Jt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new U(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>T(this,null,function*(){this.state=0,this.start()}))}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},eh=class extends ba{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=wI(this.serializer,e),r=function(o){if(!("targetChange"in o))return K.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?K.min():a.readTime?xt(a.readTime):K.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Cl(this.serializer),t.addTarget=function(o,a){let h,f=a.target;if(h=fl(f)?{documents:II(o,f)}:{query:EI(o,f)._t},h.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){h.resumeToken=jp(o,a.resumeToken);let m=Al(o,a.expectedCount);m!==null&&(h.expectedCount=m)}else if(a.snapshotVersion.compareTo(K.min())>0){h.readTime=_a(o,a.snapshotVersion.toTimestamp());let m=Al(o,a.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);let r=bI(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Cl(this.serializer),t.removeTarget=e,this.a_(t)}},th=class extends ba{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ae(!!e.streamToken),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=vI(e.writeResults,e.commitTime),r=xt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Cl(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_I(this.serializer,r))};this.a_(t)}};var nh=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Sl(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,h])=>this.connection.Lo(e,Sl(t,r),i,a,h,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new U(x.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},rh=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jt(t),this.D_=!1):q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var ih=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(()=>T(this,null,function*(){mr(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(f){return T(this,null,function*(){let m=W(f);m.L_.add(4),yield Ns(m),m.q_.set("Unknown"),m.L_.delete(4),yield Ga(m)})}(this))}))}),this.q_=new rh(r,i)}};function Ga(n){return T(this,null,function*(){if(mr(n))for(let e of n.B_)yield e(!0)})}function Ns(n){return T(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Xp(n,e){let t=W(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),xh(t)?Nh(t):di(t).r_()&&Dh(t,e))}function kh(n,e){let t=W(n),r=di(t);t.N_.delete(e),r.r_()&&Zp(t,e),t.N_.size===0&&(r.r_()?r.o_():mr(t)&&t.q_.set("Unknown"))}function Dh(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}di(n).A_(e)}function Zp(n,e){n.Q_.xe(e),di(n).R_(e)}function Nh(n){n.Q_=new Tl({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),di(n).start(),n.q_.v_()}function xh(n){return mr(n)&&!di(n).n_()&&n.N_.size>0}function mr(n){return W(n).L_.size===0}function em(n){n.Q_=void 0}function FI(n){return T(this,null,function*(){n.q_.set("Online")})}function UI(n){return T(this,null,function*(){n.N_.forEach((e,t)=>{Dh(n,e)})})}function BI(n,e){return T(this,null,function*(){em(n),xh(n)?(n.q_.M_(e),Nh(n)):n.q_.set("Unknown")})}function qI(n,e,t){return T(this,null,function*(){if(n.q_.set("Online"),e instanceof ya&&e.state===2&&e.cause)try{yield function(i,o){return T(this,null,function*(){let a=o.cause;for(let h of o.targetIds)i.N_.has(h)&&(yield i.remoteSyncer.rejectListen(h,a),i.N_.delete(h),i.Q_.removeTarget(h))})}(n,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Aa(n,r)}else if(e instanceof Yr?n.Q_.Ke(e):e instanceof ga?n.Q_.He(e):n.Q_.We(e),!t.isEqual(K.min()))try{let r=yield Yp(n.localStore);t.compareTo(r)>=0&&(yield function(o,a){let h=o.Q_.rt(a);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){let w=o.N_.get(m);w&&o.N_.set(m,w.withResumeToken(f.resumeToken,a))}}),h.targetMismatches.forEach((f,m)=>{let w=o.N_.get(f);if(!w)return;o.N_.set(f,w.withResumeToken(je.EMPTY_BYTE_STRING,w.snapshotVersion)),Zp(o,f);let g=new ys(w.target,f,m,w.sequenceNumber);Dh(o,g)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){q("RemoteStore","Failed to raise snapshot:",r),yield Aa(n,r)}})}function Aa(n,e,t){return T(this,null,function*(){if(!Ds(e))throw e;n.L_.add(1),yield Ns(n),n.q_.set("Offline"),t||(t=()=>Yp(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ga(n)}))})}function tm(n,e){return e().catch(t=>Aa(n,t,e))}function Wa(n){return T(this,null,function*(){let e=W(n),t=Dn(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$I(e);)try{let i=yield OI(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,jI(e,i)}catch(i){yield Aa(e,i)}nm(e)&&rm(e)})}function $I(n){return mr(n)&&n.O_.length<10}function jI(n,e){n.O_.push(e);let t=Dn(n);t.r_()&&t.V_&&t.m_(e.mutations)}function nm(n){return mr(n)&&!Dn(n).n_()&&n.O_.length>0}function rm(n){Dn(n).start()}function zI(n){return T(this,null,function*(){Dn(n).p_()})}function GI(n){return T(this,null,function*(){let e=Dn(n);for(let t of n.O_)e.m_(t.mutations)})}function WI(n,e,t){return T(this,null,function*(){let r=n.O_.shift(),i=_l.from(r,e,t);yield tm(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wa(n)})}function KI(n,e){return T(this,null,function*(){e&&Dn(n).V_&&(yield function(r,i){return T(this,null,function*(){if(function(a){return lI(a)&&a!==x.ABORTED}(i.code)){let o=r.O_.shift();Dn(r).s_(),yield tm(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Wa(r)}})}(n,e)),nm(n)&&rm(n)})}function op(n,e){return T(this,null,function*(){let t=W(n);t.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let r=mr(t);t.L_.add(3),yield Ns(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ga(t)})}function HI(n,e){return T(this,null,function*(){let t=W(n);e?(t.L_.delete(2),yield Ga(t)):e||(t.L_.add(2),yield Ns(t),t.q_.set("Unknown"))})}function di(n){return n.K_||(n.K_=function(t,r,i){let o=W(t);return o.w_(),new eh(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:FI.bind(null,n),Ro:UI.bind(null,n),mo:BI.bind(null,n),d_:qI.bind(null,n)}),n.B_.push(e=>T(this,null,function*(){e?(n.K_.s_(),xh(n)?Nh(n):n.q_.set("Unknown")):(yield n.K_.stop(),em(n))}))),n.K_}function Dn(n){return n.U_||(n.U_=function(t,r,i){let o=W(t);return o.w_(),new th(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zI.bind(null,n),mo:KI.bind(null,n),f_:GI.bind(null,n),g_:WI.bind(null,n)}),n.B_.push(e=>T(this,null,function*(){e?(n.U_.s_(),yield Wa(n)):(yield n.U_.stop(),n.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var sh=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,h=new n(e,t,a,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Oh(n,e){if(Jt("AsyncQueue",`${e}: ${n}`),Ds(n))return new U(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Sa=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=as(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Pa=class{constructor(){this.W_=new we($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ci=class n{constructor(e,t,r,i,o,a,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(h=>{a.push({type:0,doc:h})}),new n(e,t,Sa.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$a(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var oh=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ah=class{constructor(){this.queries=ap(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=W(t),o=i.queries;i.queries=ap(),o.forEach((a,h)=>{for(let f of h.j_)f.onError(r)})})(this,new U(x.ABORTED,"Firestore shutting down"))}};function ap(){return new kn(n=>kp(n),$a)}function Vh(n,e){return T(this,null,function*(){let t=W(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new oh,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let h=Oh(a,`Initialization of query '${Kr(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Mh(t)})}function Lh(n,e){return T(this,null,function*(){let t=W(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function QI(n,e){let t=W(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let h of a.j_)h.X_(i)&&(r=!0);a.z_=i}}r&&Mh(t)}function JI(n,e,t){let r=W(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Mh(n){n.Y_.forEach(e=>{e.next()})}var ch,cp;(cp=ch||(ch={})).ea="default",cp.Cache="cache";var vs=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ch.Cache}};var Ca=class{constructor(e){this.key=e}},Ra=class{constructor(e){this.key=e}},uh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Z(),this.mutatedKeys=Z(),this.Aa=Dp(e),this.Ra=new Sa(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Pa,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=i,h=!1,f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,g)=>{let R=i.get(w),N=ja(this.query,g)?g:null,M=!!R&&this.mutatedKeys.has(R.key),B=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations),O=!1;R&&N?R.data.isEqual(N.data)?M!==B&&(r.track({type:3,doc:N}),O=!0):this.ga(R,N)||(r.track({type:2,doc:N}),O=!0,(f&&this.Aa(N,f)>0||m&&this.Aa(N,m)<0)&&(h=!0)):!R&&N?(r.track({type:0,doc:N}),O=!0):R&&!N&&(r.track({type:1,doc:R}),O=!0,(f||m)&&(h=!0)),O&&(N?(a=a.add(N),o=B?o.add(w):o.delete(w)):(a=a.delete(w),o=o.delete(w)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let w=this.query.limitType==="F"?a.last():a.first();a=a.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{Ra:a,fa:r,ns:h,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((w,g)=>function(N,M){let B=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return B(N)-B(M)}(w.type,g.type)||this.Aa(w.doc,g.doc)),this.pa(r),i=i!=null&&i;let h=t&&!i?this.ya():[],f=this.da.size===0&&this.current&&!i?1:0,m=f!==this.Ea;return this.Ea=f,a.length!==0||m?{snapshot:new ci(this.query,e.Ra,o,a,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pa,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Z(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ra(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ca(r))}),t}ba(e){this.Ta=e.Ts,this.da=Z();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ci.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},lh=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},hh=class{constructor(e){this.key=e,this.va=!1}},dh=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new kn(h=>kp(h),$a),this.Ma=new Map,this.xa=new Set,this.Oa=new we($.comparator),this.Na=new Map,this.La=new _s,this.Ba={},this.ka=new Map,this.qa=ws.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function YI(n,e,t=!0){return T(this,null,function*(){let r=um(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield im(r,e,t,!0),i})}function XI(n,e){return T(this,null,function*(){let t=um(n);yield im(t,e,!0,!1)})}function im(n,e,t,r){return T(this,null,function*(){let i=yield VI(n.localStore,Nt(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),h;return r&&(h=yield ZI(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Xp(n.remoteStore,i),h})}function ZI(n,e,t,r,i){return T(this,null,function*(){n.Ka=(g,R,N)=>function(B,O,G,Q){return T(this,null,function*(){let J=O.view.ma(G);J.ns&&(J=yield sp(B.localStore,O.query,!1).then(({documents:P})=>O.view.ma(P,J)));let ce=Q&&Q.targetChanges.get(O.targetId),ve=Q&&Q.targetMismatches.get(O.targetId)!=null,ne=O.view.applyChanges(J,B.isPrimaryClient,ce,ve);return lp(B,O.targetId,ne.wa),ne.snapshot})}(n,g,R,N);let o=yield sp(n.localStore,e,!0),a=new uh(e,o.Ts),h=a.ma(o.documents),f=gs.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=a.applyChanges(h,n.isPrimaryClient,f);lp(n,t,m.wa);let w=new lh(e,t,a);return n.Fa.set(e,w),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot})}function eE(n,e,t){return T(this,null,function*(){let r=W(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!$a(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ql(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&kh(r.remoteStore,i.targetId),fh(r,i.targetId)}).catch(ks))):(fh(r,i.targetId),yield Ql(r.localStore,i.targetId,!0))})}function tE(n,e){return T(this,null,function*(){let t=W(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kh(t.remoteStore,r.targetId))})}function nE(n,e,t){return T(this,null,function*(){let r=uE(n);try{let i=yield function(a,h){let f=W(a),m=Fe.now(),w=h.reduce((N,M)=>N.add(M.key),Z()),g,R;return f.persistence.runTransaction("Locally write mutations","readwrite",N=>{let M=Xt(),B=Z();return f.cs.getEntries(N,w).next(O=>{M=O,M.forEach((G,Q)=>{Q.isValidDocument()||(B=B.add(G))})}).next(()=>f.localDocuments.getOverlayedDocuments(N,M)).next(O=>{g=O;let G=[];for(let Q of h){let J=uI(Q,g.get(Q.key).overlayedDocument);J!=null&&G.push(new Vt(Q.key,J,Tp(J.value.mapValue),Qt.exists(!0)))}return f.mutationQueue.addMutationBatch(N,m,G,h)}).next(O=>{R=O;let G=O.applyToLocalDocumentSet(g,B);return f.documentOverlayCache.saveOverlays(N,O.batchId,G)})}).then(()=>({batchId:R.batchId,changes:xp(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,h,f){let m=a.Ba[a.currentUser.toKey()];m||(m=new we(ie)),m=m.insert(h,f),a.Ba[a.currentUser.toKey()]=m}(r,i.batchId,t),yield xs(r,i.changes),yield Wa(r.remoteStore)}catch(i){let o=Oh(i,"Failed to persist write");t.reject(o)}})}function sm(n,e){return T(this,null,function*(){let t=W(n);try{let r=yield NI(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Na.get(o);a&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?ae(a.va):i.removedDocuments.size>0&&(ae(a.va),a.va=!1))}),yield xs(t,r,e)}catch(r){yield ks(r)}})}function up(n,e,t){let r=W(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,a)=>{let h=a.view.Z_(e);h.snapshot&&i.push(h.snapshot)}),function(a,h){let f=W(a);f.onlineState=h;let m=!1;f.queries.forEach((w,g)=>{for(let R of g.j_)R.Z_(h)&&(m=!0)}),m&&Mh(f)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rE(n,e,t){return T(this,null,function*(){let r=W(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let a=new we($.comparator);a=a.insert(o,mt.newNoDocument(o,K.min()));let h=Z().add(o),f=new ma(K.min(),new Map,new we(ie),a,h);yield sm(r,f),r.Oa=r.Oa.remove(o),r.Na.delete(e),Fh(r)}else yield Ql(r.localStore,e,!1).then(()=>fh(r,e,t)).catch(ks)})}function iE(n,e){return T(this,null,function*(){let t=W(n),r=e.batch.batchId;try{let i=yield DI(t.localStore,e);am(t,r,null),om(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield xs(t,i)}catch(i){yield ks(i)}})}function sE(n,e,t){return T(this,null,function*(){let r=W(n);try{let i=yield function(a,h){let f=W(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return f.mutationQueue.lookupMutationBatch(m,h).next(g=>(ae(g!==null),w=g.keys(),f.mutationQueue.removeMutationBatch(m,g))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,w,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>f.localDocuments.getDocuments(m,w))})}(r.localStore,e);am(r,e,t),om(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield xs(r,i)}catch(i){yield ks(i)}})}function om(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function am(n,e,t){let r=W(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function fh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||cm(n,r)})}function cm(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(kh(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Fh(n))}function lp(n,e,t){for(let r of t)r instanceof Ca?(n.La.addReference(r.key,e),oE(n,r)):r instanceof Ra?(q("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||cm(n,r.key)):z()}function oE(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(q("SyncEngine","New document in limbo: "+t),n.xa.add(r),Fh(n))}function Fh(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(me.fromString(e)),r=n.qa.next();n.Na.set(r,new hh(t)),n.Oa=n.Oa.insert(t,r),Xp(n.remoteStore,new ys(Nt(qa(t.path)),r,"TargetPurposeLimboResolution",_p.oe))}}function xs(n,e,t){return T(this,null,function*(){let r=W(n),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((h,f)=>{a.push(r.Ka(f,e,t).then(m=>{var w;if((m||t)&&r.isPrimaryClient){let g=m?!m.fromCache:(w=t?.targetChanges.get(f.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(m){i.push(m);let g=Gl.Wi(f.targetId,m);o.push(g)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(f,m){return T(this,null,function*(){let w=W(f);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>V.forEach(m,R=>V.forEach(R.$i,N=>w.persistence.referenceDelegate.addReference(g,R.targetId,N)).next(()=>V.forEach(R.Ui,N=>w.persistence.referenceDelegate.removeReference(g,R.targetId,N)))))}catch(g){if(!Ds(g))throw g;q("LocalStore","Failed to update sequence numbers: "+g)}for(let g of m){let R=g.targetId;if(!g.fromCache){let N=w.os.get(R),M=N.snapshotVersion,B=N.withLastLimboFreeSnapshotVersion(M);w.os=w.os.insert(R,B)}}})}(r.localStore,o))})}function aE(n,e){return T(this,null,function*(){let t=W(n);if(!t.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let r=yield Jp(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(h=>{h.forEach(f=>{f.reject(new U(x.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xs(t,r.hs)}})}function cE(n,e){let t=W(n),r=t.Na.get(e);if(r&&r.va)return Z().add(r.key);{let i=Z(),o=t.Ma.get(e);if(!o)return i;for(let a of o){let h=t.Fa.get(a);i=i.unionWith(h.view.Va)}return i}}function um(n){let e=W(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rE.bind(null,e),e.Ca.d_=QI.bind(null,e.eventManager),e.Ca.$a=JI.bind(null,e.eventManager),e}function uE(n){let e=W(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sE.bind(null,e),e}var hp=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=za(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return kI(this.persistence,new Kl,t.initialUser,this.serializer)}Ga(t){return new $l(zl.Zr,this.serializer)}Wa(t){return new Jl}terminate(){return T(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var lE=(()=>{class n{initialize(t,r){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>up(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aE.bind(null,this.syncEngine),yield HI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ah}()}createDatastore(t){let r=za(t.databaseInfo.databaseId),i=function(a){return new Zl(a)}(t.databaseInfo);return function(a,h,f,m){return new nh(a,h,f,m)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,a,h,f){return new ih(i,o,a,h,f)}(this.localStore,this.datastore,t.asyncQueue,r=>up(this.syncEngine,r,0),function(){return Ea.D()?new Ea:new Yl}())}createSyncEngine(t,r){return function(o,a,h,f,m,w,g){let R=new dh(o,a,h,f,m,w);return g&&(R.Qa=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){var t,r;yield function(o){return T(this,null,function*(){let a=W(o);q("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield Ns(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Is=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ph=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=ua.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>T(this,null,function*(){q("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Oh(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Gu(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>T(this,null,function*(){r.isEqual(i)||(yield Jp(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function dp(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield hE(n);q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>op(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>op(e.remoteStore,i)),n._onlineComponents=e})}function hE(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Gu(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Zr("Error using user provided cache. Falling back to memory cache: "+t),yield Gu(n,new hp)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield Gu(n,new hp);return n._offlineComponents})}function lm(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield dp(n,n._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield dp(n,new lE))),n._onlineComponents})}function dE(n){return lm(n).then(e=>e.syncEngine)}function ka(n){return T(this,null,function*(){let e=yield lm(n),t=e.eventManager;return t.onListen=YI.bind(null,e.syncEngine),t.onUnlisten=eE.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tE.bind(null,e.syncEngine),t})}function fE(n,e,t={}){let r=new pt;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,a,h,f,m){let w=new Is({next:R=>{w.Za(),a.enqueueAndForget(()=>Lh(o,g));let N=R.docs.has(h);!N&&R.fromCache?m.reject(new U(x.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&R.fromCache&&f&&f.source==="server"?m.reject(new U(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(R)},error:R=>m.reject(R)}),g=new vs(qa(h.path),w,{includeMetadataChanges:!0,_a:!0});return Vh(o,g)}(yield ka(n),n.asyncQueue,e,t,r)})),r.promise}function pE(n,e,t={}){let r=new pt;return n.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return function(o,a,h,f,m){let w=new Is({next:R=>{w.Za(),a.enqueueAndForget(()=>Lh(o,g)),R.fromCache&&f.source==="server"?m.reject(new U(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(R)},error:R=>m.reject(R)}),g=new vs(h,w,{includeMetadataChanges:!0,_a:!0});return Vh(o,g)}(yield ka(n),n.asyncQueue,e,t,r)})),r.promise}function hm(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var fp=new Map;function dm(n,e,t){if(!t)throw new U(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mE(n,e,t,r){if(e===!0&&r===!0)throw new U(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pp(n){if(!$.isDocumentKey(n))throw new U(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mp(n){if($.isDocumentKey(n))throw new U(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ka(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function st(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ka(n);throw new U(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Da=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hm((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new U(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new U(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new U(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ui=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Da({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Da(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Wu;switch(r.type){case"firstParty":return new Ju(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=fp.get(t);r&&(q("ComponentProvider","Removing Datastore"),fp.delete(t),r.terminate())}(this),Promise.resolve()}};function fm(n,e,t,r={}){var i;let o=(n=st(n,ui))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ve.MOCK_USER;else{h=pd(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new U(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ve(m)}n._authCredentials=new Ku(new ca(h,f))}}var Nn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ze=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Pn=class n extends Nn{constructor(e,t,r){super(e,t,qa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pm(n,e,...t){if(n=ye(n),dm("collection","path",e),n instanceof ui){let r=me.fromString(e,...t);return mp(r),new Pn(n,null,r)}{if(!(n instanceof ze||n instanceof Pn))throw new U(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return mp(r),new Pn(n.firestore,null,r)}}function Uh(n,e,...t){if(n=ye(n),arguments.length===1&&(e=ua.newId()),dm("doc","path",e),n instanceof ui){let r=me.fromString(e,...t);return pp(r),new ze(n,null,new $(r))}{if(!(n instanceof ze||n instanceof Pn))throw new U(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return pp(r),new ze(n.firestore,n instanceof Pn?n.converter:null,new $(r))}}var Na=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ta(this,"async_queue_retry"),this.Vu=()=>{let r=zu();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=zu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=zu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new pt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return T(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ds(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(a){let h=a.message||"";return a.stack&&(h=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),h}(r);throw Jt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=sh.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return T(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function gp(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Lt=class extends ui{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Na,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Na(e),this._firestoreClient=void 0,yield e}})}};function mm(n,e){let t=typeof n=="object"?n:Ur(),r=typeof n=="string"?n:e||"(default)",i=Ki(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=fd("firestore");o&&fm(i,...o)}return i}function Ha(n){if(n._terminated)throw new U(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gE(n),n._firestoreClient}function gE(n){var e,t,r;let i=n._freezeSettings(),o=function(h,f,m,w){return new tl(h,f,m,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,hm(w.experimentalLongPollingOptions),w.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ph(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){let f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}}(n._componentsProvider))}var Es=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(je.fromBase64String(e))}catch(t){throw new U(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var li=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ts=class{constructor(e){this._methodName=e}};var bs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var As=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var yE=/^__.*__$/,mh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vt(e,this.data,this.fieldMask,t,this.fieldTransforms):new fr(e,this.data,t,this.fieldTransforms)}},xa=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vt(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function gm(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var gh=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Va(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(gm(this.Cu)&&yE.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},yh=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||za(e)}Qu(e,t,r,i=!1){return new gh({Cu:e,methodName:t,qu:r,path:Ze.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bh(n){let e=n._freezeSettings(),t=za(n._databaseId);return new yh(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wE(n,e,t,r,i,o={}){let a=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);qh("Data must be an object, but it was:",a,r);let h=ym(r,a),f,m;if(o.merge)f=new it(a.fieldMask),m=a.fieldTransforms;else if(o.mergeFields){let w=[];for(let g of o.mergeFields){let R=wh(e,g,t);if(!a.contains(R))throw new U(x.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);_m(w,R)||w.push(R)}f=new it(w),m=a.fieldTransforms.filter(g=>f.covers(g.field))}else f=null,m=a.fieldTransforms;return new mh(new Xe(h),f,m)}var Oa=class n extends Ts{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function _E(n,e,t,r){let i=n.Qu(1,e,t);qh("Data must be an object, but it was:",i,r);let o=[],a=Xe.empty();pr(r,(f,m)=>{let w=$h(e,f,t);m=ye(m);let g=i.Nu(w);if(m instanceof Oa)o.push(w);else{let R=Os(m,g);R!=null&&(o.push(w),a.set(w,R))}});let h=new it(o);return new xa(a,h,i.fieldTransforms)}function vE(n,e,t,r,i,o){let a=n.Qu(1,e,t),h=[wh(e,r,t)],f=[i];if(o.length%2!=0)throw new U(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<o.length;R+=2)h.push(wh(e,o[R])),f.push(o[R+1]);let m=[],w=Xe.empty();for(let R=h.length-1;R>=0;--R)if(!_m(m,h[R])){let N=h[R],M=f[R];M=ye(M);let B=a.Nu(N);if(M instanceof Oa)m.push(N);else{let O=Os(M,B);O!=null&&(m.push(N),w.set(N,O))}}let g=new it(m);return new xa(w,g,a.fieldTransforms)}function IE(n,e,t,r=!1){return Os(t,n.Qu(r?4:3,e))}function Os(n,e){if(wm(n=ye(n)))return qh("Unsupported field value:",e,n),ym(n,e);if(n instanceof Ts)return function(r,i){if(!gm(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],a=0;for(let h of r){let f=Os(h,i.Lu(a));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),a++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Fe.fromDate(r);return{timestampValue:_a(i.serializer,o)}}if(r instanceof Fe){let o=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_a(i.serializer,o)}}if(r instanceof bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Es)return{bytesValue:jp(i.serializer,r._byteString)};if(r instanceof ze){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Rh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof As)return function(a,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return Ch(h.serializer,f)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ka(r)}`)}(n,e)}function ym(n,e){let t={};return vp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pr(n,(r,i)=>{let o=Os(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function wm(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Fe||n instanceof bs||n instanceof Es||n instanceof ze||n instanceof Ts||n instanceof As)}function qh(n,e,t){if(!wm(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Ka(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function wh(n,e,t){if((e=ye(e))instanceof li)return e._internalPath;if(typeof e=="string")return $h(n,e);throw Va("Field path arguments must be of type string or ",n,!1,void 0,t)}var EE=new RegExp("[~\\*/\\[\\]]");function $h(n,e,t){if(e.search(EE)>=0)throw Va(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new li(...e.split("."))._internalPath}catch{throw Va(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Va(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||a)&&(f+=" (found",o&&(f+=` in field ${r}`),a&&(f+=` in document ${i}`),f+=")"),new U(x.INVALID_ARGUMENT,h+n+f)}function _m(n,e){return n.some(t=>t.isEqual(e))}var La=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _h(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Qa("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},_h=class extends La{data(){return super.data()}};function Qa(n,e){return typeof e=="string"?$h(n,e):e instanceof li?e._internalPath:e._delegate._internalPath}function vm(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ss=class{},Ma=class extends Ss{};function Im(n,e,...t){let r=[];e instanceof Ss&&r.push(e),r=r.concat(t),function(o){let a=o.filter(f=>f instanceof Cs).length,h=o.filter(f=>f instanceof Ps).length;if(a>1||a>0&&h>0)throw new U(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Ps=class n extends Ma{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Am(e._query,t),new Nn(e.firestore,e.converter,pl(e._query,t))}_parse(e){let t=Bh(e.firestore);return function(o,a,h,f,m,w,g){let R;if(m.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new U(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){wp(g,w);let N=[];for(let M of g)N.push(yp(f,o,M));R={arrayValue:{values:N}}}else R=yp(f,o,g)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||wp(g,w),R=IE(h,a,g,w==="in"||w==="not-in");return Se.create(m,w,R)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Em(n,e,t){let r=e,i=Qa("where",n);return Ps._create(i,r,t)}var Cs=class n extends Ss{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let a=i,h=o.getFlattenedFilters();for(let f of h)Am(a,f),a=pl(a,f)}(e._query,t),new Nn(e.firestore,e.converter,pl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Tm(...n){return n.forEach(e=>TE("and",e)),Cs._create("and",n)}var vh=class n extends Ma{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,a){if(i.startAt!==null)throw new U(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lr(o,a)}(e._query,this._field,this._direction);return new Nn(e.firestore,e.converter,function(i,o){let a=i.explicitOrderBy.concat([o]);return new Rn(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function bm(n,e="asc"){let t=e,r=Qa("orderBy",n);return vh._create(r,t)}function yp(n,e,t){if(typeof(t=ye(t))=="string"){if(t==="")throw new U(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rp(e)&&t.indexOf("/")!==-1)throw new U(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(me.fromString(t));if(!$.isDocumentKey(r))throw new U(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $f(n,new $(r))}if(t instanceof ze)return $f(n,t._key);throw new U(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ka(t)}.`)}function wp(n,e){if(!Array.isArray(n)||n.length===0)throw new U(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Am(n,e){let t=function(i,o){for(let a of i)for(let h of a.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new U(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function TE(n,e){if(!(e instanceof Ps||e instanceof Cs))throw new U(x.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}var Ih=class{convertValue(e,t="none"){switch(ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return pr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>fe(a.doubleValue));return new As(o)}convertGeoPoint(e){return new bs(fe(e.latitude),fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=bh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fs(e));default:return null}}convertTimestamp(e){let t=Yt(e);return new Fe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=me.fromString(e);ae(Qp(r));let i=new fa(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Jt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function bE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var or=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Fa=class extends La{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Xr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Qa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Xr=class extends Fa{data(e={}){return super.data(e)}},Ua=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Xr(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(h=>{let f=new Xr(i._firestore,i._userDataWriter,h.doc.key,h.doc,new or(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{let f=new Xr(i._firestore,i._userDataWriter,h.doc.key,h.doc,new or(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),m=-1,w=-1;return h.type!==0&&(m=a.indexOf(h.doc.key),a=a.delete(h.doc.key)),h.type!==1&&(a=a.add(h.doc),w=a.indexOf(h.doc.key)),{type:AE(h.type),doc:f,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function AE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function Sm(n){n=st(n,ze);let e=st(n.firestore,Lt);return fE(Ha(e),n._key).then(t=>Dm(e,n,t))}var Rs=class extends Ih{constructor(e){super(),this.firestore=e}convertBytes(e){return new Es(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,t)}};function Pm(n){n=st(n,Nn);let e=st(n.firestore,Lt),t=Ha(e),r=new Rs(e);return vm(n._query),pE(t,n._query).then(i=>new Ua(e,r,n,i))}function Cm(n,e,t,...r){n=st(n,ze);let i=st(n.firestore,Lt),o=Bh(i),a;return a=typeof(e=ye(e))=="string"||e instanceof li?vE(o,"updateDoc",n._key,e,t,r):_E(o,"updateDoc",n._key,e),zh(i,[a.toMutation(n._key,Qt.exists(!0))])}function Rm(n){return zh(st(n.firestore,Lt),[new ms(n._key,Qt.none())])}function km(n,e){let t=st(n.firestore,Lt),r=Uh(n),i=bE(n.converter,e);return zh(t,[wE(Bh(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function jh(n,...e){var t,r,i;n=ye(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||gp(e[a])||(o=e[a],a++);let h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(gp(e[a])){let g=e[a];e[a]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let f,m,w;if(n instanceof ze)m=st(n.firestore,Lt),w=qa(n._key.path),f={next:g=>{e[a]&&e[a](Dm(m,n,g))},error:e[a+1],complete:e[a+2]};else{let g=st(n,Nn);m=st(g.firestore,Lt),w=g._query;let R=new Rs(m);f={next:N=>{e[a]&&e[a](new Ua(m,R,g,N))},error:e[a+1],complete:e[a+2]},vm(n._query)}return function(R,N,M,B){let O=new Is(B),G=new vs(N,O,M);return R.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return Vh(yield ka(R),G)})),()=>{O.Za(),R.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return Lh(yield ka(R),G)}))}}(Ha(m),w,h,f)}function zh(n,e){return function(r,i){let o=new pt;return r.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){return nE(yield dE(r),i,o)})),o.promise}(Ha(n),e)}function Dm(n,e,t){let r=t.docs.get(e._key),i=new Rs(n);return new Fa(n,i,e._key,r,new or(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){hi=i})(Tn),En(new rt("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),h=new Lt(new Hu(r.getProvider("auth-internal")),new Xu(r.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new U(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(m.options.projectId,w)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),ke(Ff,"4.7.3",e),ke(Ff,"4.7.3","esm2017")})();var Ja=function(){return Ja=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ja.apply(this,arguments)};var CE={includeMetadataChanges:!1};function Gh(n,e){return e===void 0&&(e=CE),new $i(function(t){var r=jh(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Nm(n){return Gh(n,{includeMetadataChanges:!0})}function xm(n,e){return e===void 0&&(e={}),Nm(n).pipe(xr(function(t){return Wh(t,e)}))}function Wh(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Ja(Ja({},r),(t={},t[e.idField]=n.id,t))}function Om(n){return Gh(n,{includeMetadataChanges:!0}).pipe(xr(function(e){return e.docs}))}function Vm(n,e){return e===void 0&&(e={}),Om(n).pipe(xr(function(t){return t.map(function(r){return Wh(r,e)})}))}var gr=class{constructor(e){return e}},Lm="firestore",Kh=class{constructor(){return ns(Lm)}};var Hh=new Or("angularfire2.firestore-instances");function RE(n,e){let t=ea(Lm,n,e);return t&&new gr(t)}function kE(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gr(r)}}var DE={provide:Kh,deps:[[new nt,Hh]]},NE={provide:gr,useFactory:RE,deps:[[new nt,Hh],Kt]};function gA(n,...e){return ke("angularfire",nr.full,"fst"),Vr([NE,DE,{provide:Hh,useFactory:kE(n),multi:!0,deps:[_n,Lr,zr,rr,[new nt,is],[new nt,jr],...e]}])}var Qh=de(Vm,!0);var Mm=de(xm,!0);var Fm=de(km,!0);var yA=de(Tm,!0);var yr=de(pm,!0);var Um=de(Rm,!0);var Mt=de(Uh,!0);var fi=de(Sm,!0);var Ya=de(Pm,!0);var wA=de(mm,!0);var _A=de(bm,!0);var Xa=de(Im,!0);var wr=de(Cm,!0);var Za=de(Em,!0);var TA=(()=>{class n{constructor(t){this.firestore=t,this.coleccionEspecialistas=[],this.especialistas=[],this.countEspecialistas=0,this.guardarEspecalistaSubject=new _c(!1),this.obtenerEspecialistasSubject=new _c(!1)}ngOnDestroy(){this.sub.unsubscribe()}guardarEspecialista(t){let r=yr(this.firestore,"especialistas");Fm(r,{mail:t.mail,dni:t.dni,nombre:t.nombre,apellido:t.apellido,edad:t.edad,especialidades:t.especialidades,estado:"pendiente"}).then(()=>{console.log("Especialista guardado con \xE9xito"),this.guardarEspecalistaSubject.next(!0)}).catch(i=>{console.error("Error al guardar el especialista: ",i),this.guardarEspecalistaSubject.next(!1)})}obtenerEspecialistas(){let t=yr(this.firestore,"especialistas"),r=Qh(t,{idField:"id"});this.sub=r.subscribe(i=>{this.coleccionEspecialistas=i,this.countEspecialistas=this.coleccionEspecialistas.length,this.obtenerEspecialistasSubject.next(!0)})}eliminarEspecialista(t){let r=Mt(this.firestore,`especialistas/${t}`);Um(r).then(()=>{console.log("Especialista eliminado con \xE9xito")}).catch(i=>{console.error("Error al eliminar el especialista: ",i)})}obtenerEspecialistaPorId(t){let r=Mt(this.firestore,`especialistas/${t}`);return fi(r).then(i=>i.exists()?qi({id:i.id},i.data()):(console.log("No existe el documento"),null)).catch(i=>(console.error("Error al obtener el especialista por ID: ",i),null))}obtenerEspecialistaPorEmail(t){let r=yr(this.firestore,"especialistas"),i=Xa(r,Za("mail","==",t));return Ya(i).then(o=>{if(o.empty)return console.log("No existe el documento"),null;{let a=o.docs[0];return qi({id:a.id},a.data())}}).catch(o=>(console.error("Error al obtener el especialista por email: ",o),null))}aprobarEspecialista(t){let r=Mt(this.firestore,`especialistas/${t}`);wr(r,{estado:"aprobado"}).then(()=>{console.log("Especialista aprobado con \xE9xito")}).catch(i=>{console.error("Error al aprobar el especialista: ",i)})}desaprobarEspecialista(t){let r=Mt(this.firestore,`especialistas/${t}`);wr(r,{estado:"pendiente"}).then(()=>{console.log("Especialista desaprobado con \xE9xito")}).catch(i=>{console.error("Error al desaprobar el especialista: ",i)})}agregarEspecialidad(t,r){return new Promise((i,o)=>{let a=Mt(this.firestore,`especialistas/${t}`);fi(a).then(h=>{if(h.exists()){let m=h.data().especialidades||[];m.push(r),wr(a,{especialidades:m}).then(()=>{console.log("Especialidad agregada con \xE9xito"),i()}).catch(w=>{console.error("Error al agregar la especialidad: ",w),o(w)})}else{let f="El documento no existe";console.error(f),o(f)}}).catch(h=>{console.error("Error al obtener el documento: ",h),o(h)})})}crearDisponibilidad(t,r){return new Promise((i,o)=>{let a=Mt(this.firestore,`especialistas/${t}`);fi(a).then(h=>{if(h.exists()){let m=h.data().disponibilidades||[];m.some(g=>g.dia===r.dia&&g.horaInicio<r.horaFin&&r.horaInicio<g.horaFin)?o(new Error("Ya existe una disponibilidad para este d\xEDa en el rango de horario indicado")):(m.push(r),wr(a,{disponibilidades:m}).then(()=>{console.log("Disponibilidad agregada con \xE9xito"),i()}).catch(g=>{console.error("Error al agregar la disponibilidad: ",g),o(g)}))}else{let f="El documento no existe";console.error(f),o(f)}}).catch(h=>{console.error("Error al obtener el documento: ",h),o(h)})})}actualizarDisponibilidad(t,r){return new Promise((i,o)=>{let a=Mt(this.firestore,`especialistas/${t}`);fi(a).then(h=>{if(h.exists()){let m=h.data().disponibilidades||[],w=!1;m=m.map(g=>g.dia===r.dia&&g.horaInicio===r.horaInicio&&g.horaFin===r.horaFin?(w=!0,r):g),w?wr(a,{disponibilidades:m}).then(()=>{console.log("Disponibilidad actualizada con \xE9xito"),i()}).catch(g=>{console.error("Error al actualizar la disponibilidad: ",g),o(g)}):o(new Error("No se encontr\xF3 una disponibilidad para este d\xEDa y horario"))}else{let f="El documento no existe";console.error(f),o(f)}}).catch(h=>{console.error("Error al obtener el documento: ",h),o(h)})})}eliminarDisponibilidad(t,r){return new Promise((i,o)=>{let a=Mt(this.firestore,`especialistas/${t}`);fi(a).then(h=>{if(h.exists()){let m=h.data().disponibilidades||[];m=m.filter(w=>w.dia!==r.dia||w.horaInicio!==r.horaInicio),wr(a,{disponibilidades:m}).then(()=>{i()}).catch(w=>{o(w)})}else o("El documento no existe")}).catch(h=>{o(h)})})}getDisponibilidades(t){let r=Mt(this.firestore,`especialistas/${t}`);return Mm(r).pipe(xr(i=>i?.disponibilidades||[]))}esEspecialista(t){return new Promise((r,i)=>{let o=Xa(yr(this.firestore,"especialistas"),Za("mail","==",t));Ya(o).then(a=>{let h=!1;a.forEach(f=>{h=!0}),r(h)}).catch(a=>{i(a)})})}getEspecialistaByMail(t){let r=Xa(yr(this.firestore,"especialistas"),Za("mail","==",t));return Ya(r)}getEspecialistas(){let t=yr(this.firestore,"especialistas");return Qh(t,{idField:"id"})}static{this.\u0275fac=function(r){return new(r||n)(Ro(gr))}}static{this.\u0275prov=Co({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{fd as a,pd as b,Ye as c,ye as d,rt as e,En as f,Ki as g,Tn as h,Ur as i,ke as j,nr as k,ea as l,ns as m,jr as n,zr as o,de as p,Kt as q,rr as r,sb as s,ob as t,Au as u,rs as v,is as w,yb as x,wb as y,_b as z,vb as A,Ib as B,Eb as C,Tb as D,Vf as E,pm as F,Uh as G,Im as H,Em as I,Sm as J,Pm as K,Rm as L,km as M,gr as N,gA as O,Qh as P,Mm as Q,Fm as R,yA as S,yr as T,Um as U,Mt as V,fi as W,Ya as X,wA as Y,_A as Z,Xa as _,wr as $,Za as aa,TA as ba};
