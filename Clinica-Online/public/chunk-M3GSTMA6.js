import{a as J}from"./chunk-MOAQ4HEH.js";import{a as G}from"./chunk-4EVBEZYA.js";import{a as O}from"./chunk-ZITNHFAD.js";import{a as K}from"./chunk-3U3J6ACK.js";import{a as N}from"./chunk-ONHPZ2ES.js";import{a as q}from"./chunk-RVEWURZZ.js";import{b as Q,c as U}from"./chunk-LWYV2P65.js";import"./chunk-IWNF2QU4.js";import{Aa as B,B as H,D as F,Da as T,Ea as k,Fa as w,Ha as l,I as x,Ia as E,J as C,Ja as M,Ka as z,La as V,O as D,Ra as L,T as I,V as s,Va as _,W as p,Wa as v,_ as R,da as m,eb as $,fa as y,ib as A,ka as u,la as S,ma as j,na as b,oa as g,pa as r,qa as a,ra as f,va as P,wa as h,xa as d}from"./chunk-XL3YBMFF.js";import"./chunk-SIAVTO45.js";var W=(()=>{class i{constructor(e,t){this.el=e,this.renderer=t}onMouseEnter(){this.renderer.setStyle(this.el.nativeElement,"background-color","blue"),this.renderer.setStyle(this.el.nativeElement,"color","red")}onMouseLeave(){this.renderer.removeStyle(this.el.nativeElement,"background-color"),this.renderer.removeStyle(this.el.nativeElement,"color")}static{this.\u0275fac=function(t){return new(t||i)(p(D),p(R))}}static{this.\u0275dir=F({type:i,selectors:[["","appHighlightOnHover",""]],hostBindings:function(t,n){t&1&&h("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},standalone:!0})}}return i})();var Z=["modalResena"],ee=["modalDetallesTurnos"];function te(i,c){if(i&1){let e=P();r(0,"button",17),h("click",function(){let n=x(e).$implicit,o=d(3);return C(o.mostrarModalDetallesTurnos(n))}),f(1,"img",18),r(2,"span",19),l(3),_(4,"capitalize"),a()()}if(i&2){let e=c.$implicit;s(),B("alt",e.nombre),y("src",e.urlImagen1,I),s(2),E(v(4,3,e.nombre))}}function ie(i,c){if(i&1&&b(0,te,5,5,"button",16,j),i&2){let e=d(2);g(e.filtrarPacientes())}}function ne(i,c){i&1&&(r(0,"div",20)(1,"h1",21),l(2,"No atendi\xF3 ning\xFAn paciente"),a()())}function oe(i,c){if(i&1&&m(0,ie,2,0)(1,ne,3,0),i&2){let e=d();u(0,e.filtrarPacientes().length>0?0:1)}}function ae(i,c){if(i&1&&(r(0,"ul",30)(1,"li",31)(2,"strong"),l(3),_(4,"capitalize"),a(),l(5),a()()),i&2){let e=c.$implicit,t=d(2).$implicit;s(3),M("",v(4,2,e),":"),s(2),M(" ",t.historiaClinica[e]," ")}}function re(i,c){if(i&1&&b(0,ae,6,4,"ul",30,S),i&2){let e=d().$implicit,t=d(2);g(t.objectKeys(e.historiaClinica))}}function se(i,c){if(i&1){let e=P();r(0,"div",25)(1,"ul",26)(2,"h3",27),l(3),_(4,"minutosAHora"),a(),m(5,re,2,0),a(),r(6,"div",28)(7,"button",29),h("click",function(){let n=x(e).$implicit,o=d(2);return C(o.mostrarModalResena(n))}),l(8,"Ver Rese\xF1a"),a()()()}if(i&2){let e=c.$implicit;s(3),V("",e.especialidad," - ",e.fecha," - ",v(4,4,e.hora),""),s(2),u(5,e.historiaClinica?5:-1)}}function le(i,c){if(i&1&&(r(0,"div",8)(1,"div",22)(2,"h1",13),l(3),a(),f(4,"button",14),a(),r(5,"div",23)(6,"div",24),b(7,se,9,6,"div",25,S),a()()()),i&2){let e=d();s(3),z(" Turnos de: ",e.pacienteSeleccionado.nombre," ",e.pacienteSeleccionado.apellido,""),s(4),g(e.filtrarTurnosRealizados(e.pacienteSeleccionado))}}var xe=(()=>{class i{constructor(e,t,n){this.pacientesService=e,this.turnosService=t,this.authService=n,this.claseSpinner="spinner-desactivado",this.tiempo=new G}ngOnInit(){let e=[!1,!1];this.mostrarSpinner(),this.authService.esperarCargarUsuario().then(()=>{this.suscripcionTurnos=this.turnosService.obtenerTurnosByField("idEspecialista",this.authService.usuarioLogeado.id).subscribe({next:t=>{this.turnos=t,console.log("turnos: ",this.turnos),e[0]=!0,e.includes(!1)||this.ocultarSpinner()}}),this.suscripcionPacientes=this.pacientesService.getPacientes().subscribe({next:t=>{this.pacientes=t,console.log("Pacientes: ",this.pacientes),e[1]=!0,e.includes(!1)||this.ocultarSpinner()}})})}ngOnDestroy(){this.suscripcionTurnos&&this.suscripcionTurnos.unsubscribe(),this.suscripcionPacientes&&this.suscripcionPacientes.unsubscribe()}filtrarPacientes(){let e=[],t=new Set;for(let n=0;n<this.turnos.length;n++)for(let o=0;o<this.pacientes.length;o++)if(this.turnos[n].idPaciente==this.pacientes[o].id&&this.turnos[n].estado=="realizado"){if(t.has(this.pacientes[o].id))break;e.push(this.pacientes[o]),t.add(this.pacientes[o].id)}return e}filtrarTurnosRealizados(e){let t="";return t=this.turnos.filter(n=>n.idPaciente===e.id&&n.estado=="realizado"),t}filtrarUltimosTresTurnos(e){return this.turnos.filter(o=>o.idPaciente===e.id&&o.estado=="realizado").sort((o,X)=>this.tiempo.fechaADate(X.fecha).getTime()-this.tiempo.fechaADate(o.fecha).getTime()).slice(0,3)}mostrarModalResena(e){this.turnoSeleccionado=e,console.log("Rese\xF1a del turno:",e.resena),new O(this.modalResena.nativeElement).show()}mostrarModalDetallesTurnos(e){this.pacienteSeleccionado=e,new O(this.modalDetallesTurnos.nativeElement).show()}verResena(e){console.log("Rese\xF1a del turno:",e)}objectKeys(e){return Object.keys(e)}mostrarSpinner(){this.claseSpinner="spinner-activado"}ocultarSpinner(){this.claseSpinner="spinner-desactivado"}static{this.\u0275fac=function(t){return new(t||i)(p(Q),p(N),p(U))}}static{this.\u0275cmp=H({type:i,selectors:[["app-pacientes"]],viewQuery:function(t,n){if(t&1&&(T(Z,5),T(ee,5)),t&2){let o;k(o=w())&&(n.modalResena=o.first),k(o=w())&&(n.modalDetallesTurnos=o.first)}},standalone:!0,features:[L],decls:21,vars:4,consts:[["modalDetallesTurnos",""],["modalResena",""],[3,"ngClass"],[1,"display-4","text-center"],[1,"container","d-flex","align-items-center","justify-content-center","h-100"],[1,"flex-wrap","d-flex","align-items-center","justify-content-center",2,"max-height","700px","overflow-y","auto"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade",2,"margin-top","220px"],[1,"modal-dialog","modal-turnos","flex-wrap","d-flex","align-items-center","justify-content-center"],[1,"modal-content","modal-turnos"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade",2,"margin-top","280px","margin-left","120px"],[1,"modal-dialog"],[1,"modal-content","modal-resena",2,"width","250px"],[1,"modal-header",2,"background-color","primary"],["id","staticBackdropLabel",1,"modal-title","fs-5","text-white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"card","card1","px-4","my-4",2,"width","220px","margin-left","12px"],["appHighlightOnHover","",1,"fab-button"],["appHighlightOnHover","",1,"fab-button",3,"click"],[1,"fab-image",3,"src","alt"],[1,"fab-label"],[1,"card","bg-danger","p-3","my-4"],[1,"text-white"],[1,"modal-header"],[1,"modal-body",2,"overflow-y","auto","max-height","450px"],[1,"card-text"],[1,"card","my-2"],[1,"my-auto"],[1,"card-title","text-center"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","mx-auto",3,"click"],[1,"list-group","list-group-flush"],[1,"list-group-item","rounded-3"]],template:function(t,n){t&1&&(f(0,"app-spinner",2),r(1,"h1",3),l(2,"Pacientes"),a(),r(3,"div",4)(4,"div",5),m(5,oe,2,1),a()(),r(6,"div",6,0)(8,"div",7),m(9,le,9,2,"div",8),a()(),r(10,"div",9,1)(12,"div",10)(13,"div",11)(14,"div",12)(15,"h1",13),l(16," Rese\xF1a del turno"),a(),f(17,"button",14),a(),r(18,"div",15)(19,"p"),l(20),a()()()()()),t&2&&(y("ngClass",n.claseSpinner),s(5),u(5,n.pacientes&&n.turnos?5:-1),s(4),u(9,n.pacienteSeleccionado?9:-1),s(11),E(n.turnoSeleccionado==null?null:n.turnoSeleccionado.resena))},dependencies:[$,q,J,A,K,W],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;background:#a9bcd0;background:linear-gradient(90deg,#a9bcd0,#d8dbe2 35%,#58a4b0)}.card-pacientes[_ngcontent-%COMP%]{background-color:#a0dce5;border-radius:3rem;min-height:60vh}.spinner-activado[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner-desactivado[_ngcontent-%COMP%]{display:none}.nombre-paciente[_ngcontent-%COMP%]{background-color:#a9bcd0}.btn[_ngcontent-%COMP%]{--bs-btn-color: #ffffff;--bs-btn-bg: #1ca1b6;--bs-btn-hover-color: #ffffff;--bs-btn-hover-bg: #188c9e;--bs-btn-active-color: #ffffff;--bs-btn-active-bg: #157786;--bs-btn-active-border-color: #157786;--bs-btn-disabled-border-color: #157786;--bs-btn-disabled-color: #ffffff;--bs-btn-disabled-bg: #157786}.fab-container[_ngcontent-%COMP%]{margin:10px;text-align:center}.fab-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:200px;height:200px;border-radius:50%;background-color:#5ba7f8;color:#fff;border:white;box-shadow:0 4px 8px #0003;cursor:pointer;position:relative;margin-left:10px}.fab-image[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;margin-bottom:5px}.fab-label[_ngcontent-%COMP%]{font-size:25px;text-align:center;color:#fff}.modal-turnos[_ngcontent-%COMP%]{background-color:#4b4b4b;border-radius:10px}.modal-resena[_ngcontent-%COMP%]{background-color:#58a4b0;border-radius:10px}"]})}}return i})();export{xe as PacientesComponent};
