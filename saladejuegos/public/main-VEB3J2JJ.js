var XA=Object.defineProperty,eS=Object.defineProperties;var tS=Object.getOwnPropertyDescriptors;var Z_=Object.getOwnPropertySymbols,nS=Object.getPrototypeOf,rS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,oS=Reflect.get;var X_=(t,e,n)=>e in t?XA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})rS.call(e,n)&&X_(t,n,e[n]);if(Z_)for(var n of Z_(e))iS.call(e,n)&&X_(t,n,e[n]);return t},we=(t,e)=>eS(t,tS(e));var tr=(t,e,n)=>oS(nS(t),n,e);var I=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var eI=null;var hh=1,fh=Symbol("SIGNAL");function me(t){let e=eI;return eI=t,e}var tI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sS(t){if(!(mh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hh)){if(!t.producerMustRecompute(t)&&!ph(t)){t.dirty=!1,t.lastCleanEpoch=hh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=hh}}function nI(t){return t&&(t.nextProducerIndex=0),me(t)}function rI(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(mh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)gh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ph(t){Tc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(sS(n),r!==n.version))return!0}return!1}function iI(t){if(Tc(t),mh(t))for(let e=0;e<t.producerNode.length;e++)gh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function gh(t,e){if(aS(t),Tc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)gh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Tc(i),i.producerIndexOfThis[r]=e}}function mh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Tc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function aS(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function cS(){throw new Error}var uS=cS;function oI(t){uS=t}function J(t){return typeof t=="function"}function Ui(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ac=Ui(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Vr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ke=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(o){e=o instanceof Ac?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sI(o)}catch(s){e=e??[],s instanceof Ac?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ac(e)}}add(e){var n;if(e&&e!==this)if(this.closed)sI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Vr(n,e)}remove(e){let{_finalizers:n}=this;n&&Vr(n,e),e instanceof t&&e._removeParent(this)}};ke.EMPTY=(()=>{let t=new ke;return t.closed=!0,t})();var yh=ke.EMPTY;function Sc(t){return t instanceof ke||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function sI(t){J(t)?t():t.unsubscribe()}var Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ji={setTimeout(t,e,...n){let{delegate:r}=ji;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ji;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Rc(t){ji.setTimeout(()=>{let{onUnhandledError:e}=Gt;if(e)e(t);else throw t})}function As(){}var aI=vh("C",void 0,void 0);function cI(t){return vh("E",void 0,t)}function uI(t){return vh("N",t,void 0)}function vh(t,e,n){return{kind:t,value:e,error:n}}var Ur=null;function Bi(t){if(Gt.useDeprecatedSynchronousErrorHandling){let e=!Ur;if(e&&(Ur={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ur;if(Ur=null,n)throw r}}else t()}function lI(t){Gt.useDeprecatedSynchronousErrorHandling&&Ur&&(Ur.errorThrown=!0,Ur.error=t)}var jr=class extends ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sc(e)&&e.add(this)):this.destination=hS}static create(e,n,r){return new $i(e,n,r)}next(e){this.isStopped?Ih(uI(e),this):this._next(e)}error(e){this.isStopped?Ih(cI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ih(aI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lS=Function.prototype.bind;function _h(t,e){return lS.call(t,e)}var wh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Mc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Mc(r)}else Mc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Mc(n)}}},$i=class extends jr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Gt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_h(e.next,o),error:e.error&&_h(e.error,o),complete:e.complete&&_h(e.complete,o)}):i=e}this.destination=new wh(i)}};function Mc(t){Gt.useDeprecatedSynchronousErrorHandling?lI(t):Rc(t)}function dS(t){throw t}function Ih(t,e){let{onStoppedNotification:n}=Gt;n&&ji.setTimeout(()=>n(t,e))}var hS={closed:!0,next:As,error:dS,complete:As};var Hi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(t){return t}function xc(...t){return Eh(t)}function Eh(t){return t.length===0?Dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=pS(n)?n:new $i(n,r,i);return Bi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=dI(r),new r((i,o)=>{let s=new $i({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Hi](){return this}pipe(...n){return Eh(n)(this)}toPromise(n){return n=dI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function dI(t){var e;return(e=t??Gt.Promise)!==null&&e!==void 0?e:Promise}function fS(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function pS(t){return t&&t instanceof jr||fS(t)&&Sc(t)}function Dh(t){return J(t?.lift)}function pe(t){return e=>{if(Dh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Ch(t,e,n,r,i)}var Ch=class extends jr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qi(){return pe((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var zi=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Dh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ke;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ke.EMPTY)}return e}refCount(){return qi()(this)}};var hI=Ui(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Nc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new hI}next(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?yh:(this.currentObservers=null,o.push(n),new ke(()=>{this.currentObservers=null,Vr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new Nc(e,n),t})(),Nc=class extends st{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:yh}};var Je=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var bh={now(){return(bh.delegate||Date).now()},delegate:void 0};var Pc=class extends ke{constructor(e,n){super()}schedule(e,n=0){return this}};var Ss={setInterval(t,e,...n){let{delegate:r}=Ss;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ss;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Gi=class extends Pc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ss.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ss.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Vr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Wi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Wi.now=bh.now;var Ki=class extends Wi{constructor(e,n=Wi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Th=new Ki(Gi);var Oc=class extends Gi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var kc=class extends Ki{};var Ah=new kc(Oc);var Ct=new ce(t=>t.complete());function fI(t){return t&&J(t.schedule)}function pI(t){return t[t.length-1]}function Fc(t){return J(pI(t))?t.pop():void 0}function nr(t){return fI(pI(t))?t.pop():void 0}function Sh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function mI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function gI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Br(t){return this instanceof Br?(this.v=t,this):new Br(t)}function yI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(S){return Promise.resolve(S).then(w,p)}}function a(w,S){r[w]&&(i[w]=function(M){return new Promise(function(x,O){o.push([w,M,x,O])>1||u(w,M)})},S&&(i[w]=S(i[w])))}function u(w,S){try{l(r[w](S))}catch(M){y(o[0][3],M)}}function l(w){w.value instanceof Br?Promise.resolve(w.value.v).then(h,p):y(o[0][2],w)}function h(w){u("next",w)}function p(w){u("throw",w)}function y(w,S){w(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function vI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gI=="function"?gI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Lc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Vc(t){return J(t?.then)}function Uc(t){return J(t[Hi])}function jc(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function Bc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $c=gS();function Hc(t){return J(t?.[$c])}function qc(t){return yI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Br(n.read());if(i)return yield Br(void 0);yield yield Br(r)}}finally{n.releaseLock()}})}function zc(t){return J(t?.getReader)}function Fe(t){if(t instanceof ce)return t;if(t!=null){if(Uc(t))return mS(t);if(Lc(t))return yS(t);if(Vc(t))return vS(t);if(jc(t))return _I(t);if(Hc(t))return _S(t);if(zc(t))return IS(t)}throw Bc(t)}function mS(t){return new ce(e=>{let n=t[Hi]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yS(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function vS(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Rc)})}function _S(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function _I(t){return new ce(e=>{wS(t,e).catch(n=>e.error(n))})}function IS(t){return _I(qc(t))}function wS(t,e){var n,r,i,o;return mI(this,void 0,void 0,function*(){try{for(n=vI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function vt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function rr(t,e=0){return pe((n,r)=>{n.subscribe(ue(r,i=>vt(r,t,()=>r.next(i),e),()=>vt(r,t,()=>r.complete(),e),i=>vt(r,t,()=>r.error(i),e)))})}function ir(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function II(t,e){return Fe(t).pipe(ir(e),rr(e))}function wI(t,e){return Fe(t).pipe(ir(e),rr(e))}function EI(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function DI(t,e){return new ce(n=>{let r;return vt(n,e,()=>{r=t[$c](),vt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Gc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{vt(n,e,()=>{let r=t[Symbol.asyncIterator]();vt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function CI(t,e){return Gc(qc(t),e)}function bI(t,e){if(t!=null){if(Uc(t))return II(t,e);if(Lc(t))return EI(t,e);if(Vc(t))return wI(t,e);if(jc(t))return Gc(t,e);if(Hc(t))return DI(t,e);if(zc(t))return CI(t,e)}throw Bc(t)}function Pe(t,e){return e?bI(t,e):Fe(t)}function Z(...t){let e=nr(t);return Pe(t,e)}function Qi(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function Rh(t){return!!t&&(t instanceof ce||J(t.lift)&&J(t.subscribe))}var Rn=Ui(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return pe((n,r)=>{let i=0;n.subscribe(ue(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:ES}=Array;function DS(t,e){return ES(e)?t(...e):t(e)}function Wc(t){return ie(e=>DS(t,e))}var{isArray:CS}=Array,{getPrototypeOf:bS,prototype:TS,keys:AS}=Object;function Kc(t){if(t.length===1){let e=t[0];if(CS(e))return{args:e,keys:null};if(SS(e)){let n=AS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function SS(t){return t&&typeof t=="object"&&bS(t)===TS}function Qc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Yc(...t){let e=nr(t),n=Fc(t),{args:r,keys:i}=Kc(t);if(r.length===0)return Pe([],e);let o=new ce(RS(r,e,i?s=>Qc(i,s):Dt));return n?o.pipe(Wc(n)):o}function RS(t,e,n=Dt){return r=>{TI(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)TI(e,()=>{let l=Pe(t[u],e),h=!1;l.subscribe(ue(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function TI(t,e,n){t?vt(n,t,e):e()}function AI(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},w=M=>l<r?S(M):u.push(M),S=M=>{o&&e.next(M),l++;let x=!1;Fe(n(M,h++)).subscribe(ue(e,O=>{i?.(O),o?w(O):e.next(O)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let O=u.shift();s?vt(e,s,()=>S(O)):S(O)}y()}catch(O){e.error(O)}}))};return t.subscribe(ue(e,w,()=>{p=!0,y()})),()=>{a?.()}}function Be(t,e,n=1/0){return J(e)?Be((r,i)=>ie((o,s)=>e(r,o,i,s))(Fe(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>AI(r,i,t,n)))}function Mh(t=1/0){return Be(Dt,t)}function SI(){return Mh(1)}function Yi(...t){return SI()(Pe(t,nr(t)))}function Jc(t){return new ce(e=>{Fe(t()).subscribe(e)})}function xh(...t){let e=Fc(t),{args:n,keys:r}=Kc(t),i=new ce(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Fe(n[h]).subscribe(ue(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Qc(r,a):a),o.complete())}))}});return e?i.pipe(Wc(e)):i}function kt(t,e){return pe((n,r)=>{let i=0;n.subscribe(ue(r,o=>t.call(e,o,i++)&&r.next(o)))})}function or(t){return pe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ue(n,void 0,void 0,s=>{o=Fe(t(s,or(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function RI(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ue(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ji(t,e){return J(e)?Be(t,e,1):Be(t,1)}function sr(t){return pe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Mn(t){return t<=0?()=>Ct:pe((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Nh(t){return ie(()=>t)}function Zc(t=MS){return pe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function MS(){return new Rn}function Rs(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function sn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?kt((i,o)=>t(i,o,r)):Dt,Mn(1),n?sr(e):Zc(()=>new Rn))}function Zi(t){return t<=0?()=>Ct:pe((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ph(t,e){let n=arguments.length>=2;return r=>r.pipe(t?kt((i,o)=>t(i,o,r)):Dt,Zi(1),n?sr(e):Zc(()=>new Rn))}function Xc(t,e){return pe(RI(t,e,arguments.length>=2,!0))}function eu(...t){let e=nr(t);return pe((n,r)=>{(e?Yi(t,n,e):Yi(t,n)).subscribe(r)})}function Wt(t,e){return pe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;Fe(t(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Oh(t){return pe((e,n)=>{Fe(t).subscribe(ue(n,()=>n.complete(),As)),!n.closed&&e.subscribe(n)})}function $e(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var lw="https://g.co/ng/security#xss",H=class extends Error{constructor(e,n){super(Of(e,n)),this.code=e}};function Of(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $s(t){return{toString:t}.toString()}var tu="__parameters__";function xS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function NS(t,e,n){return $s(()=>{let r=xS(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(tu)?u[tu]:Object.defineProperty(u,tu,{value:[]})[tu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var $r=globalThis;function be(t){for(let e in t)if(t[e]===be)return e;throw Error("Could not find renamed property on target object.")}function PS(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function pt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(pt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function MI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var OS=be({__forward_ref__:be});function Hs(t){return t.__forward_ref__=Hs,t.toString=function(){return pt(this())},t}function ft(t){return dw(t)?t():t}function dw(t){return typeof t=="function"&&t.hasOwnProperty(OS)&&t.__forward_ref__===Hs}function Q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Mu(t){return xI(t,fw)||xI(t,pw)}function hw(t){return Mu(t)!==null}function xI(t,e){return t.hasOwnProperty(e)?t[e]:null}function kS(t){let e=t&&(t[fw]||t[pw]);return e||null}function NI(t){return t&&(t.hasOwnProperty(PI)||t.hasOwnProperty(FS))?t[PI]:null}var fw=be({\u0275prov:be}),PI=be({\u0275inj:be}),pw=be({ngInjectableDef:be}),FS=be({ngInjectorDef:be}),W=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function gw(t){return t&&!!t.\u0275providers}var LS=be({\u0275cmp:be}),VS=be({\u0275dir:be}),US=be({\u0275pipe:be}),jS=be({\u0275mod:be}),lu=be({\u0275fac:be}),Ms=be({__NG_ELEMENT_ID__:be}),OI=be({__NG_ENV_ID__:be});function xu(t){return typeof t=="string"?t:t==null?"":String(t)}function BS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():xu(t)}function $S(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,t)}function kf(t,e){throw new H(-201,!1)}var oe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(oe||{}),Yh;function mw(){return Yh}function Ft(t){let e=Yh;return Yh=t,e}function yw(t,e,n){let r=Mu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&oe.Optional)return null;if(e!==void 0)return e;kf(t,"Injector")}var HS={},xs=HS,Jh="__NG_DI_FLAG__",du="ngTempTokenPath",qS="ngTokenPath",zS=/\n/gm,GS="\u0275",kI="__source",no;function WS(){return no}function ar(t){let e=no;return no=t,e}function KS(t,e=oe.Default){if(no===void 0)throw new H(-203,!1);return no===null?yw(t,void 0,e):no.get(t,e&oe.Optional?null:void 0,e)}function le(t,e=oe.Default){return(mw()||KS)(ft(t),e)}function V(t,e=oe.Default){return le(t,Nu(e))}function Nu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zh(t){let e=[];for(let n=0;n<t.length;n++){let r=ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=oe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=YS(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(le(i,o))}else e.push(le(r))}return e}function QS(t,e){return t[Jh]=e,t.prototype[Jh]=e,t}function YS(t){return t[Jh]}function JS(t,e,n,r){let i=t[du];throw e[kI]&&i.unshift(e[kI]),t.message=ZS(`
`+t.message,i,n,r),t[qS]=i,t[du]=null,t}function ZS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==GS?t.slice(2):t;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):pt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(zS,`
  `)}`}var _t=QS(NS("Optional"),8);function io(t,e){let n=t.hasOwnProperty(lu);return n?t[lu]:null}function Ff(t,e){t.forEach(n=>Array.isArray(n)?Ff(n,e):e(n))}function vw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function XS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function eR(t,e,n){let r=qs(t,e);return r>=0?t[r|1]=n:(r=~r,XS(t,r,e,n)),r}function kh(t,e){let n=qs(t,e);if(n>=0)return t[n|1]}function qs(t,e){return tR(t,e,1)}function tR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var oo={},Lt=[],so=new W(""),_w=new W("",-1),Iw=new W(""),fu=class{get(e,n=xs){if(n===xs){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return n}},ww=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ww||{}),un=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(un||{}),gt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(gt||{});function nR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Xh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];rR(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Ew(t){return t===3||t===4||t===6}function rR(t){return t.charCodeAt(0)===64}function Ns(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?FI(t,n,i,null,e[++r]):FI(t,n,i,null,null))}}return t}function FI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Dw="ng-template";function iR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&nR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Lf(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Lf(t){return t.type===4&&t.value!==Dw}function oR(t,e,n){let r=t.type===4&&!n?Dw:t.value;return e===r}function sR(t,e,n){let r=4,i=t.attrs,o=i!==null?uR(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Kt(r)&&!Kt(u))return!1;if(s&&Kt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!oR(t,u,n)||u===""&&e.length===1){if(Kt(r))return!1;s=!0}}else if(r&8){if(i===null||!iR(t,i,u,n)){if(Kt(r))return!1;s=!0}}else{let l=e[++a],h=aR(u,i,Lf(t),n);if(h===-1){if(Kt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Kt(r))return!1;s=!0}}}}return Kt(r)||s}function Kt(t){return(t&1)===0}function aR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return lR(e,t)}function cR(t,e,n=!1){for(let r=0;r<e.length;r++)if(sR(t,e[r],n))return!0;return!1}function uR(t){for(let e=0;e<t.length;e++){let n=t[e];if(Ew(n))return e}return t.length}function lR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function LI(t,e){return t?":not("+e.trim()+")":e}function dR(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Kt(s)&&(e+=LI(o,i),i=""),r=s,o=o||!Kt(r);n++}return i!==""&&(e+=LI(o,i)),e}function hR(t){return t.map(dR).join(",")}function fR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Kt(i))break;i=o}r++}return{attrs:e,classes:n}}function qe(t){return $s(()=>{let e=Sw(t),n=we(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ww.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||un.Emulated,styles:t.styles||Lt,_:null,schemas:t.schemas||null,tView:null,id:""});Rw(n);let r=t.dependencies;return n.directiveDefs=UI(r,!1),n.pipeDefs=UI(r,!0),n.id=mR(n),n})}function pR(t){return zr(t)||Cw(t)}function gR(t){return t!==null}function ei(t){return $s(()=>({type:t.type,bootstrap:t.bootstrap||Lt,declarations:t.declarations||Lt,imports:t.imports||Lt,exports:t.exports||Lt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function VI(t,e){if(t==null)return oo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=gt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==gt.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Jt(t){return $s(()=>{let e=Sw(t);return Rw(e),e})}function zr(t){return t[LS]||null}function Cw(t){return t[VS]||null}function bw(t){return t[US]||null}function Tw(t){let e=zr(t)||Cw(t)||bw(t);return e!==null?e.standalone:!1}function Aw(t,e){let n=t[jS]||null;if(!n&&e===!0)throw new Error(`Type ${pt(t)} does not have '\u0275mod' property.`);return n}function Sw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||oo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Lt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:VI(t.inputs,e),outputs:VI(t.outputs),debugInfo:null}}function Rw(t){t.features?.forEach(e=>e(t))}function UI(t,e){if(!t)return null;let n=e?bw:pR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(gR)}function mR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fn(t){return{\u0275providers:t}}function yR(...t){return{\u0275providers:Mw(!0,t),\u0275fromNgModule:!0}}function Mw(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ff(e,s=>{let a=s;ef(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&xw(i,o),n}function xw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Vf(i,o=>{e(o,r)})}}function ef(t,e,n,r){if(t=ft(t),!t)return!1;let i=null,o=NI(t),s=!o&&zr(t);if(!o&&!s){let u=t.ngModule;if(o=NI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ef(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ff(o.imports,h=>{ef(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&xw(l,e)}if(!a){let l=io(i)||(()=>new i);e({provide:i,useFactory:l,deps:Lt},i),e({provide:Iw,useValue:i,multi:!0},i),e({provide:so,useValue:()=>le(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Vf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Vf(t,e){for(let n of t)gw(n)&&(n=n.\u0275providers),Array.isArray(n)?Vf(n,e):e(n)}var vR=be({provide:String,useValue:be});function Nw(t){return t!==null&&typeof t=="object"&&vR in t}function _R(t){return!!(t&&t.useExisting)}function IR(t){return!!(t&&t.useFactory)}function ao(t){return typeof t=="function"}function wR(t){return!!t.useClass}var Pu=new W(""),ou={},ER={},Fh;function Uf(){return Fh===void 0&&(Fh=new fu),Fh}var Vt=class{},Ps=class extends Vt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nf(e,s=>this.processProvider(s)),this.records.set(_w,Xi(void 0,this)),i.has("environment")&&this.records.set(Vt,Xi(void 0,this));let o=this.records.get(Pu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Iw,Lt,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ar(this),r=Ft(void 0),i;try{return e()}finally{ar(n),Ft(r)}}get(e,n=xs,r=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(OI))return e[OI](this);r=Nu(r);let i,o=ar(this),s=Ft(void 0);try{if(!(r&oe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=AR(e)&&Mu(e);l&&this.injectableDefInScope(l)?u=Xi(tf(e),ou):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&oe.Self?Uf():this.parent;return n=r&oe.Optional&&n===xs?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[du]=a[du]||[]).unshift(pt(e)),o)throw a;return JS(a,e,"R3InjectorError",this.source)}else throw a}finally{Ft(s),ar(o)}}resolveInjectorInitializers(){let e=me(null),n=ar(this),r=Ft(void 0),i;try{let o=this.get(so,Lt,oe.Self);for(let s of o)s()}finally{ar(n),Ft(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=ft(e);let n=ao(e)?e:ft(e&&e.provide),r=CR(e);if(!ao(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Xi(void 0,ou,!0),i.factory=()=>Zh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===ou&&(n.value=ER,n.value=n.factory()),typeof n.value=="object"&&n.value&&TR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function tf(t){let e=Mu(t),n=e!==null?e.factory:io(t);if(n!==null)return n;if(t instanceof W)throw new H(204,!1);if(t instanceof Function)return DR(t);throw new H(204,!1)}function DR(t){if(t.length>0)throw new H(204,!1);let n=kS(t);return n!==null?()=>n.factory(t):()=>new t}function CR(t){if(Nw(t))return Xi(void 0,t.useValue);{let e=Pw(t);return Xi(e,ou)}}function Pw(t,e,n){let r;if(ao(t)){let i=ft(t);return io(i)||tf(i)}else if(Nw(t))r=()=>ft(t.useValue);else if(IR(t))r=()=>t.useFactory(...Zh(t.deps||[]));else if(_R(t))r=()=>le(ft(t.useExisting));else{let i=ft(t&&(t.useClass||t.provide));if(bR(t))r=()=>new i(...Zh(t.deps));else return io(i)||tf(i)}return r}function Xi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bR(t){return!!t.deps}function TR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function AR(t){return typeof t=="function"||typeof t=="object"&&t instanceof W}function nf(t,e){for(let n of t)Array.isArray(n)?nf(n,e):n&&gw(n)?nf(n.\u0275providers,e):e(n)}function ti(t,e){t instanceof Ps&&t.assertNotDestroyed();let n,r=ar(t),i=Ft(void 0);try{return e()}finally{ar(r),Ft(i)}}function SR(){return mw()!==void 0||WS()!=null}function RR(t){return typeof t=="function"}var On=0,se=1,G=2,at=3,Qt=4,Zt=5,pu=6,Os=7,Ut=8,co=9,Yt=10,Le=11,ks=12,jI=13,fo=14,ln=15,Ou=16,eo=17,uo=18,ku=19,Ow=20,cr=21,Lh=22,Gr=23,dn=25,kw=1;var Wr=7,gu=8,mu=9,bt=10,jf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(jf||{});function Hr(t){return Array.isArray(t)&&typeof t[kw]=="object"}function kn(t){return Array.isArray(t)&&t[kw]===!0}function Fw(t){return(t.flags&4)!==0}function Fu(t){return t.componentOffset>-1}function Bf(t){return(t.flags&1)===1}function ur(t){return!!t.template}function MR(t){return(t[G]&512)!==0}var rf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Lw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ni(){return Vw}function Vw(t){return t.type.prototype.ngOnChanges&&(t.setInput=NR),xR}ni.ngInherit=!0;function xR(){let t=jw(this),e=t?.current;if(e){let n=t.previous;if(n===oo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function NR(t,e,n,r,i){let o=this.declaredInputs[r],s=jw(t)||PR(t,{previous:oo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new rf(l&&l.currentValue,n,u===oo),Lw(t,e,i,n)}var Uw="__ngSimpleChanges__";function jw(t){return t[Uw]||null}function PR(t,e){return t[Uw]=e}var BI=null;var an=function(t,e,n){BI?.(t,e,n)},OR="svg",kR="math",FR=!1;function LR(){return FR}function hn(t){for(;Array.isArray(t);)t=t[On];return t}function Bw(t,e){return hn(e[t])}function jt(t,e){return hn(e[t.index])}function $f(t,e){return t.data[e]}function dr(t,e){let n=e[t];return Hr(n)?n:n[On]}function Hf(t){return(t[G]&128)===128}function VR(t){return kn(t[at])}function yu(t,e){return e==null?null:t[e]}function $w(t){t[eo]=0}function UR(t){t[G]&1024||(t[G]|=1024,Hf(t)&&Fs(t))}function jR(t,e){for(;t>0;)e=e[fo],t--;return e}function qf(t){return!!(t[G]&9216||t[Gr]?.dirty)}function of(t){t[Yt].changeDetectionScheduler?.notify(1),qf(t)?Fs(t):t[G]&64&&(LR()?(t[G]|=1024,Fs(t)):t[Yt].changeDetectionScheduler?.notify())}function Fs(t){t[Yt].changeDetectionScheduler?.notify();let e=Ls(t);for(;e!==null&&!(e[G]&8192||(e[G]|=8192,!Hf(e)));)e=Ls(e)}function Hw(t,e){if((t[G]&256)===256)throw new H(911,!1);t[cr]===null&&(t[cr]=[]),t[cr].push(e)}function BR(t,e){if(t[cr]===null)return;let n=t[cr].indexOf(e);n!==-1&&t[cr].splice(n,1)}function Ls(t){let e=t[at];return kn(e)?e[at]:e}var ae={lFrame:Yw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function $R(){return ae.lFrame.elementDepthCount}function HR(){ae.lFrame.elementDepthCount++}function qR(){ae.lFrame.elementDepthCount--}function qw(){return ae.bindingsEnabled}function zR(){return ae.skipHydrationRootTNode!==null}function GR(t){return ae.skipHydrationRootTNode===t}function WR(){ae.skipHydrationRootTNode=null}function De(){return ae.lFrame.lView}function It(){return ae.lFrame.tView}function mt(t){return ae.lFrame.contextLView=t,t[Ut]}function yt(t){return ae.lFrame.contextLView=null,t}function wt(){let t=zw();for(;t!==null&&t.type===64;)t=t.parent;return t}function zw(){return ae.lFrame.currentTNode}function KR(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function zs(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function Gw(){return ae.lFrame.isParent}function QR(){ae.lFrame.isParent=!1}function YR(){let t=ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JR(t){return ae.lFrame.bindingIndex=t}function Gs(){return ae.lFrame.bindingIndex++}function ZR(t){let e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function XR(){return ae.lFrame.inI18n}function eM(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,sf(e)}function tM(){return ae.lFrame.currentDirectiveIndex}function sf(t){ae.lFrame.currentDirectiveIndex=t}function nM(t){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Ww(t){ae.lFrame.currentQueryIndex=t}function rM(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[Zt]:null}function Kw(t,e,n){if(n&oe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&oe.Host);)if(i=rM(o),i===null||(o=o[fo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ae.lFrame=Qw();return r.currentTNode=e,r.lView=t,!0}function zf(t){let e=Qw(),n=t[se];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Qw(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?Yw(t):e}function Yw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Jw(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Zw=Jw;function Gf(){let t=Jw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function iM(t){return(ae.lFrame.contextLView=jR(t,ae.lFrame.contextLView))[Ut]}function po(){return ae.lFrame.selectedIndex}function Kr(t){ae.lFrame.selectedIndex=t}function Lu(){let t=ae.lFrame;return $f(t.tView,t.selectedIndex)}function oM(){return ae.lFrame.currentNamespace}var Xw=!0;function Wf(){return Xw}function Kf(t){Xw=t}function sM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Vw(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Qf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function su(t,e,n){eE(t,e,3,n)}function au(t,e,n,r){(t[G]&3)===n&&eE(t,e,n,r)}function Vh(t,e){let n=t[G];(n&3)===e&&(n&=16383,n+=1,t[G]=n)}function eE(t,e,n,r){let i=r!==void 0?t[eo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[eo]+=65536),(a<o||o==-1)&&(aM(t,n,e,u),t[eo]=(t[eo]&4294901760)+u+2),u++}function $I(t,e){an(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),an(5,t,e)}}function aM(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[G]>>14<t[eo]>>16&&(t[G]&3)===e&&(t[G]+=16384,$I(a,o)):$I(a,o)}var ro=-1,Qr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function cM(t){return t instanceof Qr}function uM(t){return(t.flags&8)!==0}function lM(t){return(t.flags&16)!==0}function tE(t){return t!==ro}function vu(t){return t&32767}function dM(t){return t>>16}function _u(t,e){let n=dM(t),r=e;for(;n>0;)r=r[fo],n--;return r}var af=!0;function HI(t){let e=af;return af=t,e}var hM=256,nE=hM-1,rE=5,fM=0,cn={};function pM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ms)&&(r=n[Ms]),r==null&&(r=n[Ms]=fM++);let i=r&nE,o=1<<i;e.data[t+(i>>rE)]|=o}function Iu(t,e){let n=iE(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Uh(r.data,t),Uh(e,null),Uh(r.blueprint,null));let i=Yf(t,e),o=t.injectorIndex;if(tE(i)){let s=vu(i),a=_u(i,e),u=a[se].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Uh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Yf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=uE(i),r===null)return ro;if(n++,i=i[fo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ro}function cf(t,e,n){pM(t,e,n)}function gM(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(Ew(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function oE(t,e,n){if(n&oe.Optional||t!==void 0)return t;kf(e,"NodeInjector")}function sE(t,e,n,r){if(n&oe.Optional&&r===void 0&&(r=null),!(n&(oe.Self|oe.Host))){let i=t[co],o=Ft(void 0);try{return i?i.get(e,r,n&oe.Optional):yw(e,r,n&oe.Optional)}finally{Ft(o)}}return oE(r,e,n)}function aE(t,e,n,r=oe.Default,i){if(t!==null){if(e[G]&2048&&!(r&oe.Self)){let s=IM(t,e,n,r,cn);if(s!==cn)return s}let o=cE(t,e,n,r,cn);if(o!==cn)return o}return sE(e,n,r,i)}function cE(t,e,n,r,i){let o=vM(n);if(typeof o=="function"){if(!Kw(e,t,r))return r&oe.Host?oE(i,n,r):sE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&oe.Optional))kf(n);else return s}finally{Zw()}}else if(typeof o=="number"){let s=null,a=iE(t,e),u=ro,l=r&oe.Host?e[ln][Zt]:null;for((a===-1||r&oe.SkipSelf)&&(u=a===-1?Yf(t,e):e[a+8],u===ro||!zI(r,!1)?a=-1:(s=e[se],a=vu(u),e=_u(u,e)));a!==-1;){let h=e[se];if(qI(o,a,h.data)){let p=mM(a,e,n,s,r,l);if(p!==cn)return p}u=e[a+8],u!==ro&&zI(r,e[se].data[a+8]===l)&&qI(o,a,e)?(s=h,a=vu(u),e=_u(u,e)):a=-1}}return i}function mM(t,e,n,r,i,o){let s=e[se],a=s.data[t+8],u=r==null?Fu(a)&&af:r!=s&&(a.type&3)!==0,l=i&oe.Host&&o===a,h=yM(a,s,n,u,l);return h!==null?lo(e,s,h,a):cn}function yM(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let w=p;w<y;w++){let S=s[w];if(w<u&&n===S||w>=u&&S.type===n)return w}if(i){let w=s[u];if(w&&ur(w)&&w.type===n)return u}return null}function lo(t,e,n,r){let i=t[n],o=e.data;if(cM(i)){let s=i;s.resolving&&$S(BS(o[n]));let a=HI(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Ft(s.injectImpl):null,h=Kw(t,r,oe.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&sM(n,o[n],e)}finally{l!==null&&Ft(l),HI(a),s.resolving=!1,Zw()}}return i}function vM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ms)?t[Ms]:void 0;return typeof e=="number"?e>=0?e&nE:_M:e}function qI(t,e,n){let r=1<<t;return!!(n[e+(t>>rE)]&r)}function zI(t,e){return!(t&oe.Self)&&!(t&oe.Host&&e)}var qr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aE(this._tNode,this._lView,e,Nu(r),n)}};function _M(){return new qr(wt(),De())}function Ws(t){return $s(()=>{let e=t.prototype.constructor,n=e[lu]||uf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[lu]||uf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function uf(t){return dw(t)?()=>{let e=uf(ft(t));return e&&e()}:io(t)}function IM(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[G]&2048&&!(s[G]&512);){let a=cE(o,s,n,r|oe.Self,cn);if(a!==cn)return a;let u=o.parent;if(!u){let l=s[Ow];if(l){let h=l.get(n,cn,r);if(h!==cn)return h}u=uE(s),s=s[fo]}o=u}return i}function uE(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[Zt]:null}function Jf(t){return gM(wt(),t)}function GI(t,e=null,n=null,r){let i=lE(t,e,n,r);return i.resolveInjectorInitializers(),i}function lE(t,e=null,n=null,r,i=new Set){let o=[n||Lt,yR(t)];return r=r||(typeof t=="object"?void 0:pt(t)),new Ps(o,e||Uf(),r||null,i)}var Bt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return GI({name:""},i,r,"");{let o=r.name??"";return GI({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=xs,e.NULL=new fu,e.\u0275prov=Q({token:e,providedIn:"any",factory:()=>le(_w)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var wM="ngOriginalError";function jh(t){return t[wM]}var xn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&jh(e);for(;n&&jh(n);)n=jh(n);return n||null}},dE=new W("",{providedIn:"root",factory:()=>V(xn).handleError.bind(void 0)}),hE=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=EM,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),lf=class extends hE{constructor(e){super(),this._lView=e}onDestroy(e){return Hw(this._lView,e),()=>BR(this._lView,e)}};function EM(){return new lf(De())}function DM(){return Vu(wt(),De())}function Vu(t,e){return new hr(jt(t,e))}var hr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=DM;let t=e;return t})();var df=class extends st{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,SR()&&(this.destroyRef=V(hE,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Bh(o),i&&(i=Bh(i)),s&&(s=Bh(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ke&&e.add(a),a}};function Bh(t){return e=>{setTimeout(t,void 0,e)}}var Ze=df;function fE(t){return(t.flags&128)===128}var pE=new Map,CM=0;function bM(){return CM++}function TM(t){pE.set(t[ku],t)}function AM(t){pE.delete(t[ku])}var WI="__ngContext__";function Yr(t,e){Hr(e)?(t[WI]=e[ku],TM(e)):t[WI]=e}function gE(t){return yE(t[ks])}function mE(t){return yE(t[Qt])}function yE(t){for(;t!==null&&!kn(t);)t=t[Qt];return t}var hf;function vE(t){hf=t}function SM(){if(hf!==void 0)return hf;if(typeof document<"u")return document;throw new H(210,!1)}var Zf=new W("",{providedIn:"root",factory:()=>RM}),RM="ng",Xf=new W(""),fr=new W("",{providedIn:"platform",factory:()=>"unknown"});var ep=new W("",{providedIn:"root",factory:()=>SM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var MM="h",xM="b";var NM=()=>null;function tp(t,e,n=!1){return NM(t,e,n)}var _E=!1,PM=new W("",{providedIn:"root",factory:()=>_E});var nu;function OM(){if(nu===void 0&&(nu=null,$r.trustedTypes))try{nu=$r.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return nu}function KI(t){return OM()?.createScriptURL(t)||t}var wu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lw})`}};function Ks(t){return t instanceof wu?t.changingThisBreaksApplicationSecurity:t}function np(t,e){let n=kM(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${lw})`)}return n===e}function kM(t){return t instanceof wu&&t.getTypeName()||null}var FM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function IE(t){return t=String(t),t.match(FM)?t:"unsafe:"+t}var Uu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Uu||{});function rp(t){let e=EE();return e?e.sanitize(Uu.URL,t)||"":np(t,"URL")?Ks(t):IE(xu(t))}function LM(t){let e=EE();if(e)return KI(e.sanitize(Uu.RESOURCE_URL,t)||"");if(np(t,"ResourceURL"))return KI(Ks(t));throw new H(904,!1)}function VM(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?LM:rp}function wE(t,e,n){return VM(e,n)(t)}function EE(){let t=De();return t&&t[Yt].sanitizer}function DE(t){return t instanceof Function?t():t}var Nn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Nn||{}),UM;function ip(t,e){return UM(t,e)}function to(t,e,n,r,i){if(r!=null){let o,s=!1;kn(r)?o=r:Hr(r)&&(s=!0,r=r[On]);let a=hn(r);t===0&&n!==null?i==null?AE(e,n,a):Du(e,n,a,i||null,!0):t===1&&n!==null?Du(e,n,a,i||null,!0):t===2?nx(e,a,s):t===3&&e.destroyNode(a),o!=null&&ix(e,t,o,n,i)}}function jM(t,e){return t.createText(e)}function BM(t,e,n){t.setValue(e,n)}function CE(t,e,n){return t.createElement(e,n)}function $M(t,e){bE(t,e),e[On]=null,e[Zt]=null}function HM(t,e,n,r,i,o){r[On]=i,r[Zt]=e,ju(t,r,n,1,i,o)}function bE(t,e){e[Yt].changeDetectionScheduler?.notify(1),ju(t,e,e[Le],2,null,null)}function qM(t){let e=t[ks];if(!e)return $h(t[se],t);for(;e;){let n=null;if(Hr(e))n=e[ks];else{let r=e[bt];r&&(n=r)}if(!n){for(;e&&!e[Qt]&&e!==t;)Hr(e)&&$h(e[se],e),e=e[at];e===null&&(e=t),Hr(e)&&$h(e[se],e),n=e&&e[Qt]}e=n}}function zM(t,e,n,r){let i=bt+r,o=n.length;r>0&&(n[i-1][Qt]=e),r<o-bt?(e[Qt]=n[i],vw(n,bt+r,e)):(n.push(e),e[Qt]=null),e[at]=n;let s=e[Ou];s!==null&&n!==s&&GM(s,e);let a=e[uo];a!==null&&a.insertView(t),of(e),e[G]|=128}function GM(t,e){let n=t[mu],i=e[at][at][ln];e[ln]!==i&&(t[G]|=jf.HasTransplantedViews),n===null?t[mu]=[e]:n.push(e)}function TE(t,e){let n=t[mu],r=n.indexOf(e);n.splice(r,1)}function Eu(t,e){if(t.length<=bt)return;let n=bt+e,r=t[n];if(r){let i=r[Ou];i!==null&&i!==t&&TE(i,r),e>0&&(t[n-1][Qt]=r[Qt]);let o=hu(t,bt+e);$M(r[se],r);let s=o[uo];s!==null&&s.detachView(o[se]),r[at]=null,r[Qt]=null,r[G]&=-129}return r}function op(t,e){if(!(e[G]&256)){let n=e[Le];n.destroyNode&&ju(t,e,n,3,null,null),qM(e)}}function $h(t,e){if(e[G]&256)return;let n=me(null);try{e[G]&=-129,e[G]|=256,e[Gr]&&iI(e[Gr]),KM(t,e),WM(t,e),e[se].type===1&&e[Le].destroy();let r=e[Ou];if(r!==null&&kn(e[at])){r!==e[at]&&TE(r,e);let i=e[uo];i!==null&&i.detachView(t)}AM(e)}finally{me(n)}}function WM(t,e){let n=t.cleanup,r=e[Os];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Os]=null);let i=e[cr];if(i!==null){e[cr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function KM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Qr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];an(4,a,u);try{u.call(a)}finally{an(5,a,u)}}else{an(4,i,o);try{o.call(i)}finally{an(5,i,o)}}}}}function QM(t,e,n){return YM(t,e.parent,n)}function YM(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[On];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===un.None||o===un.Emulated)return null}return jt(r,n)}}function Du(t,e,n,r,i){t.insertBefore(e,n,r,i)}function AE(t,e,n){t.appendChild(e,n)}function QI(t,e,n,r,i){r!==null?Du(t,e,n,r,i):AE(t,e,n)}function JM(t,e,n,r){t.removeChild(e,n,r)}function sp(t,e){return t.parentNode(e)}function ZM(t,e){return t.nextSibling(e)}function XM(t,e,n){return tx(t,e,n)}function ex(t,e,n){return t.type&40?jt(t,n):null}var tx=ex,YI;function ap(t,e,n,r){let i=QM(t,r,e),o=e[Le],s=r.parent||e[Zt],a=XM(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)QI(o,i,n[u],a,!1);else QI(o,i,n,a,!1);YI!==void 0&&YI(o,r,e,n,i)}function cu(t,e){if(e!==null){let n=e.type;if(n&3)return jt(e,t);if(n&4)return ff(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return cu(t,r);{let i=t[e.index];return kn(i)?ff(-1,i):hn(i)}}else{if(n&32)return ip(e,t)()||hn(t[e.index]);{let r=SE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ls(t[ln]);return cu(i,r)}else return cu(t,e.next)}}}return null}function SE(t,e){if(e!==null){let r=t[ln][Zt],i=e.projection;return r.projection[i]}return null}function ff(t,e){let n=bt+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return cu(r,i)}return e[Wr]}function nx(t,e,n){let r=sp(t,e);r&&JM(t,r,e,n)}function cp(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Yr(hn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)cp(t,e,n.child,r,i,o,!1),to(e,t,i,a,o);else if(u&32){let l=ip(n,r),h;for(;h=l();)to(e,t,i,h,o);to(e,t,i,a,o)}else u&16?rx(t,e,r,n,i,o):to(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ju(t,e,n,r,i,o){cp(n,r,t.firstChild,e,i,o,!1)}function rx(t,e,n,r,i,o){let s=n[ln],u=s[Zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];to(e,t,i,h,o)}else{let l=u,h=s[at];fE(r)&&(l.flags|=128),cp(t,e,l,h,i,o,!0)}}function ix(t,e,n,r,i){let o=n[Wr],s=hn(n);o!==s&&to(e,t,r,o,i);for(let a=bt;a<n.length;a++){let u=n[a];ju(u[se],u,t,e,r,o)}}function ox(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Nn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Nn.Important),t.setStyle(n,r,i,o))}}function sx(t,e,n){t.setAttribute(e,"style",n)}function RE(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ME(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Xh(t,e,r),i!==null&&RE(t,e,i),o!==null&&sx(t,e,o)}var pr={};function _e(t=1){xE(It(),De(),po()+t,!1)}function xE(t,e,n,r){if(!r)if((e[G]&3)===3){let o=t.preOrderCheckHooks;o!==null&&su(e,o,n)}else{let o=t.preOrderHooks;o!==null&&au(e,o,0,n)}Kr(n)}function re(t,e=oe.Default){let n=De();if(n===null)return le(t,e);let r=wt();return aE(r,n,ft(t),e)}function NE(t,e,n,r,i,o){let s=me(null);try{let a=null;i&gt.SignalBased&&(a=e[r][fh]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&gt.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):Lw(e,a,r,o)}finally{me(s)}}function ax(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Kr(~i);else{let o=i,s=n[++r],a=n[++r];eM(s,o);let u=e[o];a(2,u)}}}finally{Kr(-1)}}function Bu(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[On]=i,p[G]=r|4|128|8|64,(l!==null||t&&t[G]&2048)&&(p[G]|=2048),$w(p),p[at]=p[fo]=t,p[Ut]=n,p[Yt]=s||t&&t[Yt],p[Le]=a||t&&t[Le],p[co]=u||t&&t[co]||null,p[Zt]=o,p[ku]=bM(),p[pu]=h,p[Ow]=l,p[ln]=e.type==2?t[ln]:p,p}function $u(t,e,n,r,i){let o=t.data[e];if(o===null)o=cx(t,e,n,r,i),XR()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=KR();o.injectorIndex=s===null?-1:s.injectorIndex}return zs(o,!0),o}function cx(t,e,n,r,i){let o=zw(),s=Gw(),a=s?o:o&&o.parent,u=t.data[e]=fx(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function PE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function OE(t,e,n,r,i){let o=po(),s=r&2;try{Kr(-1),s&&e.length>dn&&xE(t,e,dn,!1),an(s?2:0,i),n(r,i)}finally{Kr(o),an(s?3:1,i)}}function kE(t,e,n){if(Fw(e)){let r=me(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{me(r)}}}function FE(t,e,n){qw()&&(_x(t,e,n,jt(n,e)),(n.flags&64)===64&&BE(t,e,n))}function LE(t,e,n=jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function VE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=up(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function up(t,e,n,r,i,o,s,a,u,l,h){let p=dn+r,y=p+i,w=ux(p,y),S=typeof l=="function"?l():l;return w[se]={type:t,blueprint:w,template:n,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function ux(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:pr);return n}function lx(t,e,n,r){let o=r.get(PM,_E)||n===un.ShadowDom,s=t.selectRootElement(e,o);return dx(s),s}function dx(t){hx(t)}var hx=()=>null;function fx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return zR()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function JI(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=gt.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?ZI(r,n,l,a,u):ZI(r,n,l,a)}return r}function ZI(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function px(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],y=n?n.get(p):null,w=y?y.inputs:null,S=y?y.outputs:null;u=JI(0,p.inputs,h,u,w),l=JI(1,p.outputs,h,l,S);let M=u!==null&&s!==null&&!Lf(e)?Mx(u,h,s):null;a.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function gx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function lp(t,e,n,r,i,o,s,a){let u=jt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(dp(t,n,h,r,i),Fu(e)&&mx(n,e.index)):e.type&3?(r=gx(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function mx(t,e){let n=dr(e,t);n[G]&16||(n[G]|=64)}function UE(t,e,n,r){if(qw()){let i=r===null?null:{"":-1},o=wx(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&jE(t,e,n,s,i,a),i&&Ex(n,r,i)}n.mergedAttrs=Ns(n.mergedAttrs,n.attrs)}function jE(t,e,n,r,i,o){for(let l=0;l<r.length;l++)cf(Iu(n,e),t,r[l].type);Cx(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=PE(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Ns(n.mergedAttrs,h.hostAttrs),bx(t,n,e,u,h),Dx(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}px(t,n,o)}function yx(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vx(s)!=a&&s.push(a),s.push(n,r,o)}}function vx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _x(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Fu(n)&&Tx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Iu(n,e),Yr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=lo(e,t,a,n);if(Yr(l,e),s!==null&&Rx(e,a-i,l,u,n,s),ur(u)){let h=dr(n.index,e);h[Ut]=lo(e,t,a,n)}}}function BE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=tM();try{Kr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];sf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ix(u,l)}}finally{Kr(-1),sf(s)}}function Ix(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function wx(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(cR(e,s.selectors,!1))if(r||(r=[]),ur(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;pf(t,e,u)}else r.unshift(s),pf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function pf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Ex(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}}function Dx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ur(e)&&(n[""]=t)}}function Cx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function bx(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=io(i.type,!0)),s=new Qr(o,ur(i),re);t.blueprint[r]=s,n[r]=s,yx(t,e,r,PE(t,n,i.hostVars,pr),i)}function Tx(t,e,n){let r=jt(e,t),i=VE(n),o=t[Yt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Hu(t,Bu(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function Ax(t,e,n,r,i,o){let s=jt(t,e);Sx(e[Le],s,o,t.value,n,r,i)}function Sx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?xu(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Rx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];NE(r,n,u,l,h,p)}}function Mx(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function $E(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function HE(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Ww(o),a.contentQueries(2,e[s],s)}}}finally{me(r)}}}function Hu(t,e){return t[ks]?t[jI][Qt]=e:t[ks]=e,t[jI]=e,e}function gf(t,e,n){Ww(0);let r=me(null);try{e(t,n)}finally{me(r)}}function xx(t){return t[Os]||(t[Os]=[])}function Nx(t){return t.cleanup||(t.cleanup=[])}function qE(t,e){let n=t[co],r=n?n.get(xn,null):null;r&&r.handleError(e)}function dp(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],h=t.data[s];NE(h,l,r,a,u,i)}}function Px(t,e,n){let r=Bw(e,t);BM(t[Le],r,n)}function Ox(t,e){let n=dr(e,t),r=n[se];kx(r,n);let i=n[On];i!==null&&n[pu]===null&&(n[pu]=tp(i,n[co])),hp(r,n,n[Ut])}function kx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function hp(t,e,n){zf(e);try{let r=t.viewQuery;r!==null&&gf(1,r,n);let i=t.template;i!==null&&OE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[uo]?.finishViewCreation(t),t.staticContentQueries&&HE(t,e),t.staticViewQueries&&gf(2,t.viewQuery,n);let o=t.components;o!==null&&Fx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[G]&=-5,Gf()}}function Fx(t,e){for(let n=0;n<e.length;n++)Ox(t,e[n])}function zE(t,e,n,r){let i=me(null);try{let o=e.tView,a=t[G]&4096?4096:16,u=Bu(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ou]=l;let h=t[uo];return h!==null&&(u[uo]=h.createEmbeddedView(o)),hp(o,u,n),u}finally{me(i)}}function Lx(t,e){let n=bt+e;if(n<t.length)return t[n]}function mf(t,e){return!e||e.firstChild===null||fE(t)}function GE(t,e,n,r=!0){let i=e[se];if(zM(i,e,t,n),r){let s=ff(n,t),a=e[Le],u=sp(a,t[Wr]);u!==null&&HM(i,t[Zt],a,e,u,s)}let o=e[pu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Vx(t,e){let n=Eu(t,e);return n!==void 0&&op(n[se],n),n}function Cu(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(hn(o)),kn(o)&&Ux(o,r);let s=n.type;if(s&8)Cu(t,e,n.child,r);else if(s&32){let a=ip(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=SE(e,n);if(Array.isArray(a))r.push(...a);else{let u=Ls(e[ln]);Cu(u[se],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ux(t,e){for(let n=bt;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&Cu(r[se],r,i,e)}t[Wr]!==t[On]&&e.push(t[Wr])}var WE=[];function jx(t){return t[Gr]??Bx(t)}function Bx(t){let e=WE.pop()??Object.create(Hx);return e.lView=t,e}function $x(t){t.lView[Gr]!==t&&(t.lView=null,WE.push(t))}var Hx=we(F({},tI),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Fs(t.lView)},consumerOnSignalRead(){this.lView[Gr]=this}}),KE=100;function QE(t,e=!0,n=0){let r=t[Yt],i=r.rendererFactory,o=!1;o||i.begin?.();try{qx(t,n)}catch(s){throw e&&qE(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function qx(t,e){yf(t,e);let n=0;for(;qf(t);){if(n===KE)throw new H(103,!1);n++,yf(t,1)}}function zx(t,e,n,r){let i=e[G];if((i&256)===256)return;let o=!1;!o&&e[Yt].inlineEffectRunner?.flush(),zf(e);let s=null,a=null;!o&&Gx(t)&&(a=jx(e),s=nI(a));try{$w(e),JR(t.bindingStartIndex),n!==null&&OE(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let p=t.preOrderCheckHooks;p!==null&&su(e,p,null)}else{let p=t.preOrderHooks;p!==null&&au(e,p,0,null),Vh(e,0)}if(Wx(e),YE(e,0),t.contentQueries!==null&&HE(t,e),!o)if(u){let p=t.contentCheckHooks;p!==null&&su(e,p)}else{let p=t.contentHooks;p!==null&&au(e,p,1),Vh(e,1)}ax(t,e);let l=t.components;l!==null&&ZE(e,l,0);let h=t.viewQuery;if(h!==null&&gf(2,h,r),!o)if(u){let p=t.viewCheckHooks;p!==null&&su(e,p)}else{let p=t.viewHooks;p!==null&&au(e,p,2),Vh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Lh]){for(let p of e[Lh])p();e[Lh]=null}o||(e[G]&=-73)}catch(u){throw Fs(e),u}finally{a!==null&&(rI(a,s),$x(a)),Gf()}}function Gx(t){return t.type!==2}function YE(t,e){for(let n=gE(t);n!==null;n=mE(n))for(let r=bt;r<n.length;r++){let i=n[r];JE(i,e)}}function Wx(t){for(let e=gE(t);e!==null;e=mE(e)){if(!(e[G]&jf.HasTransplantedViews))continue;let n=e[mu];for(let r=0;r<n.length;r++){let i=n[r],o=i[at];UR(i)}}}function Kx(t,e,n){let r=dr(e,t);JE(r,n)}function JE(t,e){Hf(t)&&yf(t,e)}function yf(t,e){let r=t[se],i=t[G],o=t[Gr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ph(o)),o&&(o.dirty=!1),t[G]&=-9217,s)zx(r,t,r.template,t[Ut]);else if(i&8192){YE(t,1);let a=r.components;a!==null&&ZE(t,a,1)}}function ZE(t,e,n){for(let r=0;r<e.length;r++)Kx(t,e[r],n)}function fp(t){for(t[Yt].changeDetectionScheduler?.notify();t;){t[G]|=64;let e=Ls(t);if(MR(t)&&!e)return t;t=e}return null}var Jr=class{get rootNodes(){let e=this._lView,n=e[se];return Cu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ut]}set context(e){this._lView[Ut]=e}get destroyed(){return(this._lView[G]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[at];if(kn(e)){let n=e[gu],r=n?n.indexOf(this):-1;r>-1&&(Eu(e,r),hu(n,r))}this._attachedToViewContainer=!1}op(this._lView[se],this._lView)}onDestroy(e){Hw(this._lView,e)}markForCheck(){fp(this._cdRefInjectingView||this._lView)}detach(){this._lView[G]&=-129}reattach(){of(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,QE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,bE(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e,of(this._lView)}},pp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Jx;let t=e;return t})(),Qx=pp,Yx=class extends Qx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=zE(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Jr(i)}};function Jx(){return Zx(wt(),De())}function Zx(t,e){return t.type&4?new Yx(e,t,Vu(t,e)):null}var iG=new RegExp(`^(\\d+)*(${xM}|${MM})*(.*)`);var Xx=()=>null;function vf(t,e){return Xx(t,e)}var _f=class{},If=class{},bu=class{};function eN(t){let e=Error(`No component factory found for ${pt(t)}.`);return e[tN]=t,e}var tN="ngComponent";var wf=class{resolveComponentFactory(e){throw eN(e)}},qu=(()=>{let e=class e{};e.NULL=new wf;let t=e;return t})(),Vs=class{},ri=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>nN();let t=e;return t})();function nN(){let t=De(),e=wt(),n=dr(e.index,t);return(Hr(n)?n:t)[Le]}var rN=(()=>{let e=class e{};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Hh={};var XI=new Set;function gp(t){XI.has(t)||(XI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function ew(...t){}function iN(){let t=typeof $r.requestAnimationFrame=="function",e=$r[t?"requestAnimationFrame":"setTimeout"],n=$r[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Ee=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=iN().nativeRequestAnimationFrame,aN(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,oN,ew,ew);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},oN={};function mp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sN(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call($r,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ef(t),t.isCheckStableRunning=!0,mp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ef(t))}function aN(t){let e=()=>{sN(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(cN(a))return n.invokeTask(i,o,s,a);try{return tw(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),nw(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return tw(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),nw(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Ef(t),mp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Ef(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function tw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nw(t){t._nesting--,mp(t)}function cN(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var XE=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Df(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=MI(i,a);else if(o==2){let u=a,l=e[++s];r=MI(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Tu=class extends qu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=zr(e);return new Us(n,this.ngModule)}};function rw(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function uN(t){let e=t.toLowerCase();return e==="svg"?OR:e==="math"?kR:null}var Cf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Nu(r);let i=this.injector.get(e,Hh,r);return i!==Hh||n===Hh?i:this.parentInjector.get(e,n,r)}},Us=class extends bu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=rw(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return rw(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=hR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=me(null);try{i=i||this.ngModule;let s=i instanceof Vt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Cf(e,s):e,u=a.get(Vs,null);if(u===null)throw new H(407,!1);let l=a.get(rN,null),h=a.get(XE,null),p=a.get(_f,null),y={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},w=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",M=r?lx(w,r,this.componentDef.encapsulation,a):CE(w,S,uN(S)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let O=null;M!==null&&(O=tp(M,a,!0));let K=up(0,null,null,1,0,null,null,null,null,null,null),$=Bu(null,K,null,x,null,null,y,w,a,null,O);zf($);let fe,xe;try{let ee=this.componentDef,D,m=null;ee.findHostDirectiveDefs?(D=[],m=new Map,ee.findHostDirectiveDefs(ee,D,m),D.push(ee)):D=[ee];let v=lN($,M),E=dN(v,M,ee,D,$,y,w);xe=$f(K,dn),M&&pN(w,ee,M,r),n!==void 0&&gN(xe,this.ngContentSelectors,n),fe=fN(E,ee,D,m,$,[mN]),hp(K,$,null)}finally{Gf()}return new bf(this.componentType,fe,Vu(xe,$),$,xe)}finally{me(o)}}},bf=class extends If{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Jr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;dp(o[se],o,i,e,n),this.previousInputValues.set(e,n);let s=dr(this._tNode.index,o);fp(s)}}get injector(){return new qr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function lN(t,e){let n=t[se],r=dn;return t[r]=e,$u(n,r,2,"#host",null)}function dN(t,e,n,r,i,o,s){let a=i[se];hN(r,t,e,s);let u=null;e!==null&&(u=tp(e,i[co]));let l=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Bu(i,VE(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&pf(a,t,r.length-1),Hu(i,p),i[t.index]=p}function hN(t,e,n,r){for(let i of t)e.mergedAttrs=Ns(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Df(e,e.mergedAttrs,!0),n!==null&&ME(r,n,e))}function fN(t,e,n,r,i,o){let s=wt(),a=i[se],u=jt(s,i);jE(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let p=s.directiveStart+h,y=lo(i,a,p,s);Yr(y,i)}BE(a,i,s),u&&Yr(u,i);let l=lo(i,a,s.directiveStart+s.componentOffset,s);if(t[Ut]=i[Ut]=l,o!==null)for(let h of o)h(l,e);return kE(a,s,i),l}function pN(t,e,n,r){if(r)Xh(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=fR(e.selectors[0]);i&&Xh(t,n,i),o&&o.length>0&&RE(t,n,o.join(" "))}}function gN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function mN(){let t=wt();Qf(De()[se],t)}var Qs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=yN;let t=e;return t})();function yN(){let t=wt();return _N(t,De())}var vN=Qs,eD=class extends vN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new qr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yf(this._hostTNode,this._hostLView);if(tE(e)){let n=_u(e,this._hostLView),r=vu(e),i=n[se].data[r+8];return new qr(i,n)}else return new qr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=iw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-bt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=vf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,mf(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!RR(e),a;if(s)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new Us(zr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(s?l:this.parentInjector).get(Vt,null);M&&(o=M)}let h=zr(u.componentType??{}),p=vf(this._lContainer,h?.id??null),y=p?.firstChild??null,w=u.create(l,i,y,o);return this.insertImpl(w.hostView,a,mf(this._hostTNode,p)),w}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(VR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[at],l=new eD(u,u[Zt],u[at]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return GE(s,i,o,r),e.attachToViewContainerRef(),vw(qh(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=iw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Eu(this._lContainer,n);r&&(hu(qh(this._lContainer),n),op(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=Eu(this._lContainer,n);return r&&hu(qh(this._lContainer),n)!=null?new Jr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function iw(t){return t[gu]}function qh(t){return t[gu]||(t[gu]=[])}function _N(t,e){let n,r=e[t.index];return kn(r)?n=r:(n=$E(r,e,null,t),e[t.index]=n,Hu(e,n)),wN(n,e,t,r),new eD(n,t,e)}function IN(t,e){let n=t[Le],r=n.createComment(""),i=jt(e,t),o=sp(n,i);return Du(n,o,r,ZM(n,i),!1),r}var wN=CN,EN=()=>!1;function DN(t,e,n){return EN(t,e,n)}function CN(t,e,n,r){if(t[Wr])return;let i;n.type&8?i=hn(r):i=IN(e,n),t[Wr]=i}function bN(t){return typeof t=="function"&&t[fh]!==void 0}function tD(t){return bN(t)&&typeof t.set=="function"}function TN(t){return Object.getPrototypeOf(t.prototype).constructor}function go(t){let e=TN(t.type),n=!0,r=[t];for(;e;){let i;if(ur(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=ru(t.inputs),s.inputTransforms=ru(t.inputTransforms),s.declaredInputs=ru(t.declaredInputs),s.outputs=ru(t.outputs);let a=i.hostBindings;a&&xN(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&RN(t,u),l&&MN(t,l),AN(t,i),PS(t.outputs,i.outputs),ur(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===go&&(n=!1)}}e=Object.getPrototypeOf(e)}SN(r)}function AN(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function SN(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ns(i.hostAttrs,n=Ns(n,i.hostAttrs))}}function ru(t){return t===oo?{}:t===Lt?[]:t}function RN(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function MN(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function xN(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function yp(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var lr=class{},js=class{};var Tf=class extends lr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tu(this);let i=Aw(e);this._bootstrapComponents=DE(i.bootstrap),this._r3Injector=lE(e,n,[{provide:lr,useValue:this},{provide:qu,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Af=class extends js{constructor(e){super(),this.moduleType=e}create(e){return new Tf(this.moduleType,e,[])}};var Au=class extends lr{constructor(e){super(),this.componentFactoryResolver=new Tu(this),this.instance=null;let n=new Ps([...e.providers,{provide:lr,useValue:this},{provide:qu,useValue:this.componentFactoryResolver}],e.parent||Uf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function vp(t,e,n=null){return new Au({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var zu=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NN(t,e,n){return t[e]=n}function PN(t,e){return t[e]}function mo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function ON(t){return(t.flags&32)===32}function kN(t,e,n,r,i,o,s,a,u){let l=e.consts,h=$u(e,t,4,s||null,yu(l,a));UE(e,n,h,yu(l,u)),Qf(e,h);let p=h.tView=up(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Fn(t,e,n,r,i,o,s,a){let u=De(),l=It(),h=t+dn,p=l.firstCreatePass?kN(h,l,u,e,n,r,i,o,s):l.data[h];zs(p,!1);let y=FN(l,u,p,t);Wf()&&ap(l,u,y,p),Yr(y,u);let w=$E(y,u,y,p);return u[h]=w,Hu(u,w),DN(w,p,u),Bf(p)&&FE(l,u,p),s!=null&&LE(u,p,a),Fn}var FN=LN;function LN(t,e,n,r){return Kf(!0),e[Le].createComment("")}function Gu(t,e,n,r){let i=De(),o=Gs();if(mo(i,o,e)){let s=It(),a=Lu();Ax(a,i,t,e,n,r)}return Gu}function nD(t,e,n,r){return mo(t,Gs(),n)?e+xu(n)+r:pr}function iu(t,e){return t<<17|e<<2}function Zr(t){return t>>17&32767}function VN(t){return(t&2)==2}function UN(t,e){return t&131071|e<<17}function Sf(t){return t|2}function ho(t){return(t&131068)>>2}function zh(t,e){return t&-131069|e<<2}function jN(t){return(t&1)===1}function Rf(t){return t|1}function BN(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Zr(s),u=ho(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||qs(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let y=Zr(t[a+1]);t[r+1]=iu(y,a),y!==0&&(t[y+1]=zh(t[y+1],r)),t[a+1]=UN(t[a+1],r)}else t[r+1]=iu(a,0),a!==0&&(t[a+1]=zh(t[a+1],r)),a=r;else t[r+1]=iu(u,0),a===0?a=r:t[u+1]=zh(t[u+1],r),u=r;l&&(t[r+1]=Sf(t[r+1])),ow(t,h,r,!0),ow(t,h,r,!1),$N(e,h,t,r,o),s=iu(a,u),o?e.classBindings=s:e.styleBindings=s}function $N(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&qs(o,e)>=0&&(n[r+1]=Rf(n[r+1]))}function ow(t,e,n,r){let i=t[n+1],o=e===null,s=r?Zr(i):ho(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];HN(u,e)&&(a=!0,t[s+1]=r?Rf(l):Sf(l)),s=r?Zr(l):ho(l)}a&&(t[n+1]=r?Sf(i):Rf(i))}function HN(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?qs(t,e)>=0:!1}function gr(t,e,n){let r=De(),i=Gs();if(mo(r,i,e)){let o=It(),s=Lu();lp(o,s,r,t,e,r[Le],n,!1)}return gr}function sw(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";dp(t,n,o[s],s,r)}function _p(t,e){return qN(t,e,null,!0),_p}function qN(t,e,n,r){let i=De(),o=It(),s=ZR(2);if(o.firstUpdatePass&&GN(o,t,s,r),e!==pr&&mo(i,s,e)){let a=o.data[po()];JN(o,a,i,i[Le],t,i[s+1]=ZN(e,n),r,s)}}function zN(t,e){return e>=t.expandoStartIndex}function GN(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[po()],s=zN(t,n);XN(o,r)&&e===null&&!s&&(e=!1),e=WN(i,o,e,r),BN(i,o,e,n,s,r)}}function WN(t,e,n,r){let i=nM(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Gh(null,t,e,n,r),n=Bs(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Gh(i,t,e,n,r),o===null){let u=KN(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Gh(null,t,e,u[1],r),u=Bs(u,e.attrs,r),QN(t,e,r,u))}else o=YN(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function KN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ho(r)!==0)return t[Zr(r)]}function QN(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Zr(i)]=r}function YN(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Bs(r,s,n)}return Bs(r,e.attrs,n)}function Gh(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Bs(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Bs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),eR(t,s,n?!0:e[++o]))}return t===void 0?null:t}function JN(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=jN(l)?aw(u,e,n,i,ho(l),s):void 0;if(!Su(h)){Su(o)||VN(l)&&(o=aw(u,null,n,i,a,s));let p=Bw(po(),n);ox(r,s,p,i,o)}}function aw(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=n[i+1];y===pr&&(y=p?Lt:void 0);let w=p?kh(y,r):h===r?y:void 0;if(l&&!Su(w)&&(w=kh(u,r)),Su(w)&&(a=w,s))return a;let S=t[i+1];i=s?Zr(S):ho(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=kh(u,r))}return a}function Su(t){return t!==void 0}function ZN(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=pt(Ks(t)))),t}function XN(t,e){return(t.flags&(e?8:16))!==0}function mr(t,e,n){gp("NgControlFlow");let r=De(),i=Gs(),o=eP(r,dn+t),s=0;if(mo(r,i,e)){let a=me(null);try{if(Vx(o,s),e!==-1){let u=tP(r[se],dn+e),l=vf(o,u.tView.ssrId),h=zE(r,u,n,{dehydratedView:l});GE(o,h,s,mf(u,l))}}finally{me(a)}}else{let a=Lx(o,s);a!==void 0&&(a[Ut]=n)}}function eP(t,e){return t[e]}function tP(t,e){return $f(t,e)}function nP(t,e,n,r,i,o){let s=e.consts,a=yu(s,i),u=$u(e,t,2,r,a);return UE(e,n,u,yu(s,o)),u.attrs!==null&&Df(u,u.attrs,!1),u.mergedAttrs!==null&&Df(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function U(t,e,n,r){let i=De(),o=It(),s=dn+t,a=i[Le],u=o.firstCreatePass?nP(s,o,i,e,n,r):o.data[s],l=rP(o,i,u,a,e,t);i[s]=l;let h=Bf(u);return zs(u,!0),ME(a,l,u),!ON(u)&&Wf()&&ap(o,i,l,u),$R()===0&&Yr(l,i),HR(),h&&(FE(o,i,u),kE(o,u,i)),r!==null&&LE(i,u),U}function j(){let t=wt();Gw()?QR():(t=t.parent,zs(t,!1));let e=t;GR(e)&&WR(),qR();let n=It();return n.firstCreatePass&&(Qf(n,t),Fw(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&uM(e)&&sw(n,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&lM(e)&&sw(n,e,De(),e.stylesWithoutHost,!1),j}function ze(t,e,n,r){return U(t,e,n,r),j(),ze}var rP=(t,e,n,r,i,o)=>(Kf(!0),CE(r,i,oM()));function Ln(){return De()}var Ru="en-US";var iP=Ru;function oP(t){typeof t=="string"&&(iP=t.toLowerCase().replace(/_/g,"-"))}function Se(t,e,n,r){let i=De(),o=It(),s=wt();return rD(o,i,i[Le],s,t,e,r),Se}function sP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Os],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function rD(t,e,n,r,i,o,s){let a=Bf(r),l=t.firstCreatePass&&Nx(t),h=e[Ut],p=xx(e),y=!0;if(r.type&3||s){let M=jt(r,e),x=s?s(M):M,O=p.length,K=s?fe=>s(hn(fe[r.index])):r.index,$=null;if(!s&&a&&($=sP(t,e,i,r.index)),$!==null){let fe=$.__ngLastListenerFn__||$;fe.__ngNextListenerFn__=o,$.__ngLastListenerFn__=o,y=!1}else{o=uw(r,e,h,o,!1);let fe=n.listen(x,i,o);p.push(o,fe),l&&l.push(i,K,O,O+1)}}else o=uw(r,e,h,o,!1);let w=r.outputs,S;if(y&&w!==null&&(S=w[i])){let M=S.length;if(M)for(let x=0;x<M;x+=2){let O=S[x],K=S[x+1],xe=e[O][K].subscribe(o),ee=p.length;p.push(o,xe),l&&l.push(i,r.index,ee,-(ee+1))}}}function cw(t,e,n,r){let i=me(null);try{return an(6,e,n),n(r)!==!1}catch(o){return qE(t,o),!1}finally{an(7,e,n),me(i)}}function uw(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?dr(t.index,e):e;fp(a);let u=cw(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=cw(e,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function Ge(t=1){return iM(t)}function Ip(t,e,n){return iD(t,"",e,"",n),Ip}function iD(t,e,n,r,i){let o=De(),s=nD(o,e,n,r);if(s!==pr){let a=It(),u=Lu();lp(a,u,o,t,s,o[Le],i,!1)}return iD}function te(t,e=""){let n=De(),r=It(),i=t+dn,o=r.firstCreatePass?$u(r,i,1,e,null):r.data[i],s=aP(r,n,o,e,t);n[i]=s,Wf()&&ap(r,n,s,o),zs(o,!1)}var aP=(t,e,n,r,i)=>(Kf(!0),jM(e[Le],r));function Tt(t){return yr("",t,""),Tt}function yr(t,e,n){let r=De(),i=nD(r,t,e,n);return i!==pr&&Px(r,po(),i),yr}function ii(t,e,n){tD(e)&&(e=e());let r=De(),i=Gs();if(mo(r,i,e)){let o=It(),s=Lu();lp(o,s,r,t,e,r[Le],n,!1)}return ii}function yo(t,e){let n=tD(t);return n&&t.set(e),n}function oi(t,e){let n=De(),r=It(),i=wt();return rD(r,n,n[Le],i,t,e),oi}function cP(t,e,n){let r=It();if(r.firstCreatePass){let i=ur(t);Mf(n,r.data,r.blueprint,i,!0),Mf(e,r.data,r.blueprint,i,!1)}}function Mf(t,e,n,r,i){if(t=ft(t),Array.isArray(t))for(let o=0;o<t.length;o++)Mf(t[o],e,n,r,i);else{let o=It(),s=De(),a=wt(),u=ao(t)?t:ft(t.provide),l=Pw(t),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(ao(t)||!t.multi){let w=new Qr(l,i,re),S=Kh(u,e,i?h:h+y,p);S===-1?(cf(Iu(a,s),o,u),Wh(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),s.push(w)):(n[S]=w,s[S]=w)}else{let w=Kh(u,e,h+y,p),S=Kh(u,e,h,h+y),M=w>=0&&n[w],x=S>=0&&n[S];if(i&&!x||!i&&!M){cf(Iu(a,s),o,u);let O=dP(i?lP:uP,n.length,i,r,l);!i&&x&&(n[S].providerFactory=O),Wh(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=oD(n[i?S:w],l,!i&&r);Wh(o,t,w>-1?w:S,O)}!i&&r&&x&&n[S].componentProviders++}}}function Wh(t,e,n,r){let i=ao(e),o=wR(e);if(i||o){let u=(o?ft(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function oD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Kh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function uP(t,e,n,r){return xf(this.multi,[])}function lP(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=lo(n,n[se],this.providerFactory.index,r);o=a.slice(0,s),xf(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],xf(i,o);return o}function xf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function dP(t,e,n,r,i){let o=new Qr(t,n,re);return o.multi=[],o.index=e,o.componentProviders=0,oD(o,i,r&&!n),o}function wp(t,e=[]){return n=>{n.providersResolver=(r,i)=>cP(r,i?i(t):t,e)}}var hP=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Mw(!1,r.type),o=i.length>0?vp([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Q({token:e,providedIn:"environment",factory:()=>new e(le(Vt))});let t=e;return t})();function We(t){gp("NgStandalone"),t.getStandaloneInjector=e=>e.get(hP).getOrCreateStandaloneInjector(t)}function vo(t,e,n){let r=YR()+t,i=De();return i[r]===pr?NN(i,r,n?e.call(n):e()):PN(i,r)}var Pn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},sD=new Pn("17.3.12"),Wu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var aD=new W("");function si(t){return!!t&&typeof t.then=="function"}function cD(t){return!!t&&typeof t.subscribe=="function"}var uD=new W(""),lD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=V(uD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(si(s))r.push(s);else if(cD(s)){let a=new Promise((u,l)=>{s.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ep=new W("");function fP(){oI(()=>{throw new H(600,!1)})}function pP(t){return t.isBoundToModule}function gP(t,e,n){try{let r=n();return si(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ys=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(dE),this.afterRenderEffectManager=V(XE),this.externalTestViews=new Set,this.beforeRender=new st,this.afterTick=new st,this.componentTypes=[],this.components=[],this.isStable=V(zu).hasPendingTasks.pipe(ie(r=>!r)),this._injector=V(Vt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof bu;if(!this._injector.get(lD).done){let w=!o&&Tw(r),S=!1;throw new H(405,S)}let a;o?a=r:a=this._injector.get(qu).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=pP(a)?void 0:this._injector.get(lr),l=i||a.selector,h=a.create(Bt.NULL,[],l,u),p=h.location.nativeElement,y=h.injector.get(aD,null);return y?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Qh(this.components,h),y?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new H(101,!1);let i=me(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,me(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===KE)throw new H(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:u}of this._views)mP(a,s,u)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Nf(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Nf(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Qh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ep,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Qh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new H(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Qh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function mP(t,e,n){!e&&!Nf(t)||yP(t,n,e)}function Nf(t){return qf(t)}function yP(t,e,n){let r;n?(r=0,t[G]|=1024):t[G]&64?r=0:r=1,QE(t,e,r)}var Pf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Dp=(()=>{let e=class e{compileModuleSync(r){return new Af(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Aw(r),s=DE(o.declarations).reduce((a,u)=>{let l=zr(u);return l&&a.push(new Us(l)),a},[]);return new Pf(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vP=(()=>{let e=class e{constructor(){this.zone=V(Ee),this.applicationRef=V(Ys)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _P(t){return[{provide:Ee,useFactory:t},{provide:so,multi:!0,useFactory:()=>{let e=V(vP,{optional:!0});return()=>e.initialize()}},{provide:so,multi:!0,useFactory:()=>{let e=V(DP);return()=>{e.initialize()}}},{provide:dE,useFactory:IP}]}function IP(){let t=V(Ee),e=V(xn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function wP(t){let e=_P(()=>new Ee(EP(t)));return fn([[],e])}function EP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var DP=(()=>{let e=class e{constructor(){this.subscription=new ke,this.initialized=!1,this.zone=V(Ee),this.pendingTasks=V(zu)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CP(){return typeof $localize<"u"&&$localize.locale||Ru}var Cp=new W("",{providedIn:"root",factory:()=>V(Cp,oe.Optional|oe.SkipSelf)||CP()});var dD=new W("");var uu=null;function bP(t=[],e){return Bt.create({name:e,providers:[{provide:Pu,useValue:"platform"},{provide:dD,useValue:new Set([()=>uu=null])},...t]})}function TP(t=[]){if(uu)return uu;let e=bP(t);return uu=e,fP(),AP(e),e}function AP(t){t.get(Xf,null)?.forEach(n=>n())}var ai=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=SP;let t=e;return t})();function SP(t){return RP(wt(),De(),(t&16)===16)}function RP(t,e,n){if(Fu(t)&&!n){let r=dr(t.index,e);return new Jr(r,r)}else if(t.type&47){let r=e[ln];return new Jr(r,e)}return null}function hD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=TP(r),o=[wP(),...n||[]],a=new Au({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Ee);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(xn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:w=>{l.handleError(w)}})});let p=()=>a.destroy(),y=i.get(dD);return y.add(p),a.onDestroy(()=>{h.unsubscribe(),y.delete(p)}),gP(l,u,()=>{let w=a.get(lD);return w.runInitializers(),w.donePromise.then(()=>{let S=a.get(Cp,Ru);oP(S||Ru);let M=a.get(Ys);return e!==void 0&&M.bootstrap(e),M})})})}catch(e){return Promise.reject(e)}}function ci(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var mD=null;function Vn(){return mD}function yD(t){mD??=t}var Ku=class{};var $t=new W(""),vD=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>V(MP),providedIn:"platform"});let t=e;return t})();var MP=(()=>{let e=class e extends vD{constructor(){super(),this._doc=V($t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vn().getBaseHref(this._doc)}onPopState(r){let i=Vn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Vn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function _D(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function fD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ui(t){return t&&t[0]!=="?"?"?"+t:t}var _o=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>V(ID),providedIn:"root"});let t=e;return t})(),xP=new W(""),ID=(()=>{let e=class e extends _o{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??V($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return _D(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ui(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+ui(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+ui(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(le(vD),le(xP,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Js=(()=>{let e=class e{constructor(r){this._subject=new Ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=OP(fD(pD(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ui(i))}normalize(r){return e.stripTrailingSlash(PP(this._basePath,pD(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ui(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ui(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=ui,e.joinWithSlash=_D,e.stripTrailingSlash=fD,e.\u0275fac=function(i){return new(i||e)(le(_o))},e.\u0275prov=Q({token:e,factory:()=>NP(),providedIn:"root"});let t=e;return t})();function NP(){return new Js(le(_o))}function PP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function pD(t){return t.replace(/\/index.html$/,"")}function OP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function wD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ED=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new bp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){gD("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){gD("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(re(Qs),re(pp))},e.\u0275dir=Jt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),bp=class{constructor(){this.$implicit=null,this.ngIf=null}};function gD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${pt(e)}'.`)}var Zs=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Xr({});let t=e;return t})(),DD="browser",kP="server";function Tp(t){return t===kP}var Qu=class{};var Rp=class extends Ku{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Mp=class t extends Rp{static makeCurrent(){yD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=FP();return n==null?null:LP(n)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wD(document.cookie,e)}},Xs=null;function FP(){return Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null}function LP(t){return new URL(t,document.baseURI).pathname}var VP=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),xp=new W(""),SD=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new H(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(le(xp),le(Ee))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Yu=class{constructor(e){this._doc=e}},Ap="ng-app-id",RD=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Tp(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ap}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Ap),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ap,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(le($t),le(Zf),le(ep,8),le(fr))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Sp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pp=/%COMP%/g,MD="%COMP%",UP=`_nghost-${MD}`,jP=`_ngcontent-${MD}`,BP=!0,$P=new W("",{providedIn:"root",factory:()=>BP});function HP(t){return jP.replace(Pp,t)}function qP(t){return UP.replace(Pp,t)}function xD(t,e){return e.map(n=>n.replace(Pp,t))}var bD=(()=>{let e=class e{constructor(r,i,o,s,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Tp(u),this.defaultRenderer=new ea(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===un.ShadowDom&&(i=we(F({},i),{encapsulation:un.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Ju?o.applyToHost(r):o instanceof ta&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(i.encapsulation){case un.Emulated:s=new Ju(l,h,i,this.appId,p,a,u,y);break;case un.ShadowDom:return new Np(l,h,r,i,a,u,this.nonce,y);default:s=new ta(l,h,i,p,a,u,y);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(le(SD),le(RD),le(Zf),le($P),le($t),le(fr),le(Ee),le(ep))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),ea=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Sp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(TD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(TD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Sp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Sp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Nn.DashCase|Nn.Important)?e.style.setProperty(n,r,i&Nn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Nn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Vn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function TD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Np=class extends ea{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=xD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ta=class extends ea{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?xD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ju=class extends ta{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=HP(l),this.hostAttr=qP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},zP=(()=>{let e=class e extends Yu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(le($t))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),AD=["alt","control","meta","shift"],GP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},KP=(()=>{let e=class e extends Yu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),AD.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=GP[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),AD.forEach(a=>{if(a!==o){let u=WP[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(le($t))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function ND(t,e){return hD(F({rootComponent:t},QP(e)))}function QP(t){return{appProviders:[...eO,...t?.providers??[]],platformProviders:XP}}function YP(){Mp.makeCurrent()}function JP(){return new xn}function ZP(){return vE(document),document}var XP=[{provide:fr,useValue:DD},{provide:Xf,useValue:YP,multi:!0},{provide:$t,useFactory:ZP,deps:[]}];var eO=[{provide:Pu,useValue:"root"},{provide:xn,useFactory:JP,deps:[]},{provide:xp,useClass:zP,multi:!0,deps:[$t,Ee,fr]},{provide:xp,useClass:KP,multi:!0,deps:[$t]},bD,RD,SD,{provide:Vs,useExisting:bD},{provide:Qu,useClass:VP,deps:[]},[]];var PD=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(le($t))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ne="primary",ma=Symbol("RouteTitle"),Vp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Co(t){return new Vp(t)}function nO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function rO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pn(t[n],e[n]))return!1;return!0}function pn(t,e){let n=t?Up(t):void 0,r=e?Up(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!UD(t[i],e[i]))return!1;return!0}function Up(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function UD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function jD(t){return t.length>0?t[t.length-1]:null}function Ir(t){return Rh(t)?t:si(t)?Pe(Promise.resolve(t)):Z(t)}var iO={exact:$D,subset:HD},BD={exact:oO,subset:sO,ignored:()=>!0};function OD(t,e,n){return iO[n.paths](t.root,e.root,n.matrixParams)&&BD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function oO(t,e){return pn(t,e)}function $D(t,e,n){if(!di(t.segments,e.segments)||!el(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!$D(t.children[r],e.children[r],n))return!1;return!0}function sO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>UD(t[n],e[n]))}function HD(t,e,n){return qD(t,e,e.segments,n)}function qD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!di(i,n)||e.hasChildren()||!el(i,n,r))}else if(t.segments.length===n.length){if(!di(t.segments,n)||!el(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!HD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!di(t.segments,i)||!el(t.segments,i,r)||!t.children[ne]?!1:qD(t.children[ne],e,o,r)}}function el(t,e,n){return e.every((r,i)=>BD[n](t[i].parameters,r.parameters))}var vr=class{constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Co(this.queryParams),this._queryParamMap}toString(){return uO.serialize(this)}},Ie=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tl(this)}},li=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Co(this.parameters),this._parameterMap}toString(){return GD(this)}};function aO(t,e){return di(t,e)&&t.every((n,r)=>pn(n.parameters,e[r].parameters))}function di(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function cO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ne&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ne&&(n=n.concat(e(i,r)))}),n}var dg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>new rl,providedIn:"root"});let t=e;return t})(),rl=class{parse(e){let n=new Bp(e);return new vr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${na(e.root,!0)}`,r=hO(e.queryParams),i=typeof e.fragment=="string"?`#${lO(e.fragment)}`:"";return`${n}${r}${i}`}},uO=new rl;function tl(t){return t.segments.map(e=>GD(e)).join("/")}function na(t,e){if(!t.hasChildren())return tl(t);if(e){let n=t.children[ne]?na(t.children[ne],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ne&&r.push(`${i}:${na(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=cO(t,(r,i)=>i===ne?[na(t.children[ne],!1)]:[`${i}:${na(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ne]!=null?`${tl(t)}/${n[0]}`:`${tl(t)}/(${n.join("//")})`}}function zD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zu(t){return zD(t).replace(/%3B/gi,";")}function lO(t){return encodeURI(t)}function jp(t){return zD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nl(t){return decodeURIComponent(t)}function kD(t){return nl(t.replace(/\+/g,"%20"))}function GD(t){return`${jp(t.path)}${dO(t.parameters)}`}function dO(t){return Object.entries(t).map(([e,n])=>`;${jp(e)}=${jp(n)}`).join("")}function hO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Zu(n)}=${Zu(i)}`).join("&"):`${Zu(n)}=${Zu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var fO=/^[^\/()?;#]+/;function Op(t){let e=t.match(fO);return e?e[0]:""}var pO=/^[^\/()?;=#]+/;function gO(t){let e=t.match(pO);return e?e[0]:""}var mO=/^[^=?&#]+/;function yO(t){let e=t.match(mO);return e?e[0]:""}var vO=/^[^&#]+/;function _O(t){let e=t.match(vO);return e?e[0]:""}var Bp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new Ie(e,n)),r}parseSegment(){let e=Op(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new li(nl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=gO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Op(this.remaining);i&&(r=i,this.capture(r))}e[nl(n)]=nl(r)}parseQueryParam(e){let n=yO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=_O(this.remaining);s&&(r=s,this.capture(r))}let i=kD(n),o=kD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Op(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ne);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ne]:new Ie([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function WD(t){return t.segments.length>0?new Ie([],{[ne]:t}):t}function KD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=KD(i);if(r===ne&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ie(t.segments,e);return IO(n)}function IO(t){if(t.numberOfChildren===1&&t.children[ne]){let e=t.children[ne];return new Ie(t.segments.concat(e.segments),e.children)}return t}function bo(t){return t instanceof vr}function wO(t,e,n=null,r=null){let i=QD(t);return YD(i,e,n,r)}function QD(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Ie(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=WD(r);return e??i}function YD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return kp(i,i,i,n,r);let o=EO(e);if(o.toRoot())return kp(i,i,new Ie([],{}),n,r);let s=DO(o,i,t),a=s.processChildren?oa(s.segmentGroup,s.index,o.commands):ZD(s.segmentGroup,s.index,o.commands);return kp(i,s.segmentGroup,a,n,r)}function il(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ca(t){return typeof t=="object"&&t!=null&&t.outlets}function kp(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=JD(t,e,n);let a=WD(KD(s));return new vr(a,o,i)}function JD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=JD(o,e,n)}),new Ie(t.segments,r)}var ol=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&il(r[0]))throw new H(4003,!1);let i=r.find(ca);if(i&&i!==jD(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function EO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ol(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ol(n,e,r)}var Eo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function DO(t,e,n){if(t.isAbsolute)return new Eo(e,!0,0);if(!n)return new Eo(e,!1,NaN);if(n.parent===null)return new Eo(n,!0,0);let r=il(t.commands[0])?0:1,i=n.segments.length-1+r;return CO(n,i,t.numberOfDoubleDots)}function CO(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Eo(r,!1,i-o)}function bO(t){return ca(t[0])?t[0].outlets:{[ne]:t}}function ZD(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return oa(t,e,n);let r=TO(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ie(t.segments.slice(0,r.pathIndex),{});return o.children[ne]=new Ie(t.segments.slice(r.pathIndex),t.children),oa(o,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?$p(t,e,n):r.match?oa(t,0,i):$p(t,e,n)}function oa(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=bO(n),i={};if(Object.keys(r).some(o=>o!==ne)&&t.children[ne]&&t.numberOfChildren===1&&t.children[ne].segments.length===0){let o=oa(t.children[ne],e,n);return new Ie(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ZD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(t.segments,i)}}function TO(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ca(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!LD(u,l,s))return o;r+=2}else{if(!LD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function $p(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ca(o)){let u=AO(o.outlets);return new Ie(r,u)}if(i===0&&il(n[0])){let u=t.segments[e];r.push(new li(u.path,FD(n[0]))),i++;continue}let s=ca(o)?o.outlets[ne]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&il(a)?(r.push(new li(s,FD(a))),i+=2):(r.push(new li(s,{})),i++)}return new Ie(r,{})}function AO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=$p(new Ie([],{}),0,r))}),e}function FD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function LD(t,e,n){return t==n.path&&pn(e,n.parameters)}var sa="imperative",Xe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Xe||{}),Ht=class{constructor(e,n){this.id=e,this.url=n}},ua=class extends Ht{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Xe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gn=class extends Ht{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Xe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Rt||{}),Hp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Hp||{}),_r=class extends Ht{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Xe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hi=class extends Ht{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Xe.NavigationSkipped}},la=class extends Ht{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Xe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sl=class extends Ht{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Xe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qp=class extends Ht{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Xe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zp=class extends Ht{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Xe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gp=class extends Ht{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Xe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wp=class extends Ht{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Xe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kp=class{constructor(e){this.route=e,this.type=Xe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qp=class{constructor(e){this.route=e,this.type=Xe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yp=class{constructor(e){this.snapshot=e,this.type=Xe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jp=class{constructor(e){this.snapshot=e,this.type=Xe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zp=class{constructor(e){this.snapshot=e,this.type=Xe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xp=class{constructor(e){this.snapshot=e,this.type=Xe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var da=class{},ha=class{constructor(e){this.url=e}};var eg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new hl,this.attachRef=null}},hl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new eg,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),al=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=tg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=tg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ng(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ng(e,this._root).map(n=>n.value)}};function tg(t,e){if(t===e.value)return e;for(let n of e.children){let r=tg(t,n);if(r)return r}return null}function ng(t,e){if(t===e.value)return[e];for(let n of e.children){let r=ng(t,n);if(r.length)return r.unshift(e),r}return[]}var St=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function wo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var cl=class extends al{constructor(e,n){super(e),this.snapshot=n,fg(this,e)}toString(){return this.snapshot.toString()}};function XD(t){let e=SO(t),n=new Je([new li("",{})]),r=new Je({}),i=new Je({}),o=new Je({}),s=new Je(""),a=new fi(n,r,o,s,i,ne,t,e.root);return a.snapshot=e.root,new cl(new St(a,[]),e)}function SO(t){let e={},n={},r={},i="",o=new fa([],e,r,i,n,ne,t,null,{});return new ul("",new St(o,[]))}var fi=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[ma]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Co(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Co(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&t0(i)&&(r.resolve[ma]=i.title),r}var fa=class{get title(){return this.data?.[ma]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Co(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Co(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ul=class extends al{constructor(e,n){super(n),this.url=e,fg(this,n)}toString(){return e0(this._root)}};function fg(t,e){e.value._routerState=t,e.children.forEach(n=>fg(t,n))}function e0(t){let e=t.children.length>0?` { ${t.children.map(e0).join(", ")} } `:"";return`${t.value}${e}`}function Fp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),pn(e.params,n.params)||t.paramsSubject.next(n.params),rO(e.url,n.url)||t.urlSubject.next(n.url),pn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function rg(t,e){let n=pn(t.params,e.params)&&aO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||rg(t.parent,e.parent))}function t0(t){return typeof t.title=="string"||t.title===null}var pg=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ne,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.attachEvents=new Ze,this.detachEvents=new Ze,this.parentContexts=V(hl),this.location=V(Qs),this.changeDetector=V(ai),this.environmentInjector=V(Vt),this.inputBinder=V(gg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new ig(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Jt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ni]});let t=e;return t})(),ig=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===fi?this.route:e===hl?this.childContexts:this.parent.get(e,n)}},gg=new W("");function RO(t,e,n){let r=pa(t,e._root,n?n._root:void 0);return new cl(r,e)}function pa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=MO(t,e,n);return new St(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pa(t,a)),s}}let r=xO(e.value),i=e.children.map(o=>pa(t,o));return new St(r,i)}}function MO(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return pa(t,r,i);return pa(t,r)})}function xO(t){return new fi(new Je(t.url),new Je(t.params),new Je(t.queryParams),new Je(t.fragment),new Je(t.data),t.outlet,t.component,t)}var n0="ngNavigationCancelingError";function r0(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=bo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=i0(!1,Rt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function i0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[n0]=!0,n.cancellationCode=e,n}function NO(t){return o0(t)&&bo(t.url)}function o0(t){return!!t&&t[n0]}var PO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=qe({type:e,selectors:[["ng-component"]],standalone:!0,features:[We],decls:1,vars:0,template:function(i,o){i&1&&ze(0,"router-outlet")},dependencies:[pg],encapsulation:2});let t=e;return t})();function OO(t,e){return t.providers&&!t._injector&&(t._injector=vp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function mg(t){let e=t.children&&t.children.map(mg),n=e?we(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=PO),n}function mn(t){return t.outlet||ne}function kO(t,e){let n=t.filter(r=>mn(r)===e);return n.push(...t.filter(r=>mn(r)!==e)),n}function ya(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var FO=(t,e,n,r)=>ie(i=>(new og(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),og=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Fp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=wo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=wo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Jp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Fp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Fp(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=ya(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},ll=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Do=class{constructor(e,n){this.component=e,this.route=n}};function LO(t,e,n){let r=t._root,i=e?e._root:null;return ra(r,i,n,[r.value])}function VO(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ao(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!hw(t)?t:e.get(t):r}function ra(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=wo(e);return t.children.forEach(s=>{UO(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>aa(a,n.getContext(s),i)),i}function UO(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=jO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ll(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ra(t,e,a?a.children:null,r,i):ra(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Do(a.outlet.component,s))}else s&&aa(e,a,i),i.canActivateChecks.push(new ll(r)),o.component?ra(t,null,a?a.children:null,r,i):ra(t,null,n,r,i);return i}function jO(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!di(t.url,e.url);case"pathParamsOrQueryParamsChange":return!di(t.url,e.url)||!pn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rg(t,e)||!pn(t.queryParams,e.queryParams);case"paramsChange":default:return!rg(t,e)}}function aa(t,e,n){let r=wo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?aa(s,e.children.getContext(o),n):aa(s,null,n):aa(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Do(e.outlet.component,i)):n.canDeactivateChecks.push(new Do(null,i)):n.canDeactivateChecks.push(new Do(null,i))}function va(t){return typeof t=="function"}function BO(t){return typeof t=="boolean"}function $O(t){return t&&va(t.canLoad)}function HO(t){return t&&va(t.canActivate)}function qO(t){return t&&va(t.canActivateChild)}function zO(t){return t&&va(t.canDeactivate)}function GO(t){return t&&va(t.canMatch)}function s0(t){return t instanceof Rn||t?.name==="EmptyError"}var Xu=Symbol("INITIAL_VALUE");function To(){return Wt(t=>Yc(t.map(e=>e.pipe(Mn(1),eu(Xu)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===Xu)return Xu;if(n===!1||n instanceof vr)return n}return!0}),kt(e=>e!==Xu),Mn(1)))}function WO(t,e){return Be(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Z(we(F({},n),{guardsResult:!0})):KO(s,r,i,t).pipe(Be(a=>a&&BO(a)?QO(r,o,t,e):Z(a)),ie(a=>we(F({},n),{guardsResult:a})))})}function KO(t,e,n,r){return Pe(t).pipe(Be(i=>ek(i.component,i.route,n,e,r)),sn(i=>i!==!0,!0))}function QO(t,e,n,r){return Pe(e).pipe(Ji(i=>Yi(JO(i.route.parent,r),YO(i.route,r),XO(t,i.path,n),ZO(t,i.route,n))),sn(i=>i!==!0,!0))}function YO(t,e){return t!==null&&e&&e(new Zp(t)),Z(!0)}function JO(t,e){return t!==null&&e&&e(new Yp(t)),Z(!0)}function ZO(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Jc(()=>{let s=ya(e)??n,a=Ao(o,s),u=HO(a)?a.canActivate(e,t):ti(s,()=>a(e,t));return Ir(u).pipe(sn())}));return Z(i).pipe(To())}function XO(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>VO(s)).filter(s=>s!==null).map(s=>Jc(()=>{let a=s.guards.map(u=>{let l=ya(s.node)??n,h=Ao(u,l),p=qO(h)?h.canActivateChild(r,t):ti(l,()=>h(r,t));return Ir(p).pipe(sn())});return Z(a).pipe(To())}));return Z(o).pipe(To())}function ek(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=ya(e)??i,l=Ao(a,u),h=zO(l)?l.canDeactivate(t,e,n,r):ti(u,()=>l(t,e,n,r));return Ir(h).pipe(sn())});return Z(s).pipe(To())}function tk(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Ao(s,t),u=$O(a)?a.canLoad(e,n):ti(t,()=>a(e,n));return Ir(u)});return Z(o).pipe(To(),a0(r))}function a0(t){return xc($e(e=>{if(bo(e))throw r0(t,e)}),ie(e=>e===!0))}function nk(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Ao(s,t),u=GO(a)?a.canMatch(e,n):ti(t,()=>a(e,n));return Ir(u)});return Z(o).pipe(To(),a0(r))}var ga=class{constructor(e){this.segmentGroup=e||null}},dl=class extends Error{constructor(e){super(),this.urlTree=e}};function Io(t){return Qi(new ga(t))}function rk(t){return Qi(new H(4e3,!1))}function ik(t){return Qi(i0(!1,Rt.GuardRejected))}var sg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ne])return rk(e.redirectTo);i=i.children[ne]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new dl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new vr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ie(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},ag={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ok(t,e,n,r,i){let o=yg(t,e,n);return o.matched?(r=OO(e,r),nk(r,e,n,i).pipe(ie(s=>s===!0?o:F({},ag)))):Z(o)}function yg(t,e,n){if(e.path==="**")return sk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},ag):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||nO)(n,t,e);if(!i)return F({},ag);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function sk(t){return{matched:!0,parameters:t.length>0?jD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function VD(t,e,n,r){return n.length>0&&uk(t,n,r)?{segmentGroup:new Ie(e,ck(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&lk(t,n,r)?{segmentGroup:new Ie(t.segments,ak(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function ak(t,e,n,r){let i={};for(let o of n)if(fl(t,e,o)&&!r[mn(o)]){let s=new Ie([],{});i[mn(o)]=s}return F(F({},r),i)}function ck(t,e){let n={};n[ne]=e;for(let r of t)if(r.path===""&&mn(r)!==ne){let i=new Ie([],{});n[mn(r)]=i}return n}function uk(t,e,n){return n.some(r=>fl(t,e,r)&&mn(r)!==ne)}function lk(t,e,n){return n.some(r=>fl(t,e,r))}function fl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function dk(t,e,n,r){return mn(t)!==r&&(r===ne||!fl(e,n,t))?!1:yg(e,t,n).matched}function hk(t,e,n){return e.length===0&&!t.children[n]}var cg=class{};function fk(t,e,n,r,i,o,s="emptyOnly"){return new ug(t,e,n,r,i,s,o).recognize()}var pk=31,ug=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=VD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(n=>{let r=new fa([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,{},ne,this.rootComponentType,null,{}),i=new St(r,n),o=new ul("",i),s=wO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ne).pipe(or(r=>{if(r instanceof dl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ga?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=hg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ie(o=>o instanceof St?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Pe(i).pipe(Ji(o=>{let s=r.children[o],a=kO(n,o);return this.processSegmentGroup(e,a,s,o)}),Xc((o,s)=>(o.push(...s),o)),sr(null),Ph(),Be(o=>{if(o===null)return Io(r);let s=c0(o);return gk(s),Z(s)}))}processSegment(e,n,r,i,o,s){return Pe(n).pipe(Ji(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(or(u=>{if(u instanceof ga)return Z(null);throw u}))),sn(a=>!!a),or(a=>{if(s0(a))return hk(r,i,o)?Z(new cg):Io(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return dk(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Io(i):Io(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=yg(n,i,o);if(!a)return Io(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>pk&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Be(y=>this.processSegment(e,r,n,y.concat(h),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=ok(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Wt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Wt(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:y}=a,w=new fa(h,y,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,yk(r),mn(r),r.component??r._loadedComponent??null,r,vk(r)),{segmentGroup:S,slicedSegments:M}=VD(n,h,p,u);if(M.length===0&&S.hasChildren())return this.processChildren(l,u,S).pipe(ie(O=>O===null?null:new St(w,O)));if(u.length===0&&M.length===0)return Z(new St(w,[]));let x=mn(r)===o;return this.processSegment(l,u,S,M,x?ne:o,!0).pipe(ie(O=>new St(w,O instanceof St?[O]:[])))}))):Io(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):tk(e,n,r,this.urlSerializer).pipe(Be(i=>i?this.configLoader.loadChildren(e,n).pipe($e(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):ik(n))):Z({routes:[],injector:e})}};function gk(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}function mk(t){let e=t.value.routeConfig;return e&&e.path===""}function c0(t){let e=[],n=new Set;for(let r of t){if(!mk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=c0(r.children);e.push(new St(r.value,i))}return e.filter(r=>!n.has(r))}function yk(t){return t.data||{}}function vk(t){return t.resolve||{}}function _k(t,e,n,r,i,o){return Be(s=>fk(t,e,n,r,s.extractedUrl,i,o).pipe(ie(({state:a,tree:u})=>we(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Ik(t,e){return Be(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of u0(u))s.add(l);let a=0;return Pe(s).pipe(Ji(u=>o.has(u)?wk(u,r,t,e):(u.data=hg(u,u.parent,t).resolve,Z(void 0))),$e(()=>a++),Zi(1),Be(u=>a===s.size?Z(n):Ct))})}function u0(t){let e=t.children.map(n=>u0(n)).flat();return[t,...e]}function wk(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!t0(i)&&(o[ma]=i.title),Ek(o,t,e,r).pipe(ie(s=>(t._resolvedData=s,t.data=hg(t,t.parent,n).resolve,null)))}function Ek(t,e,n,r){let i=Up(t);if(i.length===0)return Z({});let o={};return Pe(i).pipe(Be(s=>Dk(t[s],e,n,r).pipe(sn(),$e(a=>{o[s]=a}))),Zi(1),Nh(o),or(s=>s0(s)?Ct:Qi(s)))}function Dk(t,e,n,r){let i=ya(e)??r,o=Ao(t,i),s=o.resolve?o.resolve(e,n):ti(i,()=>o(e,n));return Ir(s)}function Lp(t){return Wt(e=>{let n=t(e);return n?Pe(n).pipe(ie(()=>e)):Z(e)})}var l0=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===ne);return i}getResolvedTitleForRoute(r){return r.data[ma]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>V(Ck),providedIn:"root"});let t=e;return t})(),Ck=(()=>{let e=class e extends l0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(le(PD))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vg=new W("",{providedIn:"root",factory:()=>({})}),_g=new W(""),bk=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Dp)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ir(r.loadComponent()).pipe(ie(d0),$e(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Rs(()=>{this.componentLoaders.delete(r)})),o=new zi(i,()=>new st).pipe(qi());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Tk(i,this.compiler,r,this.onLoadEndListener).pipe(Rs(()=>{this.childrenLoaders.delete(i)})),a=new zi(s,()=>new st).pipe(qi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Tk(t,e,n,r){return Ir(t.loadChildren()).pipe(ie(d0),Be(i=>i instanceof js||Array.isArray(i)?Z(i):Pe(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(_g,[],{optional:!0,self:!0}).flat()),{routes:s.map(mg),injector:o}}))}function Ak(t){return t&&typeof t=="object"&&"default"in t}function d0(t){return Ak(t)?t.default:t}var Ig=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>V(Sk),providedIn:"root"});let t=e;return t})(),Sk=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rk=new W("");var Mk=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new st,this.transitionAbortSubject=new st,this.configLoader=V(bk),this.environmentInjector=V(Vt),this.urlSerializer=V(dg),this.rootContexts=V(hl),this.location=V(Js),this.inputBindingEnabled=V(gg,{optional:!0})!==null,this.titleStrategy=V(l0),this.options=V(vg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(Ig),this.createViewTransition=V(Rk,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Kp(o)),i=o=>this.events.next(new Qp(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(we(F(F({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Je({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(s=>s.id!==0),ie(s=>we(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Wt(s=>{let a=!1,u=!1;return Z(s).pipe(Wt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Rt.SupersededByNewNavigation),Ct;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?we(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let y="";return this.events.next(new hi(l.id,this.urlSerializer.serialize(l.rawUrl),y,Hp.IgnoredSameUrlNavigation)),l.resolve(null),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(Wt(y=>{let w=this.transitions?.getValue();return this.events.next(new ua(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),w!==this.transitions?.getValue()?Ct:Promise.resolve(y)}),_k(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),$e(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=we(F({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let w=new sl(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(w)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:y,extractedUrl:w,source:S,restoredState:M,extras:x}=l,O=new ua(y,this.urlSerializer.serialize(w),S,M);this.events.next(O);let K=XD(this.rootComponentType).snapshot;return this.currentTransition=s=we(F({},l),{targetSnapshot:K,urlAfterRedirects:w,extras:we(F({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,Z(s)}else{let y="";return this.events.next(new hi(l.id,this.urlSerializer.serialize(l.extractedUrl),y,Hp.IgnoredByUrlHandlingStrategy)),l.resolve(null),Ct}}),$e(l=>{let h=new qp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ie(l=>(this.currentTransition=s=we(F({},l),{guards:LO(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),WO(this.environmentInjector,l=>this.events.next(l)),$e(l=>{if(s.guardsResult=l.guardsResult,bo(l.guardsResult))throw r0(this.urlSerializer,l.guardsResult);let h=new zp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),kt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Rt.GuardRejected),!1)),Lp(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe($e(h=>{let p=new Gp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),Wt(h=>{let p=!1;return Z(h).pipe(Ik(this.paramsInheritanceStrategy,this.environmentInjector),$e({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Rt.NoDataFromResolver)}}))}),$e(h=>{let p=new Wp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Lp(l=>{let h=p=>{let y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe($e(w=>{p.component=w}),ie(()=>{})));for(let w of p.children)y.push(...h(w));return y};return Yc(h(l.targetSnapshot.root)).pipe(sr(null),Mn(1))}),Lp(()=>this.afterPreactivation()),Wt(()=>{let{currentSnapshot:l,targetSnapshot:h}=s,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Pe(p).pipe(ie(()=>s)):Z(s)}),ie(l=>{let h=RO(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=we(F({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),$e(()=>{this.events.next(new da)}),FO(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Mn(1),$e({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Oh(this.transitionAbortSubject.pipe($e(l=>{throw l}))),Rs(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Rt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),or(l=>{if(u=!0,o0(l))this.events.next(new _r(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),NO(l)?this.events.next(new ha(l.url)):s.resolve(!1);else{this.events.next(new la(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Ct}))}))}cancelNavigationTransition(r,i,o){let s=new _r(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xk(t){return t!==sa}var Nk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>V(Pk),providedIn:"root"});let t=e;return t})(),lg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Pk=(()=>{let e=class e extends lg{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ws(e)))(o||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),h0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:()=>V(Ok),providedIn:"root"});let t=e;return t})(),Ok=(()=>{let e=class e extends h0{constructor(){super(...arguments),this.location=V(Js),this.urlSerializer=V(dg),this.options=V(vg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(Ig),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=XD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ua)this.stateMemento=this.createStateMemento();else if(r instanceof hi)this.rawUrlTree=i.initialUrl;else if(r instanceof sl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof da?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof _r&&(r.code===Rt.GuardRejected||r.code===Rt.NoDataFromResolver)?this.restoreHistory(i):r instanceof la?this.restoreHistory(i,!0):r instanceof gn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=F(F({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ws(e)))(o||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ia=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ia||{});function kk(t,e){t.events.pipe(kt(n=>n instanceof gn||n instanceof _r||n instanceof la||n instanceof hi),ie(n=>n instanceof gn||n instanceof hi?ia.COMPLETE:(n instanceof _r?n.code===Rt.Redirect||n.code===Rt.SupersededByNewNavigation:!1)?ia.REDIRECTING:ia.FAILED),kt(n=>n!==ia.REDIRECTING),Mn(1)).subscribe(()=>{e()})}function Fk(t){throw t}var Lk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(Wu),this.stateManager=V(h0),this.options=V(vg,{optional:!0})||{},this.pendingTasks=V(zu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(Mk),this.urlSerializer=V(dg),this.location=V(Js),this.urlHandlingStrategy=V(Ig),this._events=new st,this.errorHandler=this.options.errorHandler||Fk,this.navigated=!1,this.routeReuseStrategy=V(Nk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(_g,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(gg,{optional:!0}),this.eventsSubscription=new ke,this.isNgZoneEnabled=V(Ee)instanceof Ee&&Ee.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof _r&&i.code!==Rt.Redirect&&i.code!==Rt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof gn)this.navigated=!0;else if(i instanceof ha){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||xk(o.source)};this.scheduleNavigation(a,sa,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}jk(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=F({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(mg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u){case"merge":p=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let y;try{let w=o?o.snapshot:this.routerState.snapshot.root;y=QD(w)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),y=this.currentUrlTree.root}return YD(y,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=bo(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,sa,null,i)}navigate(r,i={skipLocationChange:!1}){return Uk(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=F({},Lk):i===!1?o=F({},Vk):o=i,bo(r))return OD(this.currentUrlTree,r,o);let s=this.parseUrl(r);return OD(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((y,w)=>{u=y,l=w});let p=this.pendingTasks.add();return kk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(y=>Promise.reject(y))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Uk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}function jk(t){return!(t instanceof da)&&!(t instanceof ha)}var pl=(()=>{let e=class e{constructor(r,i,o,s,a,u){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new st,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof gn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:wE(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(re(Xt),re(fi),Jf("tabindex"),re(ri),re(hr),re(_o))},e.\u0275dir=Jt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Se("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Gu("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[gt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ci],skipLocationChange:[gt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ci],replaceUrl:[gt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ci],routerLink:"routerLink"},standalone:!0,features:[yp,ni]});let t=e;return t})();var Bk=new W("");function f0(t,...e){return fn([{provide:_g,multi:!0,useValue:t},[],{provide:fi,useFactory:$k,deps:[Xt]},{provide:Ep,multi:!0,useFactory:Hk},e.map(n=>n.\u0275providers)])}function $k(t){return t.routerState.root}function Hk(){let t=V(Bt);return e=>{let n=t.get(Ys);if(e!==n.components[0])return;let r=t.get(Xt),i=t.get(qk);t.get(zk)===1&&r.initialNavigation(),t.get(Gk,null,oe.Optional)?.setUpPreloading(),t.get(Bk,null,oe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qk=new W("",{factory:()=>new st}),zk=new W("",{providedIn:"root",factory:()=>1});var Gk=new W("");var g0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Wk=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},m0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,w=l&63;u||(w=64,s||(y=64)),r.push(n[h],n[p],n[y],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(g0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Wk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Eg;let y=o<<2|a>>4;if(r.push(y),l!==64){let w=a<<4&240|l>>2;if(r.push(w),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Eg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Kk=function(t){let e=g0(t);return m0.encodeByteArray(e,!0)},_a=function(t){return Kk(t).replace(/\./g,"")},Cg=function(t){try{return m0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Yk=()=>Qk().__FIREBASE_DEFAULTS__,Jk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Cg(t[1]);return e&&JSON.parse(e)},yl=()=>{try{return Yk()||Jk()||Zk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bg=t=>{var e,n;return(n=(e=yl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},y0=t=>{let e=bg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tg=()=>{var t;return(t=yl())===null||t===void 0?void 0:t.config},Ag=t=>{var e;return(e=yl())===null||e===void 0?void 0:e[`_${t}`]};var ml=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function v0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_a(JSON.stringify(n)),_a(JSON.stringify(s)),""].join(".")}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Xk(){var t;let e=(t=yl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function E0(){let t=Ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D0(){return!Xk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sg(){try{return typeof indexedDB=="object"}catch{return!1}}function C0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var e1="FirebaseError",Mt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e1,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}},Un=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?t1(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Mt(i,a,r)}};function t1(t,e){return t.replace(n1,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var n1=/\{\$([^}]+)}/g;function b0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(p0(o)&&p0(s)){if(!pi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function p0(t){return t!==null&&typeof t=="object"}function Ia(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function So(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ro(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function T0(t,e){let n=new Dg(t,e);return n.subscribe.bind(n)}var Dg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");r1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wg),i.error===void 0&&(i.error=wg),i.complete===void 0&&(i.complete=wg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function r1(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wg(){}var M3=4*60*60*1e3;function et(t){return t&&t._delegate?t._delegate:t}var qt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gi="[DEFAULT]";var Rg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ml;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(o1(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:i1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function i1(t){return t===gi?void 0:t}function o1(t){return t.instantiationMode==="EAGER"}var vl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Rg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var s1=[],de=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(de||{}),a1={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},c1=de.INFO,u1={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},l1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=u1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},wr=class{constructor(e){this.name=e,this._logLevel=c1,this._logHandler=l1,this._userLogHandler=null,s1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var d1=(t,e)=>e.some(n=>t instanceof n),A0,S0;function h1(){return A0||(A0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f1(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var R0=new WeakMap,xg=new WeakMap,M0=new WeakMap,Mg=new WeakMap,Pg=new WeakMap;function p1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(yn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&R0.set(n,t)}).catch(()=>{}),Pg.set(e,t),e}function g1(t){if(xg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});xg.set(t,e)}var Ng={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||M0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x0(t){Ng=t(Ng)}function m1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(_l(this),e,...n);return M0.set(r,e.sort?e.sort():[e]),yn(r)}:f1().includes(t)?function(...e){return t.apply(_l(this),e),yn(R0.get(this))}:function(...e){return yn(t.apply(_l(this),e))}}function y1(t){return typeof t=="function"?m1(t):(t instanceof IDBTransaction&&g1(t),d1(t,h1())?new Proxy(t,Ng):t)}function yn(t){if(t instanceof IDBRequest)return p1(t);if(Mg.has(t))return Mg.get(t);let e=y1(t);return e!==t&&(Mg.set(t,e),Pg.set(e,t)),e}var _l=t=>Pg.get(t);function P0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=yn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(yn(s.result),u.oldVersion,u.newVersion,yn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var v1=["get","getKey","getAll","getAllKeys","count"],_1=["put","add","delete","clear"],Og=new Map;function N0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Og.get(e))return Og.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=_1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||v1.includes(n)))return;let o=function(s,...a){return I(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Og.set(e,o),o}x0(t=>we(F({},t),{get:(e,n,r)=>N0(e,n)||t.get(e,n,r),has:(e,n)=>!!N0(e,n)||t.has(e,n)}));var Fg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(I1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function I1(t){let e=t.getComponent();return e?.type==="VERSION"}var Lg="@firebase/app",O0="0.10.10";var jn=new wr("@firebase/app"),w1="@firebase/app-compat",E1="@firebase/analytics-compat",D1="@firebase/analytics",C1="@firebase/app-check-compat",b1="@firebase/app-check",T1="@firebase/auth",A1="@firebase/auth-compat",S1="@firebase/database",R1="@firebase/database-compat",M1="@firebase/functions",x1="@firebase/functions-compat",N1="@firebase/installations",P1="@firebase/installations-compat",O1="@firebase/messaging",k1="@firebase/messaging-compat",F1="@firebase/performance",L1="@firebase/performance-compat",V1="@firebase/remote-config",U1="@firebase/remote-config-compat",j1="@firebase/storage",B1="@firebase/storage-compat",$1="@firebase/firestore",H1="@firebase/vertexai-preview",q1="@firebase/firestore-compat",z1="firebase",G1="10.13.1";var Vg="[DEFAULT]",W1={[Lg]:"fire-core",[w1]:"fire-core-compat",[D1]:"fire-analytics",[E1]:"fire-analytics-compat",[b1]:"fire-app-check",[C1]:"fire-app-check-compat",[T1]:"fire-auth",[A1]:"fire-auth-compat",[S1]:"fire-rtdb",[R1]:"fire-rtdb-compat",[M1]:"fire-fn",[x1]:"fire-fn-compat",[N1]:"fire-iid",[P1]:"fire-iid-compat",[O1]:"fire-fcm",[k1]:"fire-fcm-compat",[F1]:"fire-perf",[L1]:"fire-perf-compat",[V1]:"fire-rc",[U1]:"fire-rc-compat",[j1]:"fire-gcs",[B1]:"fire-gcs-compat",[$1]:"fire-fst",[q1]:"fire-fst-compat",[H1]:"fire-vertex","fire-js":"fire-js",[z1]:"fire-js-all"};var wa=new Map,K1=new Map,Ug=new Map;function k0(t,e){try{t.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dr(t){let e=t.name;if(Ug.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;Ug.set(e,t);for(let n of wa.values())k0(n,t);for(let n of K1.values())k0(n,t);return!0}function Da(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t.settings!==void 0}var Q1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new Un("app","Firebase",Q1);var jg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}};var Cr=G1;function Hg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Vg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Er.create("bad-app-name",{appName:String(i)});if(n||(n=Tg()),!n)throw Er.create("no-options");let o=wa.get(i);if(o){if(pi(n,o.options)&&pi(r,o.config))return o;throw Er.create("duplicate-app",{appName:i})}let s=new vl(i);for(let u of Ug.values())s.addComponent(u);let a=new jg(n,r,s);return wa.set(i,a),a}function Mo(t=Vg){let e=wa.get(t);if(!e&&t===Vg&&Tg())return Hg();if(!e)throw Er.create("no-app",{appName:t});return e}function Il(){return Array.from(wa.values())}function He(t,e,n){var r;let i=(r=W1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(a.join(" "));return}Dr(new qt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Y1="firebase-heartbeat-database",J1=1,Ea="firebase-heartbeat-store",kg=null;function U0(){return kg||(kg=P0(Y1,J1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),kg}function Z1(t){return I(this,null,function*(){try{let n=(yield U0()).transaction(Ea),r=yield n.objectStore(Ea).get(j0(t));return yield n.done,r}catch(e){if(e instanceof Mt)jn.warn(e.message);else{let n=Er.create("idb-get",{originalErrorMessage:e?.message});jn.warn(n.message)}}})}function F0(t,e){return I(this,null,function*(){try{let r=(yield U0()).transaction(Ea,"readwrite");yield r.objectStore(Ea).put(e,j0(t)),yield r.done}catch(n){if(n instanceof Mt)jn.warn(n.message);else{let r=Er.create("idb-set",{originalErrorMessage:n?.message});jn.warn(r.message)}}})}function j0(t){return`${t.name}!${t.options.appId}`}var X1=1024,eF=30*24*60*60*1e3,Bg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new $g(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=L0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=eF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jn.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=L0(),{heartbeatsToSend:r,unsentEntries:i}=tF(this._heartbeatsCache.heartbeats),o=_a(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return jn.warn(n),""}})}};function L0(){return new Date().toISOString().substring(0,10)}function tF(t,e=X1){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),V0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),V0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var $g=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return Sg()?C0().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Z1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return F0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return F0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function V0(t){return _a(JSON.stringify({version:2,heartbeats:t})).length}function nF(t){Dr(new qt("platform-logger",e=>new Fg(e),"PRIVATE")),Dr(new qt("heartbeat",e=>new Bg(e),"PRIVATE")),He(Lg,O0,t),He(Lg,O0,"esm2017"),He("fire-js","")}nF("");var rF="firebase",iF="10.13.1";He(rF,iF,"app");var yi=new Pn("ANGULARFIRE2_VERSION");function El(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ca=(t,e)=>{let n=e?[e]:Il(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},No=class{constructor(){return Ca(oF)}},oF="app-check";function xo(){}var wl=class{zone;delegate;constructor(e,n=Ah){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},qg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xo,{},xo,xo)),n.pipe($e({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Po=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new wl(Zone.current)),this.insideAngular=n.run(()=>new wl(Zone.current,Th)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(le(Ee))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Dl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function sF(t){return Dl().ngZone.runOutsideAngular(()=>t())}function mi(t){return Dl().ngZone.run(()=>t())}function aF(t){return cF(Dl())(t)}function cF(t){return function(n){return n=n.lift(new qg(t.ngZone)),n.pipe(ir(t.outsideAngular),rr(t.insideAngular))}}var uF=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),mi(()=>t.apply(void 0,r))},xt=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=mi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xo,{},xo,xo))),r[o]=uF(r[o],n));let i=sF(()=>t.apply(this,r));if(!e)if(i instanceof ce){let o=Dl();return i.pipe(ir(o.outsideAngular),rr(o.insideAngular))}else return mi(()=>i);return i instanceof ce?i.pipe(aF):i instanceof Promise?mi(()=>new Promise((o,s)=>i.then(a=>mi(()=>o(a)),a=>mi(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:mi(()=>i)};var Bn=class{constructor(e){return e}},vi=class{constructor(){return Il()}};function lF(t){return t&&t.length===1?t[0]:new Bn(Mo())}var zg=new W("angularfire2._apps"),dF={provide:Bn,useFactory:lF,deps:[[new _t,zg]]},hF={provide:vi,deps:[[new _t,zg]]};function fF(t){return(e,n)=>{let r=n.get(fr);He("angularfire",yi.full,"core"),He("angularfire",yi.full,"app"),He("angular",sD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Bn(i)}}function B0(t,...e){return fn([dF,hF,{provide:zg,useFactory:fF(t),multi:!0,deps:[Ee,Bt,Po,...e]}])}var $0=xt(Hg,!0);function oC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sC=oC,aC=new Un("auth","Firebase",oC());var Rl=new wr("@firebase/auth");function pF(t,...e){Rl.logLevel<=de.WARN&&Rl.warn(`Auth (${Cr}): ${t}`,...e)}function bl(t,...e){Rl.logLevel<=de.ERROR&&Rl.error(`Auth (${Cr}): ${t}`,...e)}function _n(t,...e){throw pm(t,...e)}function _i(t,...e){return pm(t,...e)}function cC(t,e,n){let r=Object.assign(Object.assign({},sC()),{[e]:n});return new Un("auth","Firebase",r).create(e,{appName:t.name})}function qn(t){return cC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return aC.create(t,...e)}function q(t,e,...n){if(!t)throw pm(e,...n)}function $n(t){let e="INTERNAL ASSERTION FAILED: "+t;throw bl(e),new Error(e)}function Tr(t,e){t||$n(e)}function Qg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gF(){return H0()==="http:"||H0()==="https:"}function H0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function mF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gF()||I0()||"connection"in navigator)?navigator.onLine:!0}function yF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ii=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=_0()||w0()}get(){return mF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gm(t,e){Tr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ml=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var vF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var _F=new Ii(3e4,6e4);function Ar(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Sr(o,s,a,u){return I(this,arguments,function*(t,e,n,r,i={}){return uC(t,i,()=>I(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ia(Object.assign({key:t.config.apiKey},h)).slice(1),y=yield t._getAdditionalHeaders();return y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode),Ml.fetch()(lC(t,t.config.apiHost,n,p),Object.assign({method:e,headers:y,referrerPolicy:"no-referrer"},l))}))})}function uC(t,e,n){return I(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},vF),e);try{let i=new Yg(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Cl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cl(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Cl(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Cl(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw cC(t,h,l);_n(t,h)}}catch(i){if(i instanceof Mt)throw i;_n(t,"network-request-failed",{message:String(i)})}})}function Na(o,s,a,u){return I(this,arguments,function*(t,e,n,r,i={}){let l=yield Sr(t,e,n,r,i);return"mfaPendingCredential"in l&&_n(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function lC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?gm(t.config,i):`${t.config.apiScheme}://${i}`}function IF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Yg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_i(this.auth,"network-request-failed")),_F.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Cl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=_i(t,e,r);return i.customData._tokenResponse=n,i}function q0(t){return t!==void 0&&t.enterprise!==void 0}var Jg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function wF(t,e){return I(this,null,function*(){return Sr(t,"GET","/v2/recaptchaConfig",Ar(t,e))})}function EF(t,e){return I(this,null,function*(){return Sr(t,"POST","/v1/accounts:delete",e)})}function dC(t,e){return I(this,null,function*(){return Sr(t,"POST","/v1/accounts:lookup",e)})}function ba(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function mm(t,e=!1){return I(this,null,function*(){let n=et(t),r=yield n.getIdToken(e),i=ym(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ba(Gg(i.auth_time)),issuedAtTime:ba(Gg(i.iat)),expirationTime:ba(Gg(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Gg(t){return Number(t)*1e3}function ym(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cg(n);return i?JSON.parse(i):(bl("Failed to decode base64 JWT payload"),null)}catch(i){return bl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function z0(t){let e=ym(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Aa(t,e,n=!1){return I(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Mt&&DF(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function DF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Zg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),n)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Sa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ba(this.lastLoginAt),this.creationTime=ba(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function xl(t){return I(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Aa(t,dC(n,{idToken:r}));q(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?hC(o.providerUserInfo):[],a=CF(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Sa(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function vm(t){return I(this,null,function*(){let e=et(t);yield xl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function CF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hC(t){return t.map(e=>{var{providerId:n}=e,r=Sh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function bF(t,e){return I(this,null,function*(){let n=yield uC(t,{},()=>I(this,null,function*(){let r=Ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=lC(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ml.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function TF(t,e){return I(this,null,function*(){return Sr(t,"POST","/v2/accounts:revokeToken",Ar(t,e))})}var Ta=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");let n=z0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return I(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield bF(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return $n("not implemented")}};function br(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Oo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Sh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let n=yield Aa(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return mm(this,e)}reload(){return vm(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield xl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(en(this.auth.app))return Promise.reject(qn(this.auth));let e=yield this.getIdToken();return yield Aa(this,EF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,w=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,M=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,K=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:fe,isAnonymous:xe,providerData:ee,stsTokenManager:D}=n;q($&&D,e,"internal-error");let m=Ta.fromJSON(this.name,D);q(typeof $=="string",e,"internal-error"),br(p,e.name),br(y,e.name),q(typeof fe=="boolean",e,"internal-error"),q(typeof xe=="boolean",e,"internal-error"),br(w,e.name),br(S,e.name),br(M,e.name),br(x,e.name),br(O,e.name),br(K,e.name);let v=new t({uid:$,auth:e,email:y,emailVerified:fe,displayName:p,isAnonymous:xe,photoURL:S,phoneNumber:w,tenantId:M,stsTokenManager:m,createdAt:O,lastLoginAt:K});return ee&&Array.isArray(ee)&&(v.providerData=ee.map(E=>Object.assign({},E))),x&&(v._redirectEventId=x),v}static _fromIdTokenResponse(e,n,r=!1){return I(this,null,function*(){let i=new Ta;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield xl(o),o})}static _fromGetAccountInfoResponse(e,n,r){return I(this,null,function*(){let i=n.users[0];q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?hC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ta;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var G0=new Map;function Hn(t){Tr(t instanceof Function,"Expected a class definition");let e=G0.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,G0.set(t,e),e)}var AF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(n,r){return I(this,null,function*(){this.storage[n]=r})}_get(n){return I(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return I(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Xg=AF;function Tl(t,e,n){return`firebase:${t}:${e}:${n}`}var Nl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Tl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Tl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Oo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return I(this,null,function*(){if(!n.length)return new t(Hn(Xg),e,r);let i=(yield Promise.all(n.map(l=>I(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Hn(Xg),s=Tl(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p=Oo._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>I(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function W0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vC(e))return"Blackberry";if(_C(e))return"Webos";if(pC(e))return"Safari";if((e.includes("chrome/")||gC(e))&&!e.includes("edge/"))return"Chrome";if(yC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function fC(t=Ke()){return/firefox\//i.test(t)}function pC(t=Ke()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gC(t=Ke()){return/crios\//i.test(t)}function mC(t=Ke()){return/iemobile/i.test(t)}function yC(t=Ke()){return/android/i.test(t)}function vC(t=Ke()){return/blackberry/i.test(t)}function _C(t=Ke()){return/webos/i.test(t)}function _m(t=Ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SF(t=Ke()){var e;return _m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RF(){return E0()&&document.documentMode===10}function IC(t=Ke()){return _m(t)||yC(t)||_C(t)||vC(t)||/windows phone/i.test(t)||mC(t)}function wC(t,e=[]){let n;switch(t){case"Browser":n=W0(Ke());break;case"Worker":n=`${W0(Ke())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cr}/${r}`}var em=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function MF(n){return I(this,arguments,function*(t,e={}){return Sr(t,"GET","/v2/passwordPolicy",Ar(t,e))})}var xF=6,tm=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:xF,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var nm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pl(this),this.idTokenSubscription=new Pl(this),this.beforeStateQueue=new em(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Nl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let n=yield dC(this,{idToken:e}),r=yield Oo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var n;if(en(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield xl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=yF()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(en(this.app))return Promise.reject(qn(this));let n=e?et(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return I(this,null,function*(){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return en(this.app)?Promise.reject(qn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return en(this.app)?Promise.reject(qn(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(Hn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield MF(this),n=new tm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield TF(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Hn(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=yield Nl.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return I(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&pF(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ei(t){return et(t)}var Pl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=T0(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var jl={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NF(t){jl=t}function EC(t){return jl.loadJS(t)}function PF(){return jl.recaptchaEnterpriseScript}function OF(){return jl.gapiScript}function DC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var kF="recaptcha-enterprise",FF="NO_RECAPTCHA",rm=class{constructor(e){this.type=kF,this.auth=Ei(e)}verify(e="verify",n=!1){return I(this,null,function*(){function r(o){return I(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>I(this,null,function*(){wF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Jg(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;q0(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(FF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&q0(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=PF();u.length!==0&&(u+=a),EC(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function K0(t,e,n,r=!1){return I(this,null,function*(){let i=new rm(t),o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function im(t,e,n,r){return I(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield K0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>I(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield K0(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}function Im(t,e){let n=Da(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(pi(o,e??{}))return i;_n(i,"already-initialized")}return n.initialize({options:e})}function LF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Hn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function wm(t,e,n){let r=Ei(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=CC(e),{host:s,port:a}=VF(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||UF()}function CC(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VF(t){let e=CC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Q0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:Q0(s)}}}function Q0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function UF(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ra=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $n("not implemented")}_getIdTokenResponse(e){return $n("not implemented")}_linkToIdToken(e,n){return $n("not implemented")}_getReauthenticationResolver(e){return $n("not implemented")}};function jF(t,e){return I(this,null,function*(){return Sr(t,"POST","/v1/accounts:signUp",e)})}function BF(t,e){return I(this,null,function*(){return Na(t,"POST","/v1/accounts:signInWithPassword",Ar(t,e))})}function $F(t,e){return I(this,null,function*(){return Na(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))})}function HF(t,e){return I(this,null,function*(){return Na(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))})}var Ma=class t extends Ra{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return I(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,n,"signInWithPassword",BF);case"emailLink":return $F(e,{email:this._email,oobCode:this._password});default:_n(e,"internal-error")}})}_linkToIdToken(e,n){return I(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,r,"signUpPassword",jF);case"emailLink":return HF(e,{idToken:n,email:this._email,oobCode:this._password});default:_n(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Wg(t,e){return I(this,null,function*(){return Na(t,"POST","/v1/accounts:signInWithIdp",Ar(t,e))})}function qF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zF(t){let e=So(Ro(t)).link,n=e?So(Ro(e)).deep_link_id:null,r=So(Ro(t)).deep_link_id;return(r?So(Ro(r)).link:null)||r||n||e||t}var Ol=class t{constructor(e){var n,r,i,o,s,a;let u=So(Ro(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=qF((i=u.mode)!==null&&i!==void 0?i:null);q(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=zF(e);try{return new t(n)}catch{return null}}};var bC=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ma._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Ol.parseLink(r);return q(i,"argument-error"),Ma._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),kl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var om=class extends kl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function GF(t,e){return I(this,null,function*(){return Na(t,"POST","/v1/accounts:signUp",Ar(t,e))})}var ko=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return I(this,null,function*(){let o=yield Oo._fromIdTokenResponse(e,r,i),s=Y0(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Y0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Y0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var sm=class t extends Mt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function TC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sm._fromErrorAndOperation(t,o,e,r):o})}function WF(t,e,n=!1){return I(this,null,function*(){let r=yield Aa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ko._forOperation(t,"link",r)})}function KF(t,e,n=!1){return I(this,null,function*(){let{auth:r}=t;if(en(r.app))return Promise.reject(qn(r));let i="reauthenticate";try{let o=yield Aa(t,TC(r,i,e,t),n);q(o.idToken,r,"internal-error");let s=ym(o.idToken);q(s,r,"internal-error");let{sub:a}=s;return q(t.uid===a,r,"user-mismatch"),ko._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&_n(r,"user-mismatch"),o}})}function AC(t,e,n=!1){return I(this,null,function*(){if(en(t.app))return Promise.reject(qn(t));let r="signIn",i=yield TC(t,r,e),o=yield ko._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Em(t,e){return I(this,null,function*(){return AC(Ei(t),e)})}function SC(t){return I(this,null,function*(){let e=Ei(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Dm(t,e,n){return I(this,null,function*(){if(en(t.app))return Promise.reject(qn(t));let r=Ei(t),s=yield im(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GF).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&SC(t),u}),a=yield ko._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Cm(t,e,n){return en(t.app)?Promise.reject(qn(t)):Em(et(t),bC.credential(e,n)).catch(r=>I(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&SC(t),r}))}function bm(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function Tm(t,e,n){return et(t).beforeAuthStateChanged(e,n)}function Am(t){return et(t).signOut()}var Fl="__sak";var Ll=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fl,"1"),this.storage.removeItem(Fl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var QF=1e3,YF=10,JF=(()=>{class t extends Ll{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);RF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,YF):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},QF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return I(this,null,function*(){yield tr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return I(this,null,function*(){let r=yield tr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return I(this,null,function*(){yield tr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),RC=JF;var ZF=(()=>{class t extends Ll{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Sm=ZF;function XF(t){return Promise.all(t.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var eL=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return I(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>I(this,null,function*(){return h(r.origin,s)})),l=yield XF(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function MC(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var am=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=MC("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function vn(){return window}function tL(t){vn().location.href=t}function xC(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}function nL(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function rL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iL(){return xC()?self:null}var NC="firebaseLocalStorageDb",oL=1,Vl="firebaseLocalStorage",PC="fbase_key",wi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Bl(t,e){return t.transaction([Vl],e?"readwrite":"readonly").objectStore(Vl)}function sL(){let t=indexedDB.deleteDatabase(NC);return new wi(t).toPromise()}function cm(){let t=indexedDB.open(NC,oL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Vl,{keyPath:PC})}catch(i){n(i)}}),t.addEventListener("success",()=>I(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Vl)?e(r):(r.close(),yield sL(),e(yield cm()))}))})}function J0(t,e,n){return I(this,null,function*(){let r=Bl(t,!0).put({[PC]:e,value:n});return new wi(r).toPromise()})}function aL(t,e){return I(this,null,function*(){let n=Bl(t,!1).get(e),r=yield new wi(n).toPromise();return r===void 0?null:r.value})}function Z0(t,e){let n=Bl(t,!0).delete(e);return new wi(n).toPromise()}var cL=800,uL=3,lL=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield cm(),this.db)})}_withRetries(n){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>uL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return xC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=eL._getInstance(iL()),this.receiver._subscribe("keyChanged",(n,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var n,r;if(this.activeServiceWorker=yield nL(),!this.activeServiceWorker)return;this.sender=new am(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||rL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let n=yield cm();return yield J0(n,Fl,"1"),yield Z0(n,Fl),!0}catch{}return!1})}_withPendingWrite(n){return I(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>J0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return I(this,null,function*(){let r=yield this._withRetries(i=>aL(i,n));return this.localCache[n]=r,r})}_remove(n){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>Z0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return I(this,null,function*(){let n=yield this._withRetries(o=>{let s=Bl(o,!1).getAll();return new wi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),cL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),OC=lL;var DW=DC("rcb"),CW=new Ii(3e4,6e4);function dL(t,e){return e?Hn(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var xa=class extends Ra{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wg(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wg(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wg(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function hL(t){return AC(t.auth,new xa(t),t.bypassAuthState)}function fL(t){let{auth:e,user:n}=t;return q(n,e,"internal-error"),KF(n,new xa(t),t.bypassAuthState)}function pL(t){return I(this,null,function*(){let{auth:e,user:n}=t;return q(n,e,"internal-error"),WF(n,new xa(t),t.bypassAuthState)})}var um=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hL;case"linkViaPopup":case"linkViaRedirect":return pL;case"reauthViaPopup":case"reauthViaRedirect":return fL;default:_n(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bW=new Ii(2e3,1e4);var gL="pendingRedirect",Al=new Map,lm=class t extends um{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=Al.get(this.auth._key());if(!e){try{let r=(yield mL(this.resolver,this.auth))?yield tr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Al.set(this.auth._key(),e)}return this.bypassAuthState||Al.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return tr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,tr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function mL(t,e){return I(this,null,function*(){let n=_L(e),r=vL(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function yL(t,e){Al.set(t._key(),e)}function vL(t){return Hn(t._redirectPersistence)}function _L(t){return Tl(gL,t.config.apiKey,t.name)}function IL(t,e,n=!1){return I(this,null,function*(){if(en(t.app))return Promise.reject(qn(t));let r=Ei(t),i=dL(r,e),s=yield new lm(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var wL=10*60*1e3,dm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_i(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wL&&this.cachedEventUids.clear(),this.cachedEventUids.has(X0(e))}saveEventToCache(e){this.cachedEventUids.add(X0(e)),this.lastProcessedEventTime=Date.now()}};function X0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function EL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kC(t);default:return!1}}function DL(n){return I(this,arguments,function*(t,e={}){return Sr(t,"GET","/v1/projects",e)})}var CL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bL=/^https?/;function TL(t){return I(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield DL(t);for(let n of e)try{if(AL(n))return}catch{}_n(t,"unauthorized-domain")})}function AL(t){let e=Qg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!bL.test(n))return!1;if(CL.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var SL=new Ii(3e4,6e4);function eC(){let t=vn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RL(t){return new Promise((e,n)=>{var r,i,o;function s(){eC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eC(),n(_i(t,"network-request-failed"))},timeout:SL.get()})}if(!((i=(r=vn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=vn().gapi)===null||o===void 0)&&o.load)s();else{let a=DC("iframefcb");return vn()[a]=()=>{gapi.load?s():n(_i(t,"network-request-failed"))},EC(`${OF()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Sl=null,e})}var Sl=null;function ML(t){return Sl=Sl||RL(t),Sl}var xL=new Ii(5e3,15e3),NL="__/auth/iframe",PL="emulator/auth/iframe",OL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FL(t){let e=t.config;q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?gm(e,PL):`https://${t.config.authDomain}/${NL}`,r={apiKey:e.apiKey,appName:t.name,v:Cr},i=kL.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ia(r).slice(1)}`}function LL(t){return I(this,null,function*(){let e=yield ML(t),n=vn().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:FL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OL,dontclear:!0},r=>new Promise((i,o)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=_i(t,"network-request-failed"),a=vn().setTimeout(()=>{o(s)},xL.get());function u(){vn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var VL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UL=500,jL=600,BL="_blank",$L="http://localhost",Ul=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function HL(t,e,n,r=UL,i=jL){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},VL),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ke().toLowerCase();n&&(a=gC(l)?BL:n),fC(l)&&(e=e||$L,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[w,S])=>`${y}${w}=${S},`,"");if(SF(l)&&a!=="_self")return qL(e||"",a),new Ul(null);let p=window.open(e||"",a,h);q(p,t,"popup-blocked");try{p.focus()}catch{}return new Ul(p)}function qL(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var zL="__/auth/handler",GL="emulator/auth/handler",WL=encodeURIComponent("fac");function tC(t,e,n,r,i,o){return I(this,null,function*(){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cr,eventId:i};if(e instanceof kl){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",b0(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof om){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${WL}=${encodeURIComponent(u)}`:"";return`${KL(t)}?${Ia(a).slice(1)}${l}`})}function KL({config:t}){return t.emulator?gm(t,GL):`https://${t.authDomain}/${zL}`}var Kg="webStorageSupport",hm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sm,this._completeRedirectFn=IL,this._overrideRedirectResult=yL}_openPopup(e,n,r,i){return I(this,null,function*(){var o;Tr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield tC(e,n,r,Qg(),i);return HL(e,s,MC())})}_openRedirect(e,n,r,i){return I(this,null,function*(){yield this._originValidation(e);let o=yield tC(e,n,r,Qg(),i);return tL(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Tr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return I(this,null,function*(){let n=yield LL(e),r=new dm(e);return n.register("authEvent",i=>(q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kg,{type:Kg},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Kg];s!==void 0&&n(!!s),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IC()||pC()||_m()}},FC=hm;var nC="@firebase/auth",rC="1.7.8";var fm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function QL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YL(t){Dr(new qt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wC(t)},l=new nm(r,i,o,u);return LF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dr(new qt("auth-internal",e=>{let n=Ei(e.getProvider("auth").getImmediate());return(r=>new fm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),He(nC,rC,QL(t)),He(nC,rC,"esm2017")}var JL=5*60,ZL=Ag("authIdTokenMaxAge")||JL,iC=null,XL=t=>e=>I(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZL)return;let i=n?.token;iC!==i&&(iC=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Rm(t=Mo()){let e=Da(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Im(t,{popupRedirectResolver:FC,persistence:[OC,RC,Sm]}),r=Ag("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=XL(o.toString());Tm(n,s,()=>s(n.currentUser)),bm(n,a=>s(a))}}let i=bg("auth");return i&&wm(n,`http://${i}`),n}function eV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=_i("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",eV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YL("Browser");var LC="auth",Nt=class{constructor(e){return e}},Pa=class{constructor(){return Ca(LC)}};var Mm=new W("angularfire2.auth-instances");function qV(t,e){let n=El(LC,t,e);return n&&new Nt(n)}function zV(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Nt(r)}}var GV={provide:Pa,deps:[[new _t,Mm]]},WV={provide:Nt,useFactory:qV,deps:[[new _t,Mm],Bn]};function VC(t,...e){return He("angularfire",yi.full,"auth"),fn([WV,GV,{provide:Mm,useFactory:zV(t),multi:!0,deps:[Ee,Bt,Po,vi,[new _t,No],...e]}])}var UC=xt(Dm,!0);var jC=xt(Rm,!0);var BC=xt(Cm,!0);var $l=xt(Am,!0);var $C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},HC={};var Rr,xm;(function(){var t;function e(D,m){function v(){}v.prototype=m.prototype,D.D=m.prototype,D.prototype=new v,D.prototype.constructor=D,D.C=function(E,C,T){for(var _=Array(arguments.length-2),Tn=2;Tn<arguments.length;Tn++)_[Tn-2]=arguments[Tn];return m.prototype[C].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,m,v){v||(v=0);var E=Array(16);if(typeof m=="string")for(var C=0;16>C;++C)E[C]=m.charCodeAt(v++)|m.charCodeAt(v++)<<8|m.charCodeAt(v++)<<16|m.charCodeAt(v++)<<24;else for(C=0;16>C;++C)E[C]=m[v++]|m[v++]<<8|m[v++]<<16|m[v++]<<24;m=D.g[0],v=D.g[1],C=D.g[2];var T=D.g[3],_=m+(T^v&(C^T))+E[0]+3614090360&4294967295;m=v+(_<<7&4294967295|_>>>25),_=T+(C^m&(v^C))+E[1]+3905402710&4294967295,T=m+(_<<12&4294967295|_>>>20),_=C+(v^T&(m^v))+E[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=v+(m^C&(T^m))+E[3]+3250441966&4294967295,v=C+(_<<22&4294967295|_>>>10),_=m+(T^v&(C^T))+E[4]+4118548399&4294967295,m=v+(_<<7&4294967295|_>>>25),_=T+(C^m&(v^C))+E[5]+1200080426&4294967295,T=m+(_<<12&4294967295|_>>>20),_=C+(v^T&(m^v))+E[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=v+(m^C&(T^m))+E[7]+4249261313&4294967295,v=C+(_<<22&4294967295|_>>>10),_=m+(T^v&(C^T))+E[8]+1770035416&4294967295,m=v+(_<<7&4294967295|_>>>25),_=T+(C^m&(v^C))+E[9]+2336552879&4294967295,T=m+(_<<12&4294967295|_>>>20),_=C+(v^T&(m^v))+E[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=v+(m^C&(T^m))+E[11]+2304563134&4294967295,v=C+(_<<22&4294967295|_>>>10),_=m+(T^v&(C^T))+E[12]+1804603682&4294967295,m=v+(_<<7&4294967295|_>>>25),_=T+(C^m&(v^C))+E[13]+4254626195&4294967295,T=m+(_<<12&4294967295|_>>>20),_=C+(v^T&(m^v))+E[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=v+(m^C&(T^m))+E[15]+1236535329&4294967295,v=C+(_<<22&4294967295|_>>>10),_=m+(C^T&(v^C))+E[1]+4129170786&4294967295,m=v+(_<<5&4294967295|_>>>27),_=T+(v^C&(m^v))+E[6]+3225465664&4294967295,T=m+(_<<9&4294967295|_>>>23),_=C+(m^v&(T^m))+E[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=v+(T^m&(C^T))+E[0]+3921069994&4294967295,v=C+(_<<20&4294967295|_>>>12),_=m+(C^T&(v^C))+E[5]+3593408605&4294967295,m=v+(_<<5&4294967295|_>>>27),_=T+(v^C&(m^v))+E[10]+38016083&4294967295,T=m+(_<<9&4294967295|_>>>23),_=C+(m^v&(T^m))+E[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=v+(T^m&(C^T))+E[4]+3889429448&4294967295,v=C+(_<<20&4294967295|_>>>12),_=m+(C^T&(v^C))+E[9]+568446438&4294967295,m=v+(_<<5&4294967295|_>>>27),_=T+(v^C&(m^v))+E[14]+3275163606&4294967295,T=m+(_<<9&4294967295|_>>>23),_=C+(m^v&(T^m))+E[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=v+(T^m&(C^T))+E[8]+1163531501&4294967295,v=C+(_<<20&4294967295|_>>>12),_=m+(C^T&(v^C))+E[13]+2850285829&4294967295,m=v+(_<<5&4294967295|_>>>27),_=T+(v^C&(m^v))+E[2]+4243563512&4294967295,T=m+(_<<9&4294967295|_>>>23),_=C+(m^v&(T^m))+E[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=v+(T^m&(C^T))+E[12]+2368359562&4294967295,v=C+(_<<20&4294967295|_>>>12),_=m+(v^C^T)+E[5]+4294588738&4294967295,m=v+(_<<4&4294967295|_>>>28),_=T+(m^v^C)+E[8]+2272392833&4294967295,T=m+(_<<11&4294967295|_>>>21),_=C+(T^m^v)+E[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=v+(C^T^m)+E[14]+4259657740&4294967295,v=C+(_<<23&4294967295|_>>>9),_=m+(v^C^T)+E[1]+2763975236&4294967295,m=v+(_<<4&4294967295|_>>>28),_=T+(m^v^C)+E[4]+1272893353&4294967295,T=m+(_<<11&4294967295|_>>>21),_=C+(T^m^v)+E[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=v+(C^T^m)+E[10]+3200236656&4294967295,v=C+(_<<23&4294967295|_>>>9),_=m+(v^C^T)+E[13]+681279174&4294967295,m=v+(_<<4&4294967295|_>>>28),_=T+(m^v^C)+E[0]+3936430074&4294967295,T=m+(_<<11&4294967295|_>>>21),_=C+(T^m^v)+E[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=v+(C^T^m)+E[6]+76029189&4294967295,v=C+(_<<23&4294967295|_>>>9),_=m+(v^C^T)+E[9]+3654602809&4294967295,m=v+(_<<4&4294967295|_>>>28),_=T+(m^v^C)+E[12]+3873151461&4294967295,T=m+(_<<11&4294967295|_>>>21),_=C+(T^m^v)+E[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=v+(C^T^m)+E[2]+3299628645&4294967295,v=C+(_<<23&4294967295|_>>>9),_=m+(C^(v|~T))+E[0]+4096336452&4294967295,m=v+(_<<6&4294967295|_>>>26),_=T+(v^(m|~C))+E[7]+1126891415&4294967295,T=m+(_<<10&4294967295|_>>>22),_=C+(m^(T|~v))+E[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=v+(T^(C|~m))+E[5]+4237533241&4294967295,v=C+(_<<21&4294967295|_>>>11),_=m+(C^(v|~T))+E[12]+1700485571&4294967295,m=v+(_<<6&4294967295|_>>>26),_=T+(v^(m|~C))+E[3]+2399980690&4294967295,T=m+(_<<10&4294967295|_>>>22),_=C+(m^(T|~v))+E[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=v+(T^(C|~m))+E[1]+2240044497&4294967295,v=C+(_<<21&4294967295|_>>>11),_=m+(C^(v|~T))+E[8]+1873313359&4294967295,m=v+(_<<6&4294967295|_>>>26),_=T+(v^(m|~C))+E[15]+4264355552&4294967295,T=m+(_<<10&4294967295|_>>>22),_=C+(m^(T|~v))+E[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=v+(T^(C|~m))+E[13]+1309151649&4294967295,v=C+(_<<21&4294967295|_>>>11),_=m+(C^(v|~T))+E[4]+4149444226&4294967295,m=v+(_<<6&4294967295|_>>>26),_=T+(v^(m|~C))+E[11]+3174756917&4294967295,T=m+(_<<10&4294967295|_>>>22),_=C+(m^(T|~v))+E[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=v+(T^(C|~m))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+m&4294967295,D.g[1]=D.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,m){m===void 0&&(m=D.length);for(var v=m-this.blockSize,E=this.B,C=this.h,T=0;T<m;){if(C==0)for(;T<=v;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<m;)if(E[C++]=D.charCodeAt(T++),C==this.blockSize){i(this,E),C=0;break}}else for(;T<m;)if(E[C++]=D[T++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=m},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var m=1;m<D.length-8;++m)D[m]=0;var v=8*this.o;for(m=D.length-8;m<D.length;++m)D[m]=v&255,v/=256;for(this.u(D),D=Array(16),m=v=0;4>m;++m)for(var E=0;32>E;E+=8)D[v++]=this.g[m]>>>E&255;return D};function o(D,m){var v=a;return Object.prototype.hasOwnProperty.call(v,D)?v[D]:v[D]=m(D)}function s(D,m){this.h=m;for(var v=[],E=!0,C=D.length-1;0<=C;C--){var T=D[C]|0;E&&T==m||(v[C]=T,E=!1)}this.g=v}var a={};function u(D){return-128<=D&&128>D?o(D,function(m){return new s([m|0],0>m?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return x(l(-D));for(var m=[],v=1,E=0;D>=v;E++)m[E]=D/v|0,v*=4294967296;return new s(m,0)}function h(D,m){if(D.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(D.charAt(0)=="-")return x(h(D.substring(1),m));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(m,8)),E=p,C=0;C<D.length;C+=8){var T=Math.min(8,D.length-C),_=parseInt(D.substring(C,C+T),m);8>T?(T=l(Math.pow(m,T)),E=E.j(T).add(l(_))):(E=E.j(v),E=E.add(l(_)))}return E}var p=u(0),y=u(1),w=u(16777216);t=s.prototype,t.m=function(){if(M(this))return-x(this).m();for(var D=0,m=1,v=0;v<this.g.length;v++){var E=this.i(v);D+=(0<=E?E:4294967296+E)*m,m*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(M(this))return"-"+x(this).toString(D);for(var m=l(Math.pow(D,6)),v=this,E="";;){var C=fe(v,m).g;v=O(v,C.j(m));var T=((0<v.g.length?v.g[0]:v.h)>>>0).toString(D);if(v=C,S(v))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var m=0;m<D.g.length;m++)if(D.g[m]!=0)return!1;return!0}function M(D){return D.h==-1}t.l=function(D){return D=O(this,D),M(D)?-1:S(D)?0:1};function x(D){for(var m=D.g.length,v=[],E=0;E<m;E++)v[E]=~D.g[E];return new s(v,~D.h).add(y)}t.abs=function(){return M(this)?x(this):this},t.add=function(D){for(var m=Math.max(this.g.length,D.g.length),v=[],E=0,C=0;C<=m;C++){var T=E+(this.i(C)&65535)+(D.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);E=_>>>16,T&=65535,_&=65535,v[C]=_<<16|T}return new s(v,v[v.length-1]&-2147483648?-1:0)};function O(D,m){return D.add(x(m))}t.j=function(D){if(S(this)||S(D))return p;if(M(this))return M(D)?x(this).j(x(D)):x(x(this).j(D));if(M(D))return x(this.j(x(D)));if(0>this.l(w)&&0>D.l(w))return l(this.m()*D.m());for(var m=this.g.length+D.g.length,v=[],E=0;E<2*m;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<D.g.length;C++){var T=this.i(E)>>>16,_=this.i(E)&65535,Tn=D.i(C)>>>16,cs=D.i(C)&65535;v[2*E+2*C]+=_*cs,K(v,2*E+2*C),v[2*E+2*C+1]+=T*cs,K(v,2*E+2*C+1),v[2*E+2*C+1]+=_*Tn,K(v,2*E+2*C+1),v[2*E+2*C+2]+=T*Tn,K(v,2*E+2*C+2)}for(E=0;E<m;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=m;E<2*m;E++)v[E]=0;return new s(v,0)};function K(D,m){for(;(D[m]&65535)!=D[m];)D[m+1]+=D[m]>>>16,D[m]&=65535,m++}function $(D,m){this.g=D,this.h=m}function fe(D,m){if(S(m))throw Error("division by zero");if(S(D))return new $(p,p);if(M(D))return m=fe(x(D),m),new $(x(m.g),x(m.h));if(M(m))return m=fe(D,x(m)),new $(x(m.g),m.h);if(30<D.g.length){if(M(D)||M(m))throw Error("slowDivide_ only works with positive integers.");for(var v=y,E=m;0>=E.l(D);)v=xe(v),E=xe(E);var C=ee(v,1),T=ee(E,1);for(E=ee(E,2),v=ee(v,2);!S(E);){var _=T.add(E);0>=_.l(D)&&(C=C.add(v),T=_),E=ee(E,1),v=ee(v,1)}return m=O(D,C.j(m)),new $(C,m)}for(C=p;0<=D.l(m);){for(v=Math.max(1,Math.floor(D.m()/m.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(v),_=T.j(m);M(_)||0<_.l(D);)v-=E,T=l(v),_=T.j(m);S(T)&&(T=y),C=C.add(T),D=O(D,_)}return new $(C,D)}t.A=function(D){return fe(this,D).h},t.and=function(D){for(var m=Math.max(this.g.length,D.g.length),v=[],E=0;E<m;E++)v[E]=this.i(E)&D.i(E);return new s(v,this.h&D.h)},t.or=function(D){for(var m=Math.max(this.g.length,D.g.length),v=[],E=0;E<m;E++)v[E]=this.i(E)|D.i(E);return new s(v,this.h|D.h)},t.xor=function(D){for(var m=Math.max(this.g.length,D.g.length),v=[],E=0;E<m;E++)v[E]=this.i(E)^D.i(E);return new s(v,this.h^D.h)};function xe(D){for(var m=D.g.length+1,v=[],E=0;E<m;E++)v[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(v,D.h)}function ee(D,m){var v=m>>5;m%=32;for(var E=D.g.length-v,C=[],T=0;T<E;T++)C[T]=0<m?D.i(T+v)>>>m|D.i(T+v+1)<<32-m:D.i(T+v);return new s(C,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xm=HC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Rr=HC.Integer=s}).apply(typeof $C<"u"?$C:typeof self<"u"?self:typeof window<"u"?window:{});var ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zn={};var Nm,Pm,Fo,Om,Oa,zl,km,Fm,Lm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ql=="object"&&ql];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function w(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var P=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)P[Ce-2]=arguments[Ce];return d.prototype[b].apply(g,P)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function x(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let P=0;P<A;P++)c[b+P]=g[P]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function K(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function fe(c){return fe[" "](c),c}fe[" "]=function(){};var xe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ee(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function m(c){let d={};for(let f in c)d[f]=c[f];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<v.length;A++)f=v[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Bd;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Tn{constructor(){this.h=this.g=null}add(d,f){let g=cs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var cs=new O(()=>new _A,c=>c.reset());class _A{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let us,ls=!1,Bd=new Tn,Jv=()=>{let c=a.Promise.resolve(void 0);us=()=>{c.then(IA)}};var IA=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=cs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ls=!1};function Jn(){this.s=this.s,this.C=this.C}Jn.prototype.s=!1,Jn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Jn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var wA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function ds(c,d){if(nt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(xe){e:{try{fe(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:EA[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ds.aa.h.call(this)}}S(ds,nt);var EA={2:"touch",3:"pen",4:"mouse"};ds.prototype.h=function(){ds.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var hs="closure_listenable_"+(1e6*Math.random()|0),DA=0;function CA(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++DA,this.da=this.fa=!1}function uc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function lc(c){this.src=c,this.g={},this.h=0}lc.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var P=Hd(c,d,g,b);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new CA(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function $d(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(uc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Hd(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var qd="closure_lm_"+(1e6*Math.random()|0),zd={};function Zv(c,d,f,g,b){if(g&&g.once)return e_(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Zv(c,d[A],f,g,b);return null}return f=Qd(f),c&&c[hs]?c.K(d,f,l(g)?!!g.capture:!!g,b):Xv(c,d,f,!1,g,b)}function Xv(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var P=l(b)?!!b.capture:!!b,Ce=Wd(c);if(Ce||(c[qd]=Ce=new lc(c)),f=Ce.add(d,f,g,P,A),f.proxy)return f;if(g=bA(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)wA||(b=P),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(n_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function bA(){function c(f){return d.call(c.src,c.listener,f)}let d=TA;return c}function e_(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)e_(c,d[A],f,g,b);return null}return f=Qd(f),c&&c[hs]?c.L(d,f,l(g)?!!g.capture:!!g,b):Xv(c,d,f,!0,g,b)}function t_(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)t_(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Qd(f),c&&c[hs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Hd(A,f,g,b),-1<f&&(uc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Wd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Hd(d,f,g,b)),(f=-1<c?d[c]:null)&&Gd(f))}function Gd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[hs])$d(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(n_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Wd(d))?($d(f,c),f.h==0&&(f.src=null,d[qd]=null)):uc(c)}}}function n_(c){return c in zd?zd[c]:zd[c]="on"+c}function TA(c,d){if(c.da)c=!0;else{d=new ds(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Gd(c),c=f.call(g,d)}return c}function Wd(c){return c=c[qd],c instanceof lc?c:null}var Kd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qd(c){return typeof c=="function"?c:(c[Kd]||(c[Kd]=function(d){return c.handleEvent(d)}),c[Kd])}function rt(){Jn.call(this),this.i=new lc(this),this.M=this,this.F=null}S(rt,Jn),rt.prototype[hs]=!0,rt.prototype.removeEventListener=function(c,d,f,g){t_(this,c,d,f,g)};function dt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new nt(d,c);else if(d instanceof nt)d.target=d.target||c;else{var b=d;d=new nt(g,c),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];b=dc(P,g,!0,d)&&b}if(P=d.g=c,b=dc(P,g,!0,d)&&b,b=dc(P,g,!1,d)&&b,f)for(A=0;A<f.length;A++)P=d.g=f[A],b=dc(P,g,!1,d)&&b}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)uc(f[g]);delete c.g[d],c.h--}}this.F=null},rt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},rt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function dc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var Ce=P.listener,Ye=P.ha||P.src;P.fa&&$d(c.i,P),b=Ce.call(Ye,g)!==!1&&b}}return b&&!g.defaultPrevented}function r_(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function i_(c){c.g=r_(()=>{c.g=null,c.i&&(c.i=!1,i_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class AA extends Jn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:i_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(c){Jn.call(this),this.h=c,this.g={}}S(fs,Jn);var o_=[];function s_(c){ee(c.g,function(d,f){this.g.hasOwnProperty(f)&&Gd(d)},c),c.g={}}fs.prototype.N=function(){fs.aa.N.call(this),s_(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yd=a.JSON.stringify,SA=a.JSON.parse,RA=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Jd(){}Jd.prototype.h=null;function a_(c){return c.h||(c.h=c.i())}function c_(){}var ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zd(){nt.call(this,"d")}S(Zd,nt);function Xd(){nt.call(this,"c")}S(Xd,nt);var Or={},u_=null;function hc(){return u_=u_||new rt}Or.La="serverreachability";function l_(c){nt.call(this,Or.La,c)}S(l_,nt);function gs(c){let d=hc();dt(d,new l_(d))}Or.STAT_EVENT="statevent";function d_(c,d){nt.call(this,Or.STAT_EVENT,c),this.stat=d}S(d_,nt);function ht(c){let d=hc();dt(d,new d_(d,c))}Or.Ma="timingevent";function h_(c,d){nt.call(this,Or.Ma,c),this.size=d}S(h_,nt);function ms(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function MA(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var P="",Ce=A.split("&"),Ye=0;Ye<Ce.length;Ye++){var ye=Ce[Ye].split("=");if(1<ye.length){var it=ye[0];ye=ye[1];var ot=it.split("_");P=2<=ot.length&&ot[1]=="type"?P+(it+"="+ye+"&"):P+(it+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+P})}function xA(c,d,f,g,b,A,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+P})}function ki(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+PA(c,f)+(g?" "+g:"")})}function NA(c,d){c.info(function(){return"TIMEOUT: "+d})}ys.prototype.info=function(){};function PA(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<b.length;P++)b[P]=""}}}}return Yd(f)}catch{return d}}var fc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},f_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eh;function pc(){}S(pc,Jd),pc.prototype.g=function(){return new XMLHttpRequest},pc.prototype.i=function(){return{}},eh=new pc;function Zn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new p_}function p_(){this.i=null,this.g="",this.h=!1}var g_={},th={};function nh(c,d,f){c.L=1,c.v=vc(An(d)),c.m=f,c.P=!0,m_(c,null)}function m_(c,d){c.F=Date.now(),gc(c),c.A=An(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),M_(f.i,"t",g),c.C=0,f=c.j.J,c.h=new p_,c.g=K_(c.j,f?d:null,!c.m),0<c.O&&(c.M=new AA(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(o_[0]=b.toString()),b=o_);for(var A=0;A<b.length;A++){var P=Zv(f,b[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?m(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),gs(),MA(c.i,c.u,c.A,c.l,c.R,c.m)}Zn.prototype.ca=function(c){c=c.target;let d=this.M;d&&Sn(c)==3?d.j():this.Y(c)},Zn.prototype.Y=function(c){try{if(c==this.g)e:{let ot=Sn(this.g);var d=this.g.Ba();let Vi=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||L_(this.g)))){this.J||ot!=4||d==7||(d==8||0>=Vi?gs(3):gs(2)),rh(this);var f=this.g.Z();this.X=f;t:if(y_(this)){var g=L_(this.g);c="";var b=g.length,A=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),vs(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,xA(this.i,this.u,this.A,this.l,this.R,ot,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,Ye=this.g;if((Ce=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Ce)){var ye=Ce;break t}}ye=null}if(f=ye)ki(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ih(this,f);else{this.o=!1,this.s=3,ht(12),kr(this),vs(this);break e}}if(this.P){f=!0;let zt;for(;!this.J&&this.C<P.length;)if(zt=OA(this,P),zt==th){ot==4&&(this.s=4,ht(14),f=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==g_){this.s=4,ht(15),ki(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else ki(this.i,this.l,zt,null),ih(this,zt);if(y_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||P.length!=0||this.h.h||(this.s=1,ht(16),f=!1),this.o=this.o&&f,!f)ki(this.i,this.l,P,"[Invalid Chunked Response]"),kr(this),vs(this);else if(0<P.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),lh(it),it.M=!0,ht(11))}}else ki(this.i,this.l,P,null),ih(this,P);ot==4&&kr(this),this.o&&!this.J&&(ot==4?q_(this.j,this):(this.o=!1,gc(this)))}else JA(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),kr(this),vs(this)}}}catch{}finally{}};function y_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function OA(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?th:(f=Number(d.substring(f,g)),isNaN(f)?g_:(g+=1,g+f>d.length?th:(d=d.slice(g,g+f),c.C=g+f,d)))}Zn.prototype.cancel=function(){this.J=!0,kr(this)};function gc(c){c.S=Date.now()+c.I,v_(c,c.I)}function v_(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ms(y(c.ba,c),d)}function rh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Zn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(NA(this.i,this.A),this.L!=2&&(gs(),ht(17)),kr(this),this.s=2,vs(this)):v_(this,this.S-c)};function vs(c){c.j.G==0||c.J||q_(c.j,c)}function kr(c){rh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,s_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ih(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||oh(f.h,c))){if(!c.K&&oh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Dc(f),wc(f);else break e;uh(f),ht(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ms(y(f.Za,f),6e3));if(1>=w_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Lr(f,11)}else if((c.K||f.g==c)&&Dc(f),!K(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ye=b[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let it=ye[3];it!=null&&(f.la=it,f.j.info("VER="+f.la));let ot=ye[4];ot!=null&&(f.Aa=ot,f.j.info("SVER="+f.Aa));let Vi=ye[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(g=1.5*Vi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let zt=c.g;if(zt){let bc=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bc){var A=g.h;A.g||bc.indexOf("spdy")==-1&&bc.indexOf("quic")==-1&&bc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(sh(A,A.h),A.h=null))}if(g.D){let dh=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;dh&&(g.ya=dh,Ae(g.I,g.D,dh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=W_(g,g.J?g.ia:null,g.W),P.K){E_(g.h,P);var Ce=P,Ye=g.L;Ye&&(Ce.I=Ye),Ce.B&&(rh(Ce),gc(Ce)),g.g=P}else $_(g);0<f.i.length&&Ec(f)}else ye[0]!="stop"&&ye[0]!="close"||Lr(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Lr(f,7):ch(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}gs(4)}catch{}}var kA=class{constructor(c,d){this.g=c,this.map=d}};function __(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function I_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function w_(c){return c.h?1:c.g?c.g.size:0}function oh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function sh(c,d){c.g?c.g.add(d):c.h=d}function E_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}__.prototype.cancel=function(){if(this.i=D_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function D_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function FA(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function LA(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function C_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=LA(c),g=FA(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var b_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VA(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Fr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Fr){this.h=c.h,mc(this,c.j),this.o=c.o,this.g=c.g,yc(this,c.s),this.l=c.l;var d=c.i,f=new ws;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),T_(this,f),this.m=c.m}else c&&(d=String(c).match(b_))?(this.h=!1,mc(this,d[1]||"",!0),this.o=_s(d[2]||""),this.g=_s(d[3]||"",!0),yc(this,d[4]),this.l=_s(d[5]||"",!0),T_(this,d[6]||"",!0),this.m=_s(d[7]||"")):(this.h=!1,this.i=new ws(null,this.h))}Fr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Is(d,A_,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Is(d,A_,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Is(f,f.charAt(0)=="/"?BA:jA,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Is(f,HA)),c.join("")};function An(c){return new Fr(c)}function mc(c,d,f){c.j=f?_s(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function T_(c,d,f){d instanceof ws?(c.i=d,qA(c.i,c.h)):(f||(d=Is(d,$A)),c.i=new ws(d,c.h))}function Ae(c,d,f){c.i.set(d,f)}function vc(c){return Ae(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _s(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Is(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,UA),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function UA(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var A_=/[#\/\?@]/g,jA=/[#\?:]/g,BA=/[#\?]/g,$A=/[#\?@]/g,HA=/#/g;function ws(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Xn(c){c.g||(c.g=new Map,c.h=0,c.i&&VA(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ws.prototype,t.add=function(c,d){Xn(this),this.i=null,c=Fi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function S_(c,d){Xn(c),d=Fi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function R_(c,d){return Xn(c),d=Fi(c,d),c.g.has(d)}t.forEach=function(c,d){Xn(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){Xn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){Xn(this);let d=[];if(typeof c=="string")R_(this,c)&&(d=d.concat(this.g.get(Fi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Xn(this),this.i=null,c=Fi(this,c),R_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function M_(c,d,f){S_(c,d),0<f.length&&(c.i=null,c.g.set(Fi(c,d),M(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var b=A;P[g]!==""&&(b+="="+encodeURIComponent(String(P[g]))),c.push(b)}}return this.i=c.join("&")};function Fi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function qA(c,d){d&&!c.j&&(Xn(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(S_(this,g),M_(this,b,f))},c)),c.j=d}function zA(c,d){let f=new ys;if(a.Image){let g=new Image;g.onload=w(er,f,"TestLoadImage: loaded",!0,d,g),g.onerror=w(er,f,"TestLoadImage: error",!1,d,g),g.onabort=w(er,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=w(er,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function GA(c,d){let f=new ys,g=new AbortController,b=setTimeout(()=>{g.abort(),er(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?er(f,"TestPingServer: ok",!0,d):er(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),er(f,"TestPingServer: error",!1,d)})}function er(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function WA(){this.g=new RA}function KA(c,d,f){let g=f||"";try{C_(c,function(b,A){let P=b;l(b)&&(P=Yd(b)),d.push(g+A+"="+encodeURIComponent(P))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Es(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Es,Jd),Es.prototype.g=function(){return new _c(this.l,this.j)},Es.prototype.i=function(c){return function(){return c}}({});function _c(c,d){rt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(_c,rt),t=_c.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Cs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;x_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function x_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ds(this):Cs(this),this.readyState==3&&x_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ds(this))},t.Qa=function(c){this.g&&(this.response=c,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Cs(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Cs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(_c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function N_(c){let d="";return ee(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ah(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=N_(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ae(c,d,f))}function Ne(c){rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ne,rt);var QA=/^https?$/i,YA=["POST","PUT"];t=Ne.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eh.g(),this.v=this.o?a_(this.o):a_(eh),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){P_(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(YA,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{F_(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){P_(this,A)}};function P_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,O_(c),Ic(c)}function O_(c){c.A||(c.A=!0,dt(c,"complete"),dt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,dt(this,"complete"),dt(this,"abort"),Ic(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ic(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?k_(this):this.bb())},t.bb=function(){k_(this)};function k_(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Sn(c)!=4||c.Z()!=2)){if(c.u&&Sn(c)==4)r_(c.Ea,0,c);else if(dt(c,"readystatechange"),Sn(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var b=String(c.D).match(b_)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!QA.test(b?b.toLowerCase():"")}f=g}if(f)dt(c,"complete"),dt(c,"success");else{c.m=6;try{var A=2<Sn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",O_(c)}}finally{Ic(c)}}}}function Ic(c,d){if(c.g){F_(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||dt(c,"ready");try{f.onreadystatechange=g}catch{}}}function F_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Sn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),SA(d)}};function L_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function JA(c){let d={};c=(c.g&&2<=Sn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(K(c[g]))continue;var f=C(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function V_(c){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,c),this.cb=bs("retryDelaySeedMs",1e4,c),this.Wa=bs("forwardChannelMaxRetries",2,c),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new __(c&&c.concurrentRequestLimit),this.Da=new WA,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=V_.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ht(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=W_(this,null,this.W),Ec(this)};function ch(c){if(U_(c),c.G==3){var d=c.U++,f=An(c.I);if(Ae(f,"SID",c.K),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),Ts(c,f),d=new Zn(c,c.j,d),d.L=2,d.v=vc(An(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=K_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),gc(d)}G_(c)}function wc(c){c.g&&(lh(c),c.g.cancel(),c.g=null)}function U_(c){wc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Dc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ec(c){if(!I_(c.h)&&!c.s){c.s=!0;var d=c.Ga;us||Jv(),ls||(us(),ls=!0),Bd.add(d,c),c.B=0}}function ZA(c,d){return w_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ms(y(c.Ga,c,d),z_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Zn(this,this.j,c),A=this.o;if(this.S&&(A?(A=m(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=B_(this,b,d),f=An(this.I),Ae(f,"RID",c),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),Ts(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(N_(A)))+"&"+d:this.m&&ah(f,this.m,A)),sh(this.h,b),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",d),Ae(f,"SID","null"),b.T=!0,nh(b,f,null)):nh(b,f,d),this.G=2}}else this.G==3&&(c?j_(this,c):this.i.length==0||I_(this.h)||j_(this))};function j_(c,d){var f;d?f=d.l:f=c.U++;let g=An(c.I);Ae(g,"SID",c.K),Ae(g,"RID",f),Ae(g,"AID",c.T),Ts(c,g),c.m&&c.o&&ah(g,c.m,c.o),f=new Zn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=B_(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),sh(c.h,f),nh(f,g,d)}function Ts(c,d){c.H&&ee(c.H,function(f,g){Ae(d,g,f)}),c.l&&C_({},function(f,g){Ae(d,g,f)})}function B_(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=b[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let Ce=!0;for(let Ye=0;Ye<f;Ye++){let ye=b[Ye].g,it=b[Ye].map;if(ye-=A,0>ye)A=Math.max(0,b[Ye].g-100),Ce=!1;else try{KA(it,P,"req"+ye+"_")}catch{g&&g(it)}}if(Ce){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function $_(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;us||Jv(),ls||(us(),ls=!0),Bd.add(d,c),c.v=0}}function uh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ms(y(c.Fa,c),z_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,H_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ms(y(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),wc(this),H_(this))};function lh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function H_(c){c.g=new Zn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=An(c.qa);Ae(d,"RID","rpc"),Ae(d,"SID",c.K),Ae(d,"AID",c.T),Ae(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ae(d,"TO",c.ja),Ae(d,"TYPE","xmlhttp"),Ts(c,d),c.m&&c.o&&ah(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=vc(An(d)),f.m=null,f.P=!0,m_(f,c)}t.Za=function(){this.C!=null&&(this.C=null,wc(this),uh(this),ht(19))};function Dc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function q_(c,d){var f=null;if(c.g==d){Dc(c),lh(c),c.g=null;var g=2}else if(oh(c.h,d))f=d.D,E_(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=hc(),dt(g,new h_(g,f)),Ec(c)}else $_(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&ZA(c,d)||g==2&&uh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Lr(c,5);break;case 4:Lr(c,10);break;case 3:Lr(c,6);break;default:Lr(c,2)}}}function z_(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Lr(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let b=!g;g=new Fr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mc(g,"https"),vc(g),b?zA(g.toString(),f):GA(g.toString(),f)}else ht(2);c.G=0,c.l&&c.l.sa(d),G_(c),U_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function G_(c){if(c.G=0,c.ka=[],c.l){let d=D_(c.h);(d.length!=0||c.i.length!=0)&&(x(c.ka,d),x(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function W_(c,d,f){var g=f instanceof Fr?An(f):new Fr(f);if(g.g!="")d&&(g.g=d+"."+g.g),yc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Fr(null);g&&mc(A,g),d&&(A.g=d),b&&yc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ae(g,f,d),Ae(g,"VER",c.la),Ts(c,g),g}function K_(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ne(new Es({eb:f})):new Ne(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Q_(){}t=Q_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cc(){}Cc.prototype.g=function(c,d){return new Et(c,d)};function Et(c,d){rt.call(this),this.g=new V_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!K(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!K(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Li(this)}S(Et,rt),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){ch(this.g)},Et.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Yd(c),c=f);d.i.push(new kA(d.Ya++,c)),d.G==3&&Ec(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,ch(this.g),delete this.g,Et.aa.N.call(this)};function Y_(c){Zd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(Y_,Zd);function J_(){Xd.call(this),this.status=1}S(J_,Xd);function Li(c){this.g=c}S(Li,Q_),Li.prototype.ua=function(){dt(this.g,"a")},Li.prototype.ta=function(c){dt(this.g,new Y_(c))},Li.prototype.sa=function(c){dt(this.g,new J_)},Li.prototype.ra=function(){dt(this.g,"b")},Cc.prototype.createWebChannel=Cc.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,Lm=zn.createWebChannelTransport=function(){return new Cc},Fm=zn.getStatEventTarget=function(){return hc()},km=zn.Event=Or,zl=zn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fc.NO_ERROR=0,fc.TIMEOUT=8,fc.HTTP_ERROR=6,Oa=zn.ErrorCode=fc,f_.COMPLETE="complete",Om=zn.EventType=f_,c_.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Fo=zn.WebChannel=c_,Pm=zn.FetchXmlHttpFactory=Es,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,Nm=zn.XhrIo=Ne}).apply(typeof ql<"u"?ql:typeof self<"u"?self:typeof window<"u"?window:{});var qC="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var rs="10.13.1";var Ai=new wr("@firebase/firestore");function ka(){return Ai.logLevel}function L(t,...e){if(Ai.logLevel<=de.DEBUG){let n=e.map(Cv);Ai.debug(`Firestore (${rs}): ${t}`,...n)}}function Wn(t,...e){if(Ai.logLevel<=de.ERROR){let n=e.map(Cv);Ai.error(`Firestore (${rs}): ${t}`,...n)}}function Ho(t,...e){if(Ai.logLevel<=de.WARN){let n=e.map(Cv);Ai.warn(`Firestore (${rs}): ${t}`,...n)}}function Cv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function z(t="Unexpected state"){let e=`FIRESTORE (${rs}) INTERNAL ASSERTION FAILED: `+t;throw Wn(e),new Error(e)}function Te(t,e){t||z()}function Y(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends Mt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Gn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Yl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$m=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}},Hm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},qm=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>I(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new Yl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Qe(e)}},zm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Gm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new zm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Km=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new Wm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function KV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Jl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=KV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ve(t,e){return t<e?-1:t>e?1:0}function qo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var tt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new tt(0,0))}static max(){return new t(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(),r===void 0?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Me=class t extends Zl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},QV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pt=class t extends Zl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return QV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};var Qm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Qm.UNKNOWN_ID=-1;function YV(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new Si(i,B.empty(),e)}function JV(t){return new Si(t.readTime,t.key,-1)}var Si=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),B.empty(),-1)}static max(){return new t(X.max(),B.empty(),-1)}};function ZV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}var XV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ym=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ec(t){return I(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==XV)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var N=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function eU(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tc(t){return t.name==="IndexedDbTransactionError"}var bb=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Td(t){return t==null}function $a(t){return t===0&&1/t==-1/0}function tU(t){return typeof t=="number"&&Number.isInteger(t)&&!$a(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var nU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],I9=[...nU,"documentOverlays"],rU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iU=rU,oU=[...iU,"indexConfiguration","indexState","indexEntries"];var w9=[...oU,"globals"];function zC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Tb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Oe=class t{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jo(this.root,e,this.comparator,!0)}},jo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},En=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,n,r,i,o){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ut=class t{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xl(this.data.getIterator())}getIteratorFrom(e){return new Xl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Xl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var wn=class t{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ut(Pt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ed=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ed("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var sU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(t){if(Te(!!t),typeof t=="string"){let e=0,n=sU.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}function bv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tv(t){let e=t.mapValue.fields.__previous_value__;return bv(e)?Tv(e):e}function Ha(t){let e=Kn(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}var Jm=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},td=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Gl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bv(t)?4:Sb(t)?9007199254740991:Ab(t)?10:11:z()}function bn(t,e){if(t===e)return!0;let n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ha(t).isEqual(Ha(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Kn(i.timestampValue),a=Kn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return xr(i.bytesValue).isEqual(xr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Re(i.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Re(i.integerValue)===Re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Re(i.doubleValue),a=Re(o.doubleValue);return s===a?$a(s)===$a(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return qo(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(zC(s)!==zC(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!bn(s[u],a[u])))return!1;return!0}(t,e);default:return z()}}function qa(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function zo(t,e){if(t===e)return 0;let n=Ri(t),r=Ri(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Re(o.integerValue||o.doubleValue),u=Re(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return GC(t.timestampValue,e.timestampValue);case 4:return GC(Ha(t),Ha(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(o,s){let a=xr(o),u=xr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ve(a[l],u[l]);if(h!==0)return h}return ve(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ve(Re(o.latitude),Re(s.latitude));return a!==0?a:ve(Re(o.longitude),Re(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return WC(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,M=ve(((l=w?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:WC(w,S)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Gl.mapValue&&s===Gl.mapValue)return 0;if(o===Gl.mapValue)return 1;if(s===Gl.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=ve(u[p],h[p]);if(y!==0)return y;let w=zo(a[u[p]],l[h[p]]);if(w!==0)return w}return ve(u.length,h.length)}(t.mapValue,e.mapValue);default:throw z()}}function GC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);let n=Kn(t),r=Kn(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function WC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=zo(n[i],r[i]);if(o)return o}return ve(n.length,r.length)}function Go(t){return Zm(t)}function Zm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Kn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return B.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Zm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Zm(n.fields[s])}`;return i+"}"}(t.mapValue):z()}function KC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xm(t){return!!t&&"integerValue"in t}function Av(t){return!!t&&"arrayValue"in t}function QC(t){return!!t&&"nullValue"in t}function YC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kl(t){return!!t&&"mapValue"in t}function Ab(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function La(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=La(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=La(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Sb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var tn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=La(n)}setAll(e){let n=Pt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=La(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){is(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(La(this.value))}};function Rb(t){let e=[];return is(t.fields,(n,r)=>{let i=new Pt([n]);if(Kl(r)){let o=Rb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new wn(e)}var nn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),tn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Wo=class{constructor(e,n){this.position=e,this.inclusive=n}};function JC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=zo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}var Ko=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function aU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var nd=class{},je=class t extends nd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ty(e,n,r):n==="array-contains"?new iy(e,r):n==="in"?new oy(e,r):n==="not-in"?new sy(e,r):n==="array-contains-any"?new ay(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ny(e,r):new ry(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zo(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},rn=class t extends nd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Mb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Mb(t){return t.op==="and"}function xb(t){return cU(t)&&Mb(t)}function cU(t){for(let e of t.filters)if(e instanceof rn)return!1;return!0}function ey(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Go(t.value);if(xb(t))return t.filters.map(e=>ey(e)).join(",");{let e=t.filters.map(n=>ey(n)).join(",");return`${t.op}(${e})`}}function Nb(t,e){return t instanceof je?function(r,i){return i instanceof je&&r.op===i.op&&r.field.isEqual(i.field)&&bn(r.value,i.value)}(t,e):t instanceof rn?function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Nb(s,i.filters[a]),!0):!1}(t,e):void z()}function Pb(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Go(n.value)}`}(t):t instanceof rn?function(n){return n.op.toString()+" {"+n.getFilters().map(Pb).join(" ,")+"}"}(t):"Filter"}var ty=class extends je{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},ny=class extends je{constructor(e,n){super(e,"in",n),this.keys=Ob("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},ry=class extends je{constructor(e,n){super(e,"not-in",n),this.keys=Ob("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Ob(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}var iy=class extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Av(n)&&qa(n.arrayValue,this.value)}},oy=class extends je{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&qa(this.value.arrayValue,n)}},sy=class extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!qa(this.value.arrayValue,n)}},ay=class extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Av(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qa(this.value.arrayValue,r))}};var cy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function XC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new cy(t,e,n,r,i,o,s)}function Sv(t){let e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ey(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Go(r)).join(",")),e.ue=n}return e.ue}function Rv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Nb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ZC(t.startAt,e.startAt)&&ZC(t.endAt,e.endAt)}function uy(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Mi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function uU(t,e,n,r,i,o,s,a){return new Mi(t,e,n,r,i,o,s,a)}function Mv(t){return new Mi(t)}function eb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kb(t){return t.collectionGroup!==null}function Va(t){let e=Y(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ut(Pt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ko(o,r))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new Ko(Pt.keyField(),r))}return e.ce}function Dn(t){let e=Y(t);return e.le||(e.le=lU(e,Va(t))),e.le}function lU(t,e){if(t.limitType==="F")return XC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ko(i.field,o)});let n=t.endAt?new Wo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wo(t.startAt.position,t.startAt.inclusive):null;return XC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ly(t,e){let n=t.filters.concat([e]);return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dy(t,e,n){return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ad(t,e){return Rv(Dn(t),Dn(e))&&t.limitType===e.limitType}function Fb(t){return`${Sv(Dn(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Pb(i)).join(", ")}]`),Td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Go(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Go(i)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function Sd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Va(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=JC(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Va(r),i)||r.endAt&&!function(s,a,u){let l=JC(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Va(r),i))}(t,e)}function dU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Lb(t){return(e,n)=>{let r=!1;for(let i of Va(t)){let o=hU(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function hU(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?zo(u,l):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Nr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Tb(this.inner)}size(){return this.innerSize}};var fU=new Oe(B.comparator);function Qn(){return fU}var Vb=new Oe(B.comparator);function Fa(...t){let e=Vb;for(let n of t)e=e.insert(n.key,n);return e}function Ub(t){let e=Vb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Di(){return Ua()}function jb(){return Ua()}function Ua(){return new Nr(t=>t.toString(),(t,e)=>t.isEqual(e))}var pU=new Oe(B.comparator),gU=new ut(B.comparator);function he(...t){let e=gU;for(let n of t)e=e.add(n);return e}var mU=new ut(ve);function yU(){return mU}function xv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$a(e)?"-0":e}}function Bb(t){return{integerValue:""+t}}function vU(t,e){return tU(e)?Bb(e):xv(t,e)}var Qo=class{constructor(){this._=void 0}};function _U(t,e,n){return t instanceof Yo?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&bv(o)&&(o=Tv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof xi?Hb(t,e):t instanceof Ni?qb(t,e):function(i,o){let s=$b(i,o),a=tb(s)+tb(i.Pe);return Xm(s)&&Xm(i.Pe)?Bb(a):xv(i.serializer,a)}(t,e)}function IU(t,e,n){return t instanceof xi?Hb(t,e):t instanceof Ni?qb(t,e):n}function $b(t,e){return t instanceof Jo?function(r){return Xm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Yo=class extends Qo{},xi=class extends Qo{constructor(e){super(),this.elements=e}};function Hb(t,e){let n=zb(e);for(let r of t.elements)n.some(i=>bn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ni=class extends Qo{constructor(e){super(),this.elements=e}};function qb(t,e){let n=zb(e);for(let r of t.elements)n=n.filter(i=>!bn(i,r));return{arrayValue:{values:n}}}var Jo=class extends Qo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function tb(t){return Re(t.integerValue||t.doubleValue)}function zb(t){return Av(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xi&&i instanceof xi||r instanceof Ni&&i instanceof Ni?qo(r.elements,i.elements,bn):r instanceof Jo&&i instanceof Jo?bn(r.Pe,i.Pe):r instanceof Yo&&i instanceof Yo}(t.transform,e.transform)}var hy=class{constructor(e,n){this.version=e,this.transformResults=n}},Ti=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ql(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Zo=class{};function Gb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rd(t.key,Ti.none()):new Pi(t.key,t.data,Ti.none());{let n=t.data,r=tn.empty(),i=new ut(Pt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yn(t.key,r,new wn(i.toArray()),Ti.none())}}function EU(t,e,n){t instanceof Pi?function(i,o,s){let a=i.value.clone(),u=rb(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yn?function(i,o,s){if(!Ql(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=rb(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Wb(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ja(t,e,n,r){return t instanceof Pi?function(o,s,a,u){if(!Ql(o.precondition,s))return a;let l=o.value.clone(),h=ib(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yn?function(o,s,a,u){if(!Ql(o.precondition,s))return a;let l=ib(o.fieldTransforms,u,s),h=s.data;return h.setAll(Wb(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Ql(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function DU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=$b(r.transform,i||null);o!=null&&(n===null&&(n=tn.empty()),n.set(r.field,o))}return n||null}function nb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qo(r,i,(o,s)=>wU(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Pi=class extends Zo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yn=class extends Zo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Wb(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function rb(t,e,n){let r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,IU(s,a,n[i]))}return r}function ib(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,_U(o,s,e))}return r}var rd=class extends Zo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fy=class extends Zo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var py=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&EU(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ja(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=jb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=Gb(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(n,r)=>nb(n,r))&&qo(this.baseMutations,e.baseMutations,(n,r)=>nb(n,r))}},gy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=function(){return pU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var my=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,ge;function CU(t){switch(t){default:return z();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Kb(t){if(t===void 0)return Wn("GRPC error has no .code"),R.UNKNOWN;switch(t){case Ve.OK:return R.OK;case Ve.CANCELLED:return R.CANCELLED;case Ve.UNKNOWN:return R.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return R.INTERNAL;case Ve.UNAVAILABLE:return R.UNAVAILABLE;case Ve.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Ve.NOT_FOUND:return R.NOT_FOUND;case Ve.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Ve.ABORTED:return R.ABORTED;case Ve.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Ve.DATA_LOSS:return R.DATA_LOSS;default:return z()}}(ge=Ve||(Ve={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var ob=null;function bU(){return new TextEncoder}var TU=new Rr([4294967295,4294967295],0);function sb(t){let e=bU().encode(t),n=new xm;return n.update(e),new Uint8Array(n.digest())}function ab(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([i,o],0)]}var vy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ci(`Invalid padding: ${n}`);if(r<0)throw new Ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ci(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ci(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Rr.fromNumber(r)));return i.compare(TU)===1&&(i=new Rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=sb(e),[r,i]=ab(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=sb(e),[r,i]=ab(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ci=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var id=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,za.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new Oe(ve),Qn(),he())}},za=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var Bo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},od=class{constructor(e,n){this.targetId=e,this.me=n}},sd=class{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ad=class{constructor(){this.fe=0,this.ge=ub(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new za(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ub()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},_y=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qn(),this.qe=cb(),this.Qe=new Oe(ve)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(uy(o))if(r===0){let s=new B(o.path);this.Ue(n,s,nn.newNoDocument(s,X.min()))}else Te(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}ob?.et(function(h,p,y,w,S){var M,x,O,K,$,fe;let xe={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},ee=p.unchangedNames;return ee&&(xe.bloomFilter={applied:S===0,hashCount:(M=ee?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(K=(O=(x=ee?.bits)===null||x===void 0?void 0:x.bitmap)===null||O===void 0?void 0:O.length)!==null&&K!==void 0?K:0,padding:(fe=($=ee?.bits)===null||$===void 0?void 0:$.padding)!==null&&fe!==void 0?fe:0,mightContain:D=>{var m;return(m=w?.mightContain(D))!==null&&m!==void 0&&m}}),xe}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=xr(r).toUint8Array()}catch(u){if(u instanceof ed)return Ho("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new vy(s,i,o)}catch(u){return Ho(u instanceof Ci?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&uy(a.target)){let u=new B(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,nn.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=he();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new id(e,n,this.Qe,this.ke,r);return this.ke=Qn(),this.qe=cb(),this.Qe=new Oe(ve),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ad,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ut(ve),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ad),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function cb(){return new Oe(B.comparator)}function ub(){return new Oe(B.comparator)}var AU={asc:"ASCENDING",desc:"DESCENDING"},SU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RU={and:"AND",or:"OR"},Iy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function wy(t,e){return t.useProto3Json||Td(e)?e:{value:e}}function cd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MU(t,e){return cd(t,e.toTimestamp())}function Cn(t){return Te(!!t),X.fromTimestamp(function(n){let r=Kn(n);return new tt(r.seconds,r.nanos)}(t))}function Nv(t,e){return Ey(t,e).canonicalString()}function Ey(t,e){let n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Yb(t){let e=Me.fromString(t);return Te(tT(e)),e}function Dy(t,e){return Nv(t.databaseId,e.path)}function Vm(t,e){let n=Yb(e);if(n.get(1)!==t.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(Zb(n))}function Jb(t,e){return Nv(t.databaseId,e)}function xU(t){let e=Yb(t);return e.length===4?Me.emptyPath():Zb(e)}function Cy(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Zb(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lb(t,e,n){return{name:Dy(t,e),fields:n.value.mapValue.fields}}function NU(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Te(h===void 0||typeof h=="string"),lt.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:Kb(l.code);return new k(h,l.message||"")}(s);n=new sd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vm(t,r.document.name),o=Cn(r.document.updateTime),s=r.document.createTime?Cn(r.document.createTime):X.min(),a=new tn({mapValue:{fields:r.document.fields}}),u=nn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Bo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vm(t,r.document),o=r.readTime?Cn(r.readTime):X.min(),s=nn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Bo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vm(t,r.document),o=r.removedTargetIds||[];n=new Bo([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new yy(i,o),a=r.targetId;n=new od(a,s)}}return n}function PU(t,e){let n;if(e instanceof Pi)n={update:lb(t,e.key,e.value)};else if(e instanceof rd)n={delete:Dy(t,e.key)};else if(e instanceof Yn)n={update:lb(t,e.key,e.data),updateMask:$U(e.fieldMask)};else{if(!(e instanceof fy))return z();n={verify:Dy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Yo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ni)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jo)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:MU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(t,e.precondition)),n}function OU(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Cn(i.updateTime):Cn(o);return s.isEqual(X.min())&&(s=Cn(o)),new hy(s,i.transformResults||[])}(n,e))):[]}function kU(t,e){return{documents:[Jb(t,e.path)]}}function FU(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Jb(t,i);let o=function(l){if(l.length!==0)return eT(rn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:Vo(y.field),direction:UU(y.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=wy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function LU(t){let e=xU(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Te(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let y=Xb(p);return y instanceof rn&&xb(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(y=>function(S){return new Ko(Uo(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,Td(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,w=p.values||[];return new Wo(w,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,w=p.values||[];return new Wo(w,y)}(n.endAt)),uU(e,i,s,o,a,"F",u,l)}function VU(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Xb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Uo(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Uo(n.unaryFilter.field);return je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Uo(n.unaryFilter.field);return je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Uo(n.unaryFilter.field);return je.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):t.fieldFilter!==void 0?function(n){return je.create(Uo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rn.create(n.compositeFilter.filters.map(r=>Xb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(t):z()}function UU(t){return AU[t]}function jU(t){return SU[t]}function BU(t){return RU[t]}function Vo(t){return{fieldPath:t.canonicalString()}}function Uo(t){return Pt.fromServerFormat(t.fieldPath)}function eT(t){return t instanceof je?function(n){if(n.op==="=="){if(YC(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(QC(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YC(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(QC(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:jU(n.op),value:n.value}}}(t):t instanceof rn?function(n){let r=n.getFilters().map(i=>eT(i));return r.length===1?r[0]:{compositeFilter:{op:BU(n.op),filters:r}}}(t):z()}function $U(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ga=class t{constructor(e,n,r,i,o=X.min(),s=X.min(),a=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var by=class{constructor(e){this.ct=e}};function HU(t){let e=LU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dy(e,e.limit,"L"):e}var ud=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),$a(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Kn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(xr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Sb(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Ab(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):z()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Re(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),B.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};ud.vt=new ud;var Ty=class{constructor(){this.un=new Ay}addToCollectionParentIndex(e,n){return this.un.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Si.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}},Ay=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ut(Me.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ut(Me.comparator)).toArray()}};var D9=new Uint8Array(0);var In=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(41943040,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);var Wa=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Sy=class{constructor(){this.changes=new Nr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ry=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var My=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ja(r.mutation,i,wn.empty(),tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=Di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Fa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Qn(),s=Ua(),a=function(){return Ua()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Yn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ja(h.mutation,l,h.mutation.getFieldMask(),tt.now())):s.set(l.key,wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Ry(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ua(),i=new Oe((s,a)=>s-a),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||wn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=jb();h.forEach(y=>{if(!o.has(y)){let w=Gb(n.get(y),r.get(y));w!==null&&p.set(y,w),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):N.resolve(Di()),a=-1,u=o;return s.next(l=>N.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:a,changes:Ub(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Fa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Fa();return this.indexManager.getCollectionParents(e,o).next(a=>N.forEach(a,u=>{let l=function(p,y){return new Mi(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,nn.newInvalidDocument(h)))});let a=Fa();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ja(h.mutation,l,wn.empty(),tt.now()),Sd(n,l)&&(a=a.insert(u,l))}),a})}};var xy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return N.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Cn(i.createTime)}}(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:HU(i.bundledQuery),readTime:Cn(i.readTime)}}(n)),N.resolve()}};var Ny=class{constructor(){this.overlays=new Oe(B.comparator),this.Ir=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Di();return N.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),N.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){let i=Di(),o=n.length+1,s=new B(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Di(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Di(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return N.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new my(n,r));let o=this.Ir.get(n);o===void 0&&(o=he(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var Py=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,N.resolve()}};var Ka=class{constructor(){this.Tr=new ut(Ue.Er),this.dr=new ut(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new B(new Me([])),r=new Ue(n,e),i=new Ue(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new B(new Me([])),r=new Ue(n,e),i=new Ue(n,e+1),o=he();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return B.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||B.comparator(e.key,n.key)}};var Oy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ut(Ue.Er)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new py(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ue(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,n){return N.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ut(ve);return n.forEach(i=>{let o=new Ue(i,0),s=new Ue(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),N.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Ue(new B(o),0),a=new ut(ve);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),N.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return N.forEach(n.mutations,i=>{let o=new Ue(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ue(n,0),i=this.br.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ky=class{constructor(e){this.Mr=e,this.docs=function(){return new Oe(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nn.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Qn(),s=n.path,a=new B(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ZV(JV(h),r)<=0||(i.has(h.key)||Sd(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z()}Or(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Fy(this)}getSize(e){return N.resolve(this.size)}},Fy=class extends Sy{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Ly=class{constructor(e){this.persistence=e,this.Nr=new Nr(n=>Sv(n),Rv),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ka,this.targetCount=0,this.kr=Wa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),N.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Wa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Kn(n),N.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),N.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Br.containsKey(n))}};var Vy=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new bb(0),this.Kr=!1,this.Kr=!0,this.$r=new Py,this.referenceDelegate=e(this),this.Ur=new Ly(this),this.indexManager=new Ty,this.remoteDocumentCache=function(i){return new ky(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new by(n),this.Gr=new xy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ny,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Oy(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new Uy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return N.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Uy=class extends Ym{constructor(e){super(),this.currentSequenceNumber=e}},jy=class t{constructor(e){this.persistence=e,this.Jr=new Ka,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),N.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Xr,r=>{let i=B.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return N.or([()=>N.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var By=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=he(),i=he();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var $y=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Hy=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return D0()?8:eU(Ke())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new $y;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ka()<=de.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),N.resolve()):(ka()<=de.DEBUG&&L("QueryEngine","Query:",Lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ka()<=de.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):N.resolve())}Yi(e,n){if(eb(n))return N.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dy(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,dy(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return eb(n)||i.isEqual(X.min())?N.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?N.resolve(null):(ka()<=de.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lo(n)),this.rs(e,s,n,YV(i,-1)).next(a=>a))})}ts(e,n){let r=new ut(Lb(e));return n.forEach((i,o)=>{Sd(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return ka()<=de.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Si.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var qy=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Oe(ve),this._s=new Nr(o=>Sv(o),Rv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new My(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function qU(t,e,n,r){return new qy(t,e,n,r)}function nT(t,e){return I(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=he();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function zU(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),w=N.resolve();return y.forEach(S=>{w=w.next(()=>h.getEntry(u,S)).next(M=>{let x=l.docVersions.get(S);Te(x!==null),M.version.compareTo(x)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rT(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function GU(t,e){let n=Y(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let w=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(lt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(p,w),function(M,x,O){return M.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(y,w,h)&&a.push(n.Ur.updateTargetData(o,w))});let u=Qn(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(WU(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(X.min())){let h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return N.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function WU(t,e,n){let r=he(),i=he();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Qn();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function KU(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QU(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Ga(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function zy(t,e,n){return I(this,null,function*(){let r=Y(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!tc(s))throw s;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function db(t,e,n){let r=Y(t),i=X.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Y(u),y=p._s.get(h);return y!==void 0?N.resolve(p.os.get(y)):p.Ur.getTargetData(l,h)}(r,s,Dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:he())).next(a=>(YU(r,dU(e),a),{documents:a,Ts:o})))}function YU(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}var ld=class{constructor(){this.activeTargetIds=yU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Gy=class{constructor(){this.so=new ld,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ld,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Wy=class{_o(e){}shutdown(){}};var dd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wl=null;function Um(){return Wl===null?Wl=function(){return 268435456+Math.round(2147483648*Math.random())}():Wl++,"0x"+Wl.toString(16)}var JU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ky=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ct="WebChannelConnection",Qy=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=Um(),u=this.xo(n,r.toUriEncodedString());L("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(h=>(L("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ho("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=JU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=Um();return new Promise((s,a)=>{let u=new Nm;u.setWithCredentials(!0),u.listenOnce(Om.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Oa.NO_ERROR:let h=u.getResponseJson();L(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Oa.TIMEOUT:L(ct,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case Oa.HTTP_ERROR:let p=u.getStatus();if(L(ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let S=function(x){let O=x.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(O)>=0?O:R.UNKNOWN}(w.status);a(new k(S,w.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{L(ct,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);L(ct,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Um(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Lm(),a=Fm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Pm({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");L(ct,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,w=!1,S=new Ky({Io:x=>{w?L(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(y||(L(ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),L(ct,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},To:()=>p.close()}),M=(x,O,K)=>{x.listen(O,$=>{try{K($)}catch(fe){setTimeout(()=>{throw fe},0)}})};return M(p,Fo.EventType.OPEN,()=>{w||(L(ct,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),M(p,Fo.EventType.CLOSE,()=>{w||(w=!0,L(ct,`RPC '${e}' stream ${i} transport closed`),S.So())}),M(p,Fo.EventType.ERROR,x=>{w||(w=!0,Ho(ct,`RPC '${e}' stream ${i} transport errored:`,x),S.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),M(p,Fo.EventType.MESSAGE,x=>{var O;if(!w){let K=x.data[0];Te(!!K);let $=K,fe=$.error||((O=$[0])===null||O===void 0?void 0:O.error);if(fe){L(ct,`RPC '${e}' stream ${i} received error:`,fe);let xe=fe.status,ee=function(v){let E=Ve[v];if(E!==void 0)return Kb(E)}(xe),D=fe.message;ee===void 0&&(ee=R.INTERNAL,D="Unknown error status: "+xe+" with message "+fe.message),w=!0,S.So(new k(ee,D)),p.close()}else L(ct,`RPC '${e}' stream ${i} received:`,K),S.bo(K)}}),M(a,km.STAT_EVENT,x=>{x.stat===zl.PROXY?L(ct,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===zl.NOPROXY&&L(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function jm(){return typeof document<"u"?document:null}function Rd(t){return new Iy(t,!0)}var hd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var fd=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return I(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return I(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return I(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>I(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Yy=class extends fd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=NU(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Cn(s.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Cy(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=uy(u)?{documents:kU(o,u)}:{query:FU(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Qb(o,s.resumeToken);let l=wy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=cd(o,s.snapshotVersion.toTimestamp());let l=wy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=VU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Cy(this.serializer),n.removeTarget=e,this.a_(n)}},Jy=class extends fd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=OU(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Cy(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>PU(this.serializer,r))};this.a_(n)}};var Zy=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Ey(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Ey(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Xy=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wn(n),this.D_=!1):L("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var ev=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>I(this,null,function*(){Oi(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(u){return I(this,null,function*(){let l=Y(u);l.L_.add(4),yield nc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Md(l)})}(this))}))}),this.q_=new Xy(r,i)}};function Md(t){return I(this,null,function*(){if(Oi(t))for(let e of t.B_)yield e(!0)})}function nc(t){return I(this,null,function*(){for(let e of t.B_)yield e(!1)})}function iT(t,e){let n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fv(n)?kv(n):os(n).r_()&&Ov(n,e))}function Pv(t,e){let n=Y(t),r=os(n);n.N_.delete(e),r.r_()&&oT(n,e),n.N_.size===0&&(r.r_()?r.o_():Oi(n)&&n.q_.set("Unknown"))}function Ov(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}os(t).A_(e)}function oT(t,e){t.Q_.xe(e),os(t).R_(e)}function kv(t){t.Q_=new _y({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),os(t).start(),t.q_.v_()}function Fv(t){return Oi(t)&&!os(t).n_()&&t.N_.size>0}function Oi(t){return Y(t).L_.size===0}function sT(t){t.Q_=void 0}function ZU(t){return I(this,null,function*(){t.q_.set("Online")})}function XU(t){return I(this,null,function*(){t.N_.forEach((e,n)=>{Ov(t,e)})})}function ej(t,e){return I(this,null,function*(){sT(t),Fv(t)?(t.q_.M_(e),kv(t)):t.q_.set("Unknown")})}function tj(t,e,n){return I(this,null,function*(){if(t.q_.set("Online"),e instanceof sd&&e.state===2&&e.cause)try{yield function(i,o){return I(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pd(t,r)}else if(e instanceof Bo?t.Q_.Ke(e):e instanceof od?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{let r=yield rT(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),oT(o,u);let p=new Ga(h.target,u,l,h.sequenceNumber);Ov(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){L("RemoteStore","Failed to raise snapshot:",r),yield pd(t,r)}})}function pd(t,e,n){return I(this,null,function*(){if(!tc(e))throw e;t.L_.add(1),yield nc(t),t.q_.set("Offline"),n||(n=()=>rT(t.localStore)),t.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Md(t)}))})}function aT(t,e){return e().catch(n=>pd(t,n,e))}function xd(t){return I(this,null,function*(){let e=Y(t),n=Pr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nj(e);)try{let i=yield KU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,rj(e,i)}catch(i){yield pd(e,i)}cT(e)&&uT(e)})}function nj(t){return Oi(t)&&t.O_.length<10}function rj(t,e){t.O_.push(e);let n=Pr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cT(t){return Oi(t)&&!Pr(t).n_()&&t.O_.length>0}function uT(t){Pr(t).start()}function ij(t){return I(this,null,function*(){Pr(t).p_()})}function oj(t){return I(this,null,function*(){let e=Pr(t);for(let n of t.O_)e.m_(n.mutations)})}function sj(t,e,n){return I(this,null,function*(){let r=t.O_.shift(),i=gy.from(r,e,n);yield aT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield xd(t)})}function aj(t,e){return I(this,null,function*(){e&&Pr(t).V_&&(yield function(r,i){return I(this,null,function*(){if(function(s){return CU(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Pr(r).s_(),yield aT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield xd(r)}})}(t,e)),cT(t)&&uT(t)})}function hb(t,e){return I(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let r=Oi(n);n.L_.add(3),yield nc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Md(n)})}function cj(t,e){return I(this,null,function*(){let n=Y(t);e?(n.L_.delete(2),yield Md(n)):e||(n.L_.add(2),yield nc(n),n.q_.set("Unknown"))})}function os(t){return t.K_||(t.K_=function(n,r,i){let o=Y(n);return o.w_(),new Yy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:ZU.bind(null,t),Ro:XU.bind(null,t),mo:ej.bind(null,t),d_:tj.bind(null,t)}),t.B_.push(e=>I(this,null,function*(){e?(t.K_.s_(),Fv(t)?kv(t):t.q_.set("Unknown")):(yield t.K_.stop(),sT(t))}))),t.K_}function Pr(t){return t.U_||(t.U_=function(n,r,i){let o=Y(n);return o.w_(),new Jy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ij.bind(null,t),mo:aj.bind(null,t),f_:oj.bind(null,t),g_:sj.bind(null,t)}),t.B_.push(e=>I(this,null,function*(){e?(t.U_.s_(),yield xd(t)):(yield t.U_.stop(),t.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var tv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Lv(t,e){if(Wn("AsyncQueue",`${e}: ${t}`),tc(t))return new k(R.UNAVAILABLE,`${e}: ${t}`);throw t}var gd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Fa(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var md=class{constructor(){this.W_=new Oe(B.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Xo=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,gd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var nv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},rv=class{constructor(){this.queries=fb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Y(n),o=i.queries;i.queries=fb(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function fb(){return new Nr(t=>Fb(t),Ad)}function uj(t,e){return I(this,null,function*(){let n=Y(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new nv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Lv(s,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Vv(n)})}function lj(t,e){return I(this,null,function*(){let n=Y(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function dj(t,e){let n=Y(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Vv(n)}function hj(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function Vv(t){t.Y_.forEach(e=>{e.next()})}var iv,pb;(pb=iv||(iv={})).ea="default",pb.Cache="cache";var ov=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Xo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==iv.Cache}};var yd=class{constructor(e){this.key=e}},vd=class{constructor(e){this.key=e}},sv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=Lb(e),this.Ra=new gd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new md,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),w=Sd(this.query,p)?p:null,S=!!y&&this.mutatedKeys.has(y.key),M=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),x=!1;y&&w?y.data.isEqual(w.data)?S!==M&&(r.track({type:3,doc:w}),x=!0):this.ga(y,w)||(r.track({type:2,doc:w}),x=!0,(u&&this.Aa(w,u)>0||l&&this.Aa(w,l)<0)&&(a=!0)):!y&&w?(r.track({type:0,doc:w}),x=!0):y&&!w&&(r.track({type:1,doc:y}),x=!0,(u||l)&&(a=!0)),x&&(w?(s=s.add(w),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(w,S){let M=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return M(w)-M(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Xo(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new md,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new vd(r))}),this.da.forEach(r=>{e.has(r)||n.push(new yd(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},av=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},cv=class{constructor(e){this.key=e,this.va=!1}},uv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Nr(a=>Fb(a),Ad),this.Ma=new Map,this.xa=new Set,this.Oa=new Oe(B.comparator),this.Na=new Map,this.La=new Ka,this.Ba={},this.ka=new Map,this.qa=Wa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function fj(t,e,n=!0){return I(this,null,function*(){let r=gT(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield lT(r,e,n,!0),i})}function pj(t,e){return I(this,null,function*(){let n=gT(t);yield lT(n,e,!0,!1)})}function lT(t,e,n,r){return I(this,null,function*(){let i=yield QU(t.localStore,Dn(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield gj(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&iT(t.remoteStore,i),a})}function gj(t,e,n,r,i){return I(this,null,function*(){t.Ka=(p,y,w)=>function(M,x,O,K){return I(this,null,function*(){let $=x.view.ma(O);$.ns&&($=yield db(M.localStore,x.query,!1).then(({documents:D})=>x.view.ma(D,$)));let fe=K&&K.targetChanges.get(x.targetId),xe=K&&K.targetMismatches.get(x.targetId)!=null,ee=x.view.applyChanges($,M.isPrimaryClient,fe,xe);return mb(M,x.targetId,ee.wa),ee.snapshot})}(t,p,y,w);let o=yield db(t.localStore,e,!0),s=new sv(e,o.Ts),a=s.ma(o.documents),u=za.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);mb(t,n,l.wa);let h=new av(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function mj(t,e,n){return I(this,null,function*(){let r=Y(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Ad(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pv(r.remoteStore,i.targetId),lv(r,i.targetId)}).catch(ec))):(lv(r,i.targetId),yield zy(r.localStore,i.targetId,!0))})}function yj(t,e){return I(this,null,function*(){let n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pv(n.remoteStore,r.targetId))})}function vj(t,e,n){return I(this,null,function*(){let r=bj(t);try{let i=yield function(s,a){let u=Y(s),l=tt.now(),h=a.reduce((w,S)=>w.add(S.key),he()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=Qn(),M=he();return u.cs.getEntries(w,h).next(x=>{S=x,S.forEach((O,K)=>{K.isValidDocument()||(M=M.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(x=>{p=x;let O=[];for(let K of a){let $=DU(K,p.get(K.key).overlayedDocument);$!=null&&O.push(new Yn(K.key,$,Rb($.value.mapValue),Ti.exists(!0)))}return u.mutationQueue.addMutationBatch(w,l,O,a)}).next(x=>{y=x;let O=x.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(w,x.batchId,O)})}).then(()=>({batchId:y.batchId,changes:Ub(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Oe(ve)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield rc(r,i.changes),yield xd(r.remoteStore)}catch(i){let o=Lv(i,"Failed to persist write");n.reject(o)}})}function dT(t,e){return I(this,null,function*(){let n=Y(t);try{let r=yield GU(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Te(s.va):i.removedDocuments.size>0&&(Te(s.va),s.va=!1))}),yield rc(n,r,e)}catch(r){yield ec(r)}})}function gb(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Y(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.j_)y.Z_(a)&&(l=!0)}),l&&Vv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _j(t,e,n){return I(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Oe(B.comparator);s=s.insert(o,nn.newNoDocument(o,X.min()));let a=he().add(o),u=new id(X.min(),new Map,new Oe(ve),s,a);yield dT(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Uv(r)}else yield zy(r.localStore,e,!1).then(()=>lv(r,e,n)).catch(ec)})}function Ij(t,e){return I(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield zU(n.localStore,e);fT(n,r,null),hT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield rc(n,i)}catch(i){yield ec(i)}})}function wj(t,e,n){return I(this,null,function*(){let r=Y(t);try{let i=yield function(s,a){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Te(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);fT(r,e,n),hT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield rc(r,i)}catch(i){yield ec(i)}})}function hT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function fT(t,e,n){let r=Y(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function lv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||pT(t,r)})}function pT(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Pv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Uv(t))}function mb(t,e,n){for(let r of n)r instanceof yd?(t.La.addReference(r.key,e),Ej(t,r)):r instanceof vd?(L("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||pT(t,r.key)):z()}function Ej(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(L("SyncEngine","New document in limbo: "+n),t.xa.add(r),Uv(t))}function Uv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new B(Me.fromString(e)),r=t.qa.next();t.Na.set(r,new cv(n)),t.Oa=t.Oa.insert(n,r),iT(t.remoteStore,new Ga(Dn(Mv(n.path)),r,"TargetPurposeLimboResolution",bb.oe))}}function rc(t,e,n){return I(this,null,function*(){let r=Y(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=By.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return I(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(l,y=>N.forEach(y.$i,w=>h.persistence.referenceDelegate.addReference(p,y.targetId,w)).next(()=>N.forEach(y.Ui,w=>h.persistence.referenceDelegate.removeReference(p,y.targetId,w)))))}catch(p){if(!tc(p))throw p;L("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let w=h.os.get(y),S=w.snapshotVersion,M=w.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(y,M)}}})}(r.localStore,o))})}function Dj(t,e){return I(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=yield nT(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rc(n,r.hs)}})}function Cj(t,e){let n=Y(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function gT(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_j.bind(null,e),e.Ca.d_=dj.bind(null,e.eventManager),e.Ca.$a=hj.bind(null,e.eventManager),e}function bj(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ij.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wj.bind(null,e),e}var _d=class{constructor(){this.synchronizeTabs=!1}initialize(e){return I(this,null,function*(){this.serializer=Rd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return qU(this.persistence,new Hy,e.initialUser,this.serializer)}createPersistence(e){return new Vy(jy.Zr,this.serializer)}createSharedClientState(e){return new Gy}terminate(){return I(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var dv=class{initialize(e,n){return I(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dj.bind(null,this.syncEngine),yield cj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new rv}()}createDatastore(e){let n=Rd(e.databaseInfo.databaseId),r=function(o){return new Qy(o)}(e.databaseInfo);return function(o,s,a,u){return new Zy(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new ev(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gb(this.syncEngine,n,0),function(){return dd.D()?new dd:new Wy}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,h){let p=new uv(i,o,s,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return I(this,null,function*(){var e,n;yield function(i){return I(this,null,function*(){let o=Y(i);L("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield nc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var hv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var fv=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=Jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>I(this,null,function*(){L("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(L("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Lv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Bm(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield nT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function yb(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Aj(t);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>hb(e.remoteStore,i)),t._onlineComponents=e})}function Tj(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Aj(t){return I(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Bm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Tj(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),yield Bm(t,new _d)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield Bm(t,new _d);return t._offlineComponents})}function mT(t){return I(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield yb(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield yb(t,new dv))),t._onlineComponents})}function Sj(t){return mT(t).then(e=>e.syncEngine)}function vb(t){return I(this,null,function*(){let e=yield mT(t),n=e.eventManager;return n.onListen=fj.bind(null,e.syncEngine),n.onUnlisten=mj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yj.bind(null,e.syncEngine),n})}function yT(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var _b=new Map;function vT(t,e,n){if(!n)throw new k(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rj(t,e,n,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ib(t){if(!B.isDocumentKey(t))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wb(t){if(B.isDocumentKey(t))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function Ba(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Nd(t);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Id=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},es=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Id({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Id(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $m;switch(r.type){case"firstParty":return new Gm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=_b.get(n);r&&(L("ComponentProvider","Removing Datastore"),_b.delete(n),r.terminate())}(this),Promise.resolve()}};function _T(t,e,n,r={}){var i;let o=(t=Ba(t,es))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Qe.MOCK_USER;else{a=v0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Qe(l)}t._authCredentials=new Hm(new Yl(a,u))}}var ts=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ot=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Mr=class t extends ts{constructor(e,n,r){super(e,n,Mv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function IT(t,e,...n){if(t=et(t),vT("collection","path",e),t instanceof es){let r=Me.fromString(e,...n);return wb(r),new Mr(t,null,r)}{if(!(t instanceof Ot||t instanceof Mr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return wb(r),new Mr(t.firestore,null,r)}}function wT(t,e,...n){if(t=et(t),arguments.length===1&&(e=Jl.newId()),vT("doc","path",e),t instanceof es){let r=Me.fromString(e,...n);return Ib(r),new Ot(t,null,new B(r))}{if(!(t instanceof Ot||t instanceof Mr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return Ib(r),new Ot(t.firestore,t instanceof Mr?t.converter:null,new B(r))}}var pv=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new hd(this,"async_queue_retry"),this.Eu=()=>{let n=jm();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=jm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Gn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return I(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!tc(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Wn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=tv.createAndSchedule(this,e,n,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&z()}verifyOperationInProgress(){}mu(){return I(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function Eb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var ns=class extends es{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new pv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||CT(this),this._firestoreClient.terminate()}};function ET(t,e){let n=typeof t=="object"?t:Mo(),r=typeof t=="string"?t:e||"(default)",i=Da(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=y0("firestore");o&&_T(i,...o)}return i}function DT(t){return t._firestoreClient||CT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function CT(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new Jm(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,yT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new fv(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Qa=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(lt.fromBase64String(e))}catch(n){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ya=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wd=class{constructor(e){this._methodName=e}};var Ja=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}};var Za=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var Mj=/^__.*__$/,gv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pi(e,this.data,n,this.fieldTransforms)}};function bT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var mv=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Ed(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(bT(this.wu)&&Mj.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},yv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rd(e)}Nu(e,n,r,i=!1){return new mv({wu:e,methodName:n,Ou:r,path:Pt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function TT(t){let e=t._freezeSettings(),n=Rd(t._databaseId);return new yv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xj(t,e,n,r,i,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,i);RT("Data must be an object, but it was:",s,r);let a=AT(r,s),u,l;if(o.merge)u=new wn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=Pj(e,p,n);if(!s.contains(y))throw new k(R.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);kj(h,y)||h.push(y)}u=new wn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new gv(new tn(a),u,l)}function Nj(t,e,n,r=!1){return jv(n,t.Nu(r?4:3,e))}function jv(t,e){if(ST(t=et(t)))return RT("Unsupported field value:",e,t),AT(t,e);if(t instanceof wd)return function(r,i){if(!bT(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=jv(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=tt.fromDate(r);return{timestampValue:cd(i.serializer,o)}}if(r instanceof tt){let o=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cd(i.serializer,o)}}if(r instanceof Ja)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qa)return{bytesValue:Qb(i.serializer,r._byteString)};if(r instanceof Ot){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Za)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return xv(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Nd(r)}`)}(t,e)}function AT(t,e){let n={};return Tb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,i)=>{let o=jv(i,e.bu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ST(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Ja||t instanceof Qa||t instanceof Ot||t instanceof wd||t instanceof Za)}function RT(t,e,n){if(!ST(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Nd(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Pj(t,e,n){if((e=et(e))instanceof Ya)return e._internalPath;if(typeof e=="string")return MT(t,e);throw Ed("Field path arguments must be of type string or ",t,!1,void 0,n)}var Oj=new RegExp("[~\\*/\\[\\]]");function MT(t,e,n){if(e.search(Oj)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ya(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ed(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+t+u)}function kj(t,e){return t.some(n=>n.isEqual(e))}var Dd=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new vv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(xT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},vv=class extends Dd{data(){return super.data()}};function xT(t,e){return typeof e=="string"?MT(t,e):e instanceof Ya?e._internalPath:e._delegate._internalPath}function Fj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xa=class{},_v=class extends Xa{};function NT(t,e,...n){let r=[];e instanceof Xa&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof wv).length,a=o.filter(u=>u instanceof Iv).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Iv=class t extends _v{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return PT(e._query,n),new ts(e.firestore,e.converter,ly(e._query,n))}_parse(e){let n=TT(e.firestore);return function(o,s,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Cb(p,h);let w=[];for(let S of p)w.push(Db(u,o,S));y={arrayValue:{values:w}}}else y=Db(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Cb(p,h),y=Nj(a,s,p,h==="in"||h==="not-in");return je.create(l,h,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var wv=class t extends Xa{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)PT(s,u),s=ly(s,u)}(e._query,n),new ts(e.firestore,e.converter,ly(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Db(t,e,n){if(typeof(n=et(n))=="string"){if(n==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kb(e)&&n.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Me.fromString(n));if(!B.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return KC(t,new B(r))}if(n instanceof Ot)return KC(t,n._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nd(n)}.`)}function Cb(t,e){if(!Array.isArray(t)||t.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PT(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ev=class{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return is(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Re(s.doubleValue));return new Za(o)}convertGeoPoint(e){return new Ja(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Tv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){let n=Kn(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);Te(tT(r));let i=new td(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||Wn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Lj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var bi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cd=class extends Dd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new $o(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(xT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},$o=class extends Cd{data(e={}){return super.data(e)}},Dv=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $o(this._firestore,this._userDataWriter,r.key,r,new bi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new $o(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new $o(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Vj(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Vj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}var bd=class extends Ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}};function OT(t,e){let n=Ba(t.firestore,ns),r=wT(t),i=Lj(t.converter,e);return Uj(n,[xj(TT(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ti.exists(!1))]).then(()=>r)}function Bv(t,...e){var n,r,i;t=et(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Eb(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Eb(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Ot)l=Ba(t.firestore,ns),h=Mv(t._key.path),u={next:p=>{e[s]&&e[s](jj(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Ba(t,ts);l=Ba(p.firestore,ns),h=p._query;let y=new bd(l);u={next:w=>{e[s]&&e[s](new Dv(l,y,p,w))},error:e[s+1],complete:e[s+2]},Fj(t._query)}return function(y,w,S,M){let x=new hv(M),O=new ov(w,x,S);return y.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return uj(yield vb(y),O)})),()=>{x.za(),y.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return lj(yield vb(y),O)}))}}(DT(l),h,a,u)}function Uj(t,e){return function(r,i){let o=new Gn;return r.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return vj(yield Sj(r),i,o)})),o.promise}(DT(t),e)}function jj(t,e,n){let r=n.docs.get(e._key),i=new bd(t);return new Cd(t,i,e._key,r,new bi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){rs=i})(Cr),Dr(new qt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ns(new qm(r.getProvider("auth-internal")),new Km(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new td(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),He(qC,"4.7.1",e),He(qC,"4.7.1","esm2017")})();var Pd=function(){return Pd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Pd.apply(this,arguments)};var Hj={includeMetadataChanges:!1};function kT(t,e){return e===void 0&&(e=Hj),new ce(function(n){var r=Bv(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function FT(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Pd(Pd({},r),(n={},n[e.idField]=t.id,n))}function LT(t){return kT(t,{includeMetadataChanges:!0}).pipe(ie(function(e){return e.docs}))}function VT(t,e){return e===void 0&&(e={}),LT(t).pipe(ie(function(n){return n.map(function(r){return FT(r,e)})}))}var on=class{constructor(e){return e}},UT="firestore",$v=class{constructor(){return Ca(UT)}};var Hv=new W("angularfire2.firestore-instances");function qj(t,e){let n=El(UT,t,e);return n&&new on(n)}function zj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new on(r)}}var Gj={provide:$v,deps:[[new _t,Hv]]},Wj={provide:on,useFactory:qj,deps:[[new _t,Hv],Bn]};function jT(t,...e){return He("angularfire",yi.full,"fst"),fn([Wj,Gj,{provide:Hv,useFactory:zj(t),multi:!0,deps:[Ee,Bt,Po,vi,[new _t,Pa],[new _t,No],...e]}])}var BT=xt(VT,!0);var Od=xt(OT,!0);var ic=xt(IT,!0);var $T=xt(ET,!0);var HT=xt(NT,!0);var JT=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(re(ri),re(hr))},e.\u0275dir=Jt({type:e});let t=e;return t})(),Kj=(()=>{let e=class e extends JT{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ws(e)))(o||e)}})(),e.\u0275dir=Jt({type:e,features:[go]});let t=e;return t})(),ZT=new W("");var Qj={provide:ZT,useExisting:Hs(()=>as),multi:!0};function Yj(){let t=Vn()?Vn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Jj=new W(""),as=(()=>{let e=class e extends JT{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Yj())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(re(ri),re(hr),re(Jj,8))},e.\u0275dir=Jt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Se("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[wp([Qj]),go]});let t=e;return t})();var Zj=new W(""),Xj=new W("");function XT(t){return t!=null}function eA(t){return si(t)?Pe(t):t}function tA(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function nA(t,e){return e.map(n=>n(t))}function e2(t){return!t.validate}function rA(t){return t.map(e=>e2(e)?e:n=>e.validate(n))}function t2(t){if(!t)return null;let e=t.filter(XT);return e.length==0?null:function(n){return tA(nA(n,e))}}function iA(t){return t!=null?t2(rA(t)):null}function n2(t){if(!t)return null;let e=t.filter(XT);return e.length==0?null:function(n){let r=nA(n,e).map(eA);return xh(r).pipe(ie(tA))}}function oA(t){return t!=null?n2(rA(t)):null}function qT(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function r2(t){return t._rawValidators}function i2(t){return t._rawAsyncValidators}function zv(t){return t?Array.isArray(t)?t:[t]:[]}function Fd(t,e){return Array.isArray(t)?t.includes(e):t===e}function zT(t,e){let n=zv(e);return zv(t).forEach(i=>{Fd(n,i)||n.push(i)}),n}function GT(t,e){return zv(e).filter(n=>!Fd(t,n))}var Ld=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Gv=class extends Ld{get formDirective(){return null}get path(){return null}},ac=class extends Ld{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Wv=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},o2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},v6=we(F({},o2),{"[class.ng-submitted]":"isSubmitted"}),Vd=(()=>{let e=class e extends Wv{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(re(ac,2))},e.\u0275dir=Jt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&_p("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[go]});let t=e;return t})();var oc="VALID",kd="INVALID",ss="PENDING",sc="DISABLED";function s2(t){return(Ud(t)?t.validators:t)||null}function a2(t){return Array.isArray(t)?iA(t):t||null}function c2(t,e){return(Ud(e)?e.asyncValidators:t)||null}function u2(t){return Array.isArray(t)?oA(t):t||null}function Ud(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Kv=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===oc}get invalid(){return this.status===kd}get pending(){return this.status==ss}get disabled(){return this.status===sc}get enabled(){return this.status!==sc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(zT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(GT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(GT(e,this._rawAsyncValidators))}hasValidator(e){return Fd(this._rawValidators,e)}hasAsyncValidator(e){return Fd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ss,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=sc,this.errors=null,this._forEachChild(r=>{r.disable(we(F({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we(F({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=oc,this._forEachChild(r=>{r.enable(we(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(we(F({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oc||this.status===ss)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sc:oc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ss,this._hasOwnPendingAsyncValidator=!0;let n=eA(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?sc:this.errors?kd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ss)?ss:this._anyControlsHaveStatus(kd)?kd:oc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ud(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=a2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=u2(this._rawAsyncValidators)}};var sA=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Qv}),Qv="always";function l2(t,e){return[...e.path,t]}function d2(t,e,n=Qv){f2(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),p2(t,e),m2(t,e),g2(t,e),h2(t,e)}function WT(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function h2(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function f2(t,e){let n=r2(t);e.validator!==null?t.setValidators(qT(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=i2(t);e.asyncValidator!==null?t.setAsyncValidators(qT(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();WT(e._rawValidators,i),WT(e._rawAsyncValidators,i)}function p2(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&aA(t,e)})}function g2(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&aA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function aA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function m2(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function y2(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function v2(t){return Object.getPrototypeOf(t.constructor)===Kj}function _2(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===as?n=o:v2(o)?r=o:i=o}),i||r||n||null}function KT(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function QT(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var I2=class extends Kv{constructor(e=null,n,r){super(s2(n),c2(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ud(n)&&(n.nonNullable||n.initialValueIsDefault)&&(QT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){QT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var w2={provide:ac,useExisting:Hs(()=>cc)},YT=Promise.resolve(),cc=(()=>{let e=class e extends ac{constructor(r,i,o,s,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new I2,this._registered=!1,this.name="",this.update=new Ze,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=_2(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),y2(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){d2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){YT.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&ci(i);YT.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?l2(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(re(Gv,9),re(Zj,10),re(Xj,10),re(ZT,10),re(ai,8),re(sA,8))},e.\u0275dir=Jt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[gt.None,"disabled","isDisabled"],model:[gt.None,"ngModel","model"],options:[gt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[wp([w2]),go,ni]});let t=e;return t})();var E2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Xr({});let t=e;return t})();var jd=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:sA,useValue:r.callSetDisabledState??Qv}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Xr({imports:[E2]});let t=e;return t})();var uA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=qe({type:e,selectors:[["app-hangman"]],standalone:!0,features:[We],decls:2,vars:0,consts:[[1,"title"]],template:function(i,o){i&1&&(U(0,"h1",0),te(1,"\xA1\xA1\xA1\xA1 AHORCADO !!!!"),j())},styles:[".title[_ngcontent-%COMP%]{color:#fff;size:300px}"]});let t=e;return t})();var lA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=qe({type:e,selectors:[["app-questions"]],standalone:!0,features:[We],decls:2,vars:0,consts:[[1,"title"]],template:function(i,o){i&1&&(U(0,"h1",0),te(1,"\xA1\xA1\xA1\xA1 PREGUNTADOS !!!!"),j())},styles:[".title[_ngcontent-%COMP%]{color:#fff;size:300px}"]});let t=e;return t})();var dA=(()=>{let e=class e{constructor(){this.name="Daniel Rodriguez Rotelli",this.mail="daniel.rodriguez.rotelli@gmail.com",this.link="https://www.linkedin.com/in/danielrodr\xEDguezrotelli",this.title1="Profesor de Musica - EMPA",this.title2="Estudiante de Programaci\xF3n - UTN",this.Description1="Docente de M\xFAsica en escuelas secundarias. M\xFAsico sesionista. Arreglador musical.",this.Description2="Buscando y descubriendo nuevos rumbos. Compromiso y dedicaci\xF3n para aprender y adaptarme a nuevos desaf\xEDos."}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=qe({type:e,selectors:[["app-aboutme"]],standalone:!0,features:[We],decls:27,vars:8,consts:[[1,"container"],[1,"recuadroDatos"],[1,"datos"],["target","_blank",3,"href"],[1,"recuadroFoto"],[1,"foto"],["src","../../../assets/fotoCarnet.png","alt","foto"],[1,"recuadroJuego"],[1,"juego"]],template:function(i,o){i&1&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),te(4),j(),U(5,"p"),te(6),j(),U(7,"p")(8,"a",3),te(9),j()(),U(10,"p"),te(11),j(),U(12,"p"),te(13),j(),U(14,"p"),te(15),j(),U(16,"p"),te(17),j()()(),U(18,"div",4)(19,"div",5),ze(20,"img",6),j()(),U(21,"div",7)(22,"div",8)(23,"h1"),te(24,"JUEGO"),j(),U(25,"p"),te(26,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci optio laboriosam eum recusandae, ratione, perspiciatis error quia facere obcaecati at nostrum mollitia eaque quisquam impedit, quas saepe debitis! Facilis, temporibus?"),j()()()()),i&2&&(_e(4),Tt(o.name),_e(2),yr("- ",o.mail,""),_e(2),Ip("href",o.link,rp),_e(),Tt(o.link),_e(2),yr("- ",o.title1,""),_e(2),Tt(o.Description1),_e(2),yr("- ",o.title2,""),_e(2),Tt(o.Description2))},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:stretch;gap:20px;padding:10px;margin:150px;flex-wrap:wrap}.recuadroDatos[_ngcontent-%COMP%], .recuadroJuego[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;border:1px solid black;padding:20px;text-align:center;background-color:#f16868;border-radius:10px;box-sizing:border-box;min-width:250px;word-wrap:break-word}.recuadroFoto[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0;display:flex;border:1px solid black;padding:20px;text-align:center;background-color:#f16868;justify-content:center;align-items:center;border-radius:10px;box-sizing:border-box;min-width:200px}.recuadroDatos[_ngcontent-%COMP%], .recuadroJuego[_ngcontent-%COMP%], .recuadroFoto[_ngcontent-%COMP%]{width:80%;margin-bottom:20px}.foto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}h1[_ngcontent-%COMP%]{color:#251f1f;text-shadow:2px 2px 4px rgba(0,0,0,.5)}p[_ngcontent-%COMP%]{font-size:25px;color:#fff;width:90%;word-wrap:break-word}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.recuadroDatos[_ngcontent-%COMP%], .recuadroJuego[_ngcontent-%COMP%], .recuadroFoto[_ngcontent-%COMP%]{width:100%}}"]});let t=e;return t})();var hA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=qe({type:e,selectors:[["app-greaterorless"]],standalone:!0,features:[We],decls:2,vars:0,consts:[[1,"title"]],template:function(i,o){i&1&&(U(0,"h1",0),te(1,"\xA1\xA1\xA1\xA1MAYOR O MENOR!!!!"),j())},styles:[".title[_ngcontent-%COMP%]{color:#fff;size:300px}"]});let t=e;return t})();function D2(t,e){if(t&1){let n=Ln();U(0,"div",4)(1,"div",5),Se("click",function(){mt(n);let i=Ge();return yt(i.goToQuestions())}),ze(2,"img",6),j(),U(3,"div",5),Se("click",function(){mt(n);let i=Ge();return yt(i.goToGreater())}),ze(4,"img",7),j(),U(5,"div",5),Se("click",function(){mt(n);let i=Ge();return yt(i.goToHangman())}),ze(6,"img",8),j(),U(7,"div",5),Se("click",function(){mt(n);let i=Ge();return yt(i.goToPropio())}),ze(8,"img",9),j()()}}function C2(t,e){if(t&1){let n=Ln();U(0,"div",4)(1,"div",5),Se("click",function(){mt(n);let i=Ge();return yt(i.goToLogin())}),ze(2,"img",6),j(),U(3,"div",5),Se("click",function(){mt(n);let i=Ge();return yt(i.goToLogin())}),ze(4,"img",7),j(),U(5,"div",5),Se("click",function(){mt(n);let i=Ge();return yt(i.goToLogin())}),ze(6,"img",8),j(),U(7,"div",5),Se("click",function(){mt(n);let i=Ge();return yt(i.goToLogin())}),ze(8,"img",9),j()()}}var Yv=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.firestore=i,this.auth=o,this.title1="MULTI",this.title2="GAMES",this.flagError=!1,this.notification=""}logout(){$l(this.auth).then(()=>{this.flagError=!1,this.goToLogin()}).catch(r=>{switch(this.flagError=!0,console.log(r),r.code){case"auth/network-request-failed":this.notification="Error de red. Verifica tu conexi\xF3n a internet.";break;case"auth/internal-error":this.notification="Ocurri\xF3 un error interno. Intenta nuevamente m\xE1s tarde.";break;default:this.notification="Error desconocido: "+r.message;break}})}goToLogin(){this.router.navigate(["/login"])}goToQuestions(){this.router.navigate(["/questions"])}goToGreater(){this.router.navigate(["/greater"])}goToHangman(){this.router.navigate(["/hangman"])}goToPropio(){this.router.navigate(["/propio"])}};e.\u0275fac=function(i){return new(i||e)(re(Xt),re(on),re(Nt))},e.\u0275cmp=qe({type:e,selectors:[["app-home"]],standalone:!0,features:[We],decls:9,vars:3,consts:[[1,"container"],[1,"title"],[1,"texto-h1"],["src","../../../assets/logoTipo.png","alt","Logo de la aplicaci\xF3n",1,"logo"],[1,"image-container"],[1,"image",3,"click"],["src","../../../assets/questions.png","alt","Componente 1"],["src","../../../assets/grater.png","alt","Componente 2"],["src","../../../assets/hangman.png","alt","Componente 3"],["src","../../../assets/propio.png","alt","Componente 4"]],template:function(i,o){i&1&&(U(0,"div",0)(1,"div",1)(2,"h1",2),te(3),j(),ze(4,"img",3),U(5,"h1",2),te(6),j()(),Fn(7,D2,9,0,"div",4)(8,C2,9,0),j()),i&2&&(_e(3),Tt(o.title1),_e(3),Tt(o.title2),_e(),mr(7,o.auth.currentUser!=null&&o.auth.currentUser.email?7:8))},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:stretch;gap:20px;padding:10px;margin:50px;flex-wrap:wrap}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:50px;margin-top:5px}.texto-h1[_ngcontent-%COMP%]{font-size:100px;color:#e6dbdb;margin:0;text-shadow:1px 1px 2px black,-1px -1px 2px red}.logo[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;object-fit:cover;box-shadow:0 4px 8px #080808ea;border:2px solid #0e0d0d}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;width:90%;height:100%;margin:5px auto}.image[_ngcontent-%COMP%]{width:200px;height:360px;cursor:pointer;flex-basis:calc(50% - 20px);box-sizing:border-box;border-radius:15px;overflow:hidden;box-shadow:0 4px 8px #080808ea;border:5px solid #eed708}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:15px}"]});let t=e;return t})();function b2(t,e){if(t&1){let n=Ln();U(0,"div",10),Se("click",function(){mt(n);let i=Ge();return yt(i.clearError())}),U(1,"p"),te(2),j()()}if(t&2){let n=Ge();_e(2),Tt(n.notification)}}var fA=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.auth=i,this.firestore=o,this.mail="",this.pass="",this.notification="",this.loggedUser="",this.flagError=!1}register(){if((!this.mail||this.mail.trim()==="")&&(!this.pass||this.pass.trim()==="")){this.notification="DEBE COMPLETAR LOS CAMPOS",this.flagError=!0;return}if(!this.mail||this.mail.trim()===""){this.notification="DEBE INGRESAR UN E-MAIL",this.flagError=!0;return}if(!this.pass||this.pass.trim()===""){this.notification="DEBE INGRESAR UNA CONTRASE\xD1A",this.flagError=!0;return}UC(this.auth,this.mail,this.pass).then(r=>{r.user.email!==null&&(this.loggedUser=r.user.email),this.flagError=!1,this.PutLogins(this.mail),this.goToHome()}).catch(r=>{switch(this.flagError=!0,console.log(r),r.code){case"auth/invalid-email":this.notification="E-MAIL INV\xC1LIDO";break;case"auth/missing-password":this.notification="DEBE INGRESAR CONTRASE\xD1A";break;case"auth/email-already-in-use":this.notification="E-MAIL YA EXISTE";break;case"auth/operation-not-allowed":this.notification="REGISTRO DESHABILITADO";break;case"auth/weak-password":this.notification="CONTRASE\xD1A MUY D\xC9BIL";break;case"auth/network-request-failed":this.notification="ERROR DE CONEXI\xD3N";break;case"auth/too-many-requests":this.notification="DEMASIADOS INTENTOS, INT\xC9NTALO M\xC1S TARDE";break;case"auth/internal-error":this.notification="ERROR INTERNO";break;default:this.notification=r.code;break}})}goToLogin(){this.router.navigate(["/login"])}goToHome(){this.router.navigate(["/home"])}showNotification(r){this.notification=r;let i=document.querySelector(".notification");i.style.visibility="visible"}hideNotification(){this.notification="";let r=document.querySelector(".notification");r.style.visibility="hidden"}clearError(){this.notification=""}PutLogins(r){let i=ic(this.firestore,"logins");Od(i,{user:r,fecha:new Date})}};e.\u0275fac=function(i){return new(i||e)(re(Xt),re(Nt),re(on))},e.\u0275cmp=qe({type:e,selectors:[["app-register"]],standalone:!0,features:[We],decls:17,vars:3,consts:[[1,"container"],[1,"box-register"],[1,"title"],[1,"input-group"],["for","mail"],["id","mail",1,"input-text",3,"ngModelChange","ngModel"],["for","clave"],["id","clave",1,"input-text",3,"ngModelChange","ngModel"],[1,"button-registrer",3,"click"],[1,"notification"],[1,"notification",3,"click"]],template:function(i,o){i&1&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),te(4,"Registrate"),j()(),U(5,"div",3)(6,"label",4),te(7,"E-mail:"),j(),U(8,"input",5),oi("ngModelChange",function(a){return yo(o.mail,a)||(o.mail=a),a}),j()(),U(9,"div",3)(10,"label",6),te(11,"Password:"),j(),U(12,"input",7),oi("ngModelChange",function(a){return yo(o.pass,a)||(o.pass=a),a}),j()(),U(13,"div")(14,"button",8),Se("click",function(){return o.register()}),te(15,"Registrar"),j()(),Fn(16,b2,3,1,"div",9),j()()),i&2&&(_e(8),ii("ngModel",o.mail),_e(4),ii("ngModel",o.pass),_e(4),mr(16,o.flagError?16:-1))},dependencies:[jd,as,Vd,cc],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;padding:10px;margin-top:150px}.container[_ngcontent-%COMP%]   .box-register[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;background-image:url("./media/espacio-VIM4MKAU.png");padding:15px;border:4px groove #755858;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:800px;width:30%;margin:50px auto;font-size:20px}.container[_ngcontent-%COMP%]   .box-register[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;width:90%}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100px;margin-right:10px;font-weight:700;font-size:25px;color:azure;text-shadow:2px 2px 10px rgba(0,0,0,.5)}.input-text[_ngcontent-%COMP%]{flex:1;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;width:90%}.container[_ngcontent-%COMP%]   .box-register[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fbff00;font-size:30px;font-weight:700;text-shadow:5px 5px 10px rgba(0,0,0,.5)}.delete[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.button-link[_ngcontent-%COMP%]{width:100px;height:30px;background-color:red;color:#faebd7;font-size:large;margin-right:10px}.button-registrer[_ngcontent-%COMP%]{background-color:green;color:#faebd7;width:100px;height:30px;font-size:large}.notification[_ngcontent-%COMP%]{font-size:1.5em;color:#fff;font-family:Arial,sans-serif;font-weight:700;background-color:red;border:2px solid #000000;border-radius:4px;box-sizing:border-box}']});let t=e;return t})();var T2=()=>["/register"];function A2(t,e){if(t&1){let n=Ln();U(0,"div",13),Se("click",function(){mt(n);let i=Ge();return yt(i.clearError())}),U(1,"p"),te(2),j()()}if(t&2){let n=Ge();_e(2),Tt(n.notification)}}var pA=(()=>{let e=class e{constructor(r,i,o){this.router=r,this.firestore=i,this.auth=o,this.mail="",this.password="",this.notification="",this.usuarios=[],this.loginsCollection=[],this.countLogins=0,this.loggedUser="",this.flagError=!1,this.usuarioDeLogin="",this.enviarDato=new Ze}login(){if((!this.mail||this.mail.trim()==="")&&(!this.password||this.password.trim()==="")){this.notification="DEBE COMPLETAR LOS CAMPOS",this.flagError=!0;return}if(!this.mail||this.mail.trim()===""){this.notification="DEBE INGRESAR UN E-MAIL",this.flagError=!0;return}if(!this.password||this.password.trim()===""){this.notification="DEBE INGRESAR UNA CONTRASE\xD1A",this.flagError=!0;return}BC(this.auth,this.mail,this.password).then(r=>{r.user.email!==null&&(this.loggedUser=r.user.email),this.flagError=!1,this.PutLogins(this.mail),this.usuarioDeLogin=this.auth.currentUser?.email,this.goToHome()}).catch(r=>{switch(this.flagError=!0,console.log(r),r.code){case"auth/invalid-credential":this.notification="DATOS INV\xC1LIDOS";break;case"auth/invalid-email":this.notification="E-MAIL INV\xC1LIDO";break;case"auth/missing-password":this.notification="DEBE INGRESAR CONTRASE\xD1A";break;case"auth/email-already-in-use":this.notification="E-MAIL YA EXISTE";break;case"auth/operation-not-allowed":this.notification="REGISTRO DESHABILITADO";break;case"auth/weak-password":this.notification="CONTRASE\xD1A MUY D\xC9BIL";break;case"auth/network-request-failed":this.notification="ERROR DE CONEXI\xD3N";break;case"auth/too-many-requests":this.notification="DEMASIADOS INTENTOS, INT\xC9NTALO M\xC1S TARDE";break;case"auth/internal-error":this.notification="ERROR INTERNO";break;default:this.notification=r.code;break}})}sendUsuarioLogueado(){this.enviarDato.emit(this.usuarioDeLogin)}showNotification(r){this.notification=r;let i=document.querySelector(".notification");i.style.visibility="visible"}hideNotification(){this.notification="";let r=document.querySelector(".notification");r.style.visibility="hidden"}goToHome(){this.router.navigate(["/home"])}clearError(){this.notification=""}PutLogins(r){let i=ic(this.firestore,"logins");Od(i,{user:r,fecha:new Date})}GetLogins(){let r=ic(this.firestore,"logins"),i=HT(r),o=BT(i);this.sub=o.subscribe(s=>{this.loginsCollection=s,this.countLogins=this.loginsCollection.length,console.log(s)})}fillUser1(){this.mail="danielrodriguez@gmail.com",this.password="Utn1234"}fillUser2(){this.mail="ayegarcia@gmail.com",this.password="4321Utn"}fillUser3(){this.mail="titoluna@gmail.com",this.password="12UTN34"}};e.\u0275fac=function(i){return new(i||e)(re(Xt),re(on),re(Nt))},e.\u0275cmp=qe({type:e,selectors:[["app-login"]],outputs:{enviarDato:"enviarDato"},standalone:!0,features:[We],decls:26,vars:5,consts:[[1,"container"],[1,"box-login"],[1,"title"],[1,"input-group"],["for","mail"],["id","mail",1,"input-text",3,"ngModelChange","ngModel"],["for","clave"],["type","password","id","clave",1,"input-text",3,"ngModelChange","ngModel"],[1,"button-link",3,"click"],[1,"button-registrer",3,"routerLink"],[1,"notification"],[1,"seccion-botones"],[1,"acceso-rapido",3,"click"],[1,"notification",3,"click"]],template:function(i,o){i&1&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),te(4,"Login"),j()(),U(5,"div",3)(6,"label",4),te(7,"E-mail:"),j(),U(8,"input",5),oi("ngModelChange",function(a){return yo(o.mail,a)||(o.mail=a),a}),j()(),U(9,"div",3)(10,"label",6),te(11,"Password:"),j(),U(12,"input",7),oi("ngModelChange",function(a){return yo(o.password,a)||(o.password=a),a}),j()(),U(13,"div")(14,"button",8),Se("click",function(){return o.login()}),te(15,"Login"),j(),U(16,"button",9),te(17,"Registrate!"),j()(),Fn(18,A2,3,1,"div",10),j(),U(19,"div",11)(20,"button",12),Se("click",function(){return o.fillUser1()}),te(21,"USUARIO1"),j(),U(22,"button",12),Se("click",function(){return o.fillUser2()}),te(23,"USUARIO2"),j(),U(24,"button",12),Se("click",function(){return o.fillUser3()}),te(25,"USUARIO3"),j()()()),i&2&&(_e(8),ii("ngModel",o.mail),_e(4),ii("ngModel",o.password),_e(4),gr("routerLink",vo(4,T2)),_e(2),mr(18,o.flagError?18:-1))},dependencies:[jd,as,Vd,cc,Zs,pl],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:150px}.container[_ngcontent-%COMP%]   .box-login[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;background-image:url("./media/espacio-VIM4MKAU.png");padding:15px;border:4px groove #755858;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:800px;width:30%;margin:50px auto;font-size:20px}.container[_ngcontent-%COMP%]   .box-login[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;width:90%}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100px;margin-right:10px;font-weight:700;font-size:25px;color:azure;text-shadow:2px 2px 10px rgba(0,0,0,.5)}.input-text[_ngcontent-%COMP%]{flex:1;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;width:90%}.container[_ngcontent-%COMP%]   .box-login[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fbff00;font-size:30px;font-weight:700;text-shadow:5px 5px 10px rgba(0,0,0,.5)}.delete[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.button-link[_ngcontent-%COMP%]{width:100px;height:30px;background-color:red;color:#faebd7;font-size:large;margin-right:10px}.button-registrer[_ngcontent-%COMP%]{background-color:green;color:#faebd7;width:100px;height:30px;font-size:large}.seccion-botones[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.acceso-rapido[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px;border:none;border-radius:5px;cursor:pointer;margin:15px;width:100px;height:30px}.acceso-rapido[_ngcontent-%COMP%]:hover{background-color:#45a049}.notification[_ngcontent-%COMP%]{font-size:1.5em;color:#fff;font-family:Arial,sans-serif;font-weight:700;background-color:red;border:2px solid #000000;border-radius:4px;box-sizing:border-box}']});let t=e;return t})();var gA=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:pA},{path:"home",component:Yv},{path:"quiensoy",component:dA},{path:"register",component:fA},{path:"questions",component:lA},{path:"hangman",component:uA},{path:"greater",component:hA},{path:"**",component:Yv}];var mA={projectId:"saladejuegos-aa45d",appId:"1:978479184156:web:c676b26988c0c0e99e62d9",storageBucket:"saladejuegos-aa45d.appspot.com",apiKey:"AIzaSyDwmX3xDIBxZ_hQad1AGQmUPKSL0dW65v4",authDomain:"saladejuegos-aa45d.firebaseapp.com",messagingSenderId:"978479184156",measurementId:"G-86Z081RJN1"};var yA={providers:[f0(gA),B0(()=>$0(mA)),VC(()=>jC()),jT(()=>$T())]};var S2=()=>["/home"],R2=()=>["/quiensoy"],M2=()=>["/login"];function x2(t,e){if(t&1&&(U(0,"li",6),te(1),j()),t&2){let n=Ge();_e(),yr("USUARIO: ",n.auth.currentUser==null?null:n.auth.currentUser.email,"")}}function N2(t,e){if(t&1){let n=Ln();U(0,"li")(1,"a",7),Se("click",function(){mt(n);let i=Ge();return yt(i.logout())}),te(2,"CERRAR SESI\xD3N"),j()()}}function P2(t,e){t&1&&(U(0,"li")(1,"a",3),te(2,"INICIAR SESI\xD3N"),j()()),t&2&&(_e(),gr("routerLink",vo(1,M2)))}var vA=(()=>{let e=class e{constructor(r,i){this.router=r,this.auth=i,this.title="saladejuegos",this.currentIcon="",this.flagError=!1,this.notification="",this.usuarioLogueado=""}ngOnInit(){this.router.events.subscribe(r=>{r instanceof gn&&this.updateIcon()})}recibirDato(r){this.usuarioLogueado=r}logout(){$l(this.auth).then(()=>{this.flagError=!1,this.goToHome()}).catch(r=>{switch(this.flagError=!0,console.log(r),r.code){case"auth/network-request-failed":this.notification="Error de red. Verifica tu conexi\xF3n a internet.";break;case"auth/internal-error":this.notification="Ocurri\xF3 un error interno. Intenta nuevamente m\xE1s tarde.";break;default:this.notification="Error desconocido: "+r.message;break}})}goToHome(){this.router.navigate(["/home"])}updateIcon(){switch(this.router.url){case"/home":this.currentIcon="home-icon.png";break;case"/login":this.currentIcon="login-icon.png";break;case"/quiensoy":this.currentIcon="favicon.png";break;case"/registrarse":this.currentIcon="registrarse-icon.png";break;default:this.currentIcon="favicon.png";break}}};e.\u0275fac=function(i){return new(i||e)(re(Xt),re(Nt))},e.\u0275cmp=qe({type:e,selectors:[["app-root"]],standalone:!0,features:[We],decls:15,vars:6,consts:[[1,"navbar"],[1,"navbar-left"],["id","logo","src","../../../assets/home-icon.png","alt","Logo"],[3,"routerLink"],[1,"navbar-right"],["class","user",4,"ngIf"],[1,"user"],["href","#",3,"click"]],template:function(i,o){i&1&&(U(0,"header")(1,"nav",0)(2,"nav",1),ze(3,"img",2),U(4,"li")(5,"a",3),te(6,"HOME"),j()(),U(7,"li")(8,"a",3),te(9,"QUIEN SOY"),j()()(),U(10,"nav",4),Fn(11,x2,2,1,"li",5)(12,N2,3,0,"li")(13,P2,3,2),j()()(),ze(14,"router-outlet")),i&2&&(_e(5),gr("routerLink",vo(4,S2)),_e(3),gr("routerLink",vo(5,R2)),_e(3),gr("ngIf",o.auth.currentUser==null?null:o.auth.currentUser.email),_e(),mr(12,o.auth.currentUser!=null&&o.auth.currentUser.email?12:13))},dependencies:[pg,pl,Zs,ED],styles:['.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background-image:url("./media/espacio1-MP3ZAH6H.png");box-shadow:0 4px 8px #0000001a}.navbar-left[_ngcontent-%COMP%], .navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.navbar-left[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .navbar-right[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-left:20px}.navbar-left[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{margin-left:0}.navbar-right[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:30px}#logo[_ngcontent-%COMP%]{width:40px;height:auto;margin-right:10px}a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}a[_ngcontent-%COMP%]:hover{color:#007bff}.user[_ngcontent-%COMP%]{text-decoration:none;color:#fff;padding:10px 20px}']});let t=e;return t})();ND(vA,yA).catch(t=>console.error(t));
